function getMobileOS(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"wp":/android/i.test(e)?"android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"ios":"unknown"}function timeoutevent(e,t,n){this.fired=!1,this.event=e,this.delay=t,this.fn=n,this.waitThenRun=function(e,t){var n=this;setTimeout(function(){n.fired||(n.fired=!0,t())},e)},this.catchEventThenRun=function(e,t){var n=this;document.addEventListener(e,function(){n.fired||(n.fired=!0,t())})},this.listen=function(e,t,n){e&&(this.event=e),t&&(this.delay=t),n&&(this.fn=n),this.fn&&(0<this.delay&&this.waitThenRun(this.delay,this.fn),this.event&&this.catchEventThenRun(this.event,this.fn))},this.reset=function(){this.fired=!1}}function CookieArray(e){this.key=e.key,this.duration=e.duration,this.domain=e.domain,this.max=e.max,this.read()}function EpiUser(e,t,n,i,o){this.userId=e,this.displayName=t,this.network=n,this.session=i,this.avatar=o}function EpiTracking(e){var d=e||"web",t=this,p=null,f="width:1px; height:1px;position:absolute;display:none;top:-100px;";this.init=function(){window.getCookie("EpiUser")&&(p=JSON.parse(unescape(window.getCookie("EpiUser"))).userId),p||(p=window.getCookie("oa2UserId"))},this.track=function(){for(var e=document.querySelectorAll(".bm-track"),t=null,n=0;n<e.length;n++){var i=e[n].getAttribute("data-value"),o=e[n].getAttribute("data-key"),r={rand:Math.random()};if(0===o.indexOf(d+"_article")&&null===t){t=i;var a=window.getUrlParam("utm_source"),s=window.getUrlParam("utm_medium"),l=window.getUrlParam("utm_campaign");a&&s&&l&&"znews"!==d&&(o=a+"_"+s+"_"+l+":"+o),p||LastRead.add(t);var c=window.location.hash.substring(1);null!==c&&(r.source=c)}r.key=o,i&&(r.value=i),t&&p&&(r.uid=p);var u=document.createElement("img");u.src=new LogUrlBuilder("log",r).build(),u.setAttribute("style",f),document.body.appendChild(u)}},this.sendTrackArticle=function(e){for(var t=document.querySelectorAll(".bm-track"),n=null,i=0;i<t.length;i++){var o=t[i].getAttribute("data-value");if(0===t[i].getAttribute("data-key").indexOf(d+"_article")&&null===n){n=o;var r=window.location.hash.substring(1);track_key="read_article",e&&(track_key=track_key+"_"+e);var a={key:track_key,rand:Math.random()};o&&(a.value=o),n&&p&&(a.uid=p),null!==r&&(a.source=r);var s=new LogUrlBuilder("log",a).build();$.get(s);break}}},this.track_ext=function(){for(var e=document.querySelectorAll(".ext-track"),t=0;t<e.length;t++){var n=e[t].getAttribute("data-i"),i=e[t].getAttribute("data-u"),o=e[t].getAttribute("data-r"),r=document.createElement("iframe");r.src=new LogUrlBuilder("extlog",{i:n,u:i,r:o,t:document.title}).build(),r.setAttribute("style",f),document.body.appendChild(r)}},this.track_zoanid=function(){var e=window.getCookie("zoanid");if(e){var t=document.createElement("img");t.src=new LogUrlBuilder("log",{key:"zalow_all",rand:Math.random()}).build(),t.setAttribute("style","width:50px; height:50px;position:absolute;display:none;top:-100px;"),document.body.appendChild(t),window.article_id&&((t=document.createElement("img")).src=new LogUrlBuilder("log",{key:"zalow_article",value:window.article_id,oaid:e,rand:Math.random()}).build(),t.setAttribute("style",f),document.body.appendChild(t))}},this.replaceState=function(){window.location.hash.substring(1);"function"==typeof History.replaceState&&History.replaceState({},document.title,window.location.href.replace(window.location.hash,""))},this.load=function(){t.init(),t.track(),t.track_ext(),t.replaceState()}}function EpiUi(){var e=this;this.goTop=function(){$(".nav li.is-last").click(function(){$(".header form.global-search input[type='text'").focus()})},this.scroll=function(){$(document).scroll(function(){50<$(document).scrollTop()?$(".nav").addClass("is-fixed"):$(".nav").removeClass("is-fixed")})},this.fixer=function(){$(".main-filter").fixer({gap:40,top:15}),$(".article__social-v").fixer({gap:35,top:.1})},this.switchMobile=function(){$("a.switch-mobile").click(function(e){e.preventDefault(),$.removeCookie("bm_web",{path:"/"});var t=$(this).attr("data-target-host");window.location.replace(t+window.location.pathname+"#bm_web")})},this.setActive=function(){switch(EpiLib.pageType){case"homepage":$(".main-filter a.popular").addClass("is-active");break;case"latest":void 0===window.cate_id&&$(".main-filter a.latest").addClass("is-active");break;case"video":$(".main-filter a.video").addClass("is-active");break;case"topiclist":$(".main-filter a.topiclist").addClass("is-active");break;case"recommend":$(".main-filter a.recommend").addClass("is-active");break;case"overview":$(".main-filter a.overview").addClass("is-active")}if("/"===window.location.pathname)$(".nav ul > li.has-icon a").addClass("is-active");else if(void 0!==window.cate_id){var e=$(".nav ul li a[data-id="+window.cate_id+"]");e&&$(e).parents("li").addClass("is-active")}},this.notificationTooltip=function(){$(".btn-notification-switch").hover(function(){_this=$(this),_this.next().toggleClass("is-active")})},this.load=function(){e.goTop(),e.scroll(),e.fixer(),e.setActive(),e.switchMobile(),e.notificationTooltip()}}function EpiPage(){var i,o,r,l=this,c=0,e=0,u="",a=0,t="",d=0;this.initSearch=function(){$(".local-search, .global-search").submit(function(e){e.preventDefault();var t=$(this).find("input").val();if(""!==t){t=(t=t.replace(/-/g,"_")).replace(/ /g,"-");var n="/tim-kiem/"+encodeURIComponent(t.toLowerCase())+".epi";window.location=n}else alert("Bạn phải gõ từ khóa tìm kiếm !");return!1})},this.initLogin=function(){EpiAuth.init(),$(".btn-logout").click(function(){EpiAuth.logout()}),$(".login-required").click(function(){return!!EpiLib.getUserId()||(EpiTemplate.load(EpiTemplate.MODAL_LOGIN,{onCompleted:function(e){var t=EpiUi.showPopup("#login-wrap",e);$(document).on("user:loggedin",function(){t.close()})}}),!1)})},this.initSocial=function(){var i=EpiLib.getMetaContent("og:title"),o=EpiLib.getMetaContent("og:description"),r=EpiLib.getMetaContent("og:url");$(document).on("click touch",".article__social-v a.popup",{},function(){var e=$(this).attr("data-href"),t=$(this).attr("data-type");switch(window.ga&&window.ga("send",{hitType:"event",eventCategory:"desktop_"+t,eventAction:"share",eventLabel:EpiLib.getMetaContent("og:title")}),t){case"facebook":if("undefined"!==window.FB){var n=window.FB;n.init({appId:"128990640458592",version:"v2.7"}),n.ui({method:"share",title:i,description:o,href:r+"?utm_source=desktop&utm_medium=facebook&utm_campaign=share"},function(e){var t=document.createElement("img");e&&!e.error_code?(window.ga&&window.ga("send",{hitType:"event",eventCategory:"desktop_facebook_share",eventAction:"success",eventLabel:EpiLib.getMetaContent("og:title")}),t.src="//log.baomoi.com/log?key=desktop_facebook_share:success&value="+c+"&rand="+Math.random()):(window.ga&&window.ga("send",{hitType:"event",eventCategory:"desktop_facebook_share",eventAction:"error",eventLabel:EpiLib.getMetaContent("og:title")}),t.src="//log.baomoi.com/log?key=desktop_facebook_share:error&value="+c+"&rand="+Math.random()),t.setAttribute("style","width:50px; height:50px;position:absolute;display:none;top:-100px;"),document.body.appendChild(t)})}break;default:$(this).hasClass("popup")&&EpiLib.popupCenter(e,"Chia sẻ",580,470)}}),$(".article__social-v a.like").each(function(){var e=$(this).attr("data-aid");$.cookie("liked_"+e)&&$(this).addClass("liked")}),$(document).on("click touch",".article__social-v a.like",function(e){e.preventDefault();var n=this;if($(n).hasClass("liked"))return!1;var t=EpiLib.getUserId();if(t){var i=$(n).attr("data-aid");if(i)$.cookie("liked_"+i)?alert("Bạn đã bình chọn nội dung này rồi!"):$.post("//"+EpiLib.logHost+"/like",{id:i,userid:t}).done(function(){$.cookie("liked_"+i,1,{expires:1,path:"/"});var e=$(n).find("span"),t=parseInt(e.text());e.text(isNaN(t)?"Đã bình chọn":t+1)}).always(function(){$(n).addClass("liked")})}return!1})},this.initBookmark=function(){var t=!1,n=!1,i=$(".article__social-v a.bookmark"),e=function(){EpiAPI.Usersettings.hasBookmark({ids:[c],success:function(e){EpiLib.user&&e&&Array.isArray(e)&&0<=e.indexOf(c)&&($(i).addClass("is-saved"),t=!0)},error:function(e){}})};$(document).on("user:loggedin",function(){e()}),EpiLib.getUserId()&&e(),$(document).on("user:loggedout",function(){t&&($(i).removeClass("is-saved"),t=!1)}),i.on("click touch",function(){!n&&EpiLib.user&&(n=!0,t?EpiAPI.Usersettings.remove({type:"bookmark",ids:[c],success:function(e){i.removeClass("is-saved"),t=n=!1},error:function(e){n=!1}}):EpiAPI.Usersettings.bookmark({ids:[c],success:function(e){EpiLib.user&&(i.addClass("is-saved"),t=!0),n=!1},error:function(e){n=!1}}))})},this.initReportArticle=function(){EpiTemplate.load(EpiTemplate.MODAL_REPORT),$(document).on("click touch",".article__social-v a.report",function(e){e.preventDefault(),EpiUi.loading.show(),EpiTemplate.load(EpiTemplate.MODAL_REPORT,{onCompleted:function(e){EpiUi.loading.hide();var i=EpiUi.showPopup("#report-modal-container",e),t=i.find("#report-modal");i.find("label input#report-radio").on("change",function(){var e=$(this).closest(".wrap");e.siblings(".wrap").removeClass("is-active"),e.toggleClass("is-active")}),i.find("label input#report-check").on("change",function(){$(this).parent().toggleClass("is-focus")}),t.find("#report-content").focusin(function(e){t.addClass("text-focus")}),t.find("#report-content").focusout(function(e){t.removeClass("text-focus")});var n=i.find(".send");n.unbind("click"),n.on("click",function(){var n={},e=!1,t=i.find(".wrap.is-active input#report-radio");if(t.length)switch(n.type=t.val(),n.type){case"content":n.tags=[],i.find("label.is-focus input#report-check").each(function(e,t){n.tags.push($(t).val())}),n.tags&&0<n.tags.length&&(e=!0);break;case"other":n.message=i.find("#report-content").val(),n.message&&""!==n.message&&(e=!0);break;default:e=!0}e?(EpiUi.loading.show(),EpiAPI.ReportContent.send({id:c,data:JSON.stringify(n),type:0,success:function(){EpiUi.loading.hide(),EpiUi.showInfoModal({data:{id:"report-success-modal",title:"Đã gửi thông tin",text:"Cám ơn bạn đóng góp ý kiến. Chúng tôi sẽ kiểm tra lại nội dung trong thời gian sớm nhất.",icon:"spr--check-big",confirm:"Đóng"}})},error:function(e){EpiUi.showInfoModal({data:{id:"report-failed-modal",title:"Không thể thực hiện",text:"Đã có lỗi xảy ra, bạn vui lòng thực hiện lại",icon:"spr--cancel-big",confirm:"Đóng"}}),EpiUi.loading.hide()}}),i.close()):i.find(".notice-red").show()})}})})},this.initLoadMore=function(){var t=1,r=!1,a=$(".control a.control__next");if(0!==a.length){var s=$(a[0]).attr("href");$(window).bind("scroll",function(){if($(window).scrollTop()>=$(".timeline").height()-$(window).height()-500){if(!1!==r)return;if(t<5)a.hide(),EpiUi.loading.show("Đang tải tin ...","new-feed"),r=!0,t++,$.get(s+(s.indexOf("?")<0?"?":"&")+"loadmore=1",function(e){if(0<$(e).length){var t=[];$(".loadmore .story[data-aid]").each(function(){var e=$(this).attr("data-aid");t.push(e)});var n=$("<div>",{style:"display:none"}).html(e).appendTo(".timeline");EpiUi.Article.format(n),EpiUi.Article.trackImps(n);var i=[];n.find(".story").each(function(){var e=$(this).attr("data-aid");e?-1===jQuery.inArray(e,t)&&(t.push(e),i.push(this)):$(this).hasClass("is-pr")&&i.push(this)}),$(n).remove(),$(".loadmore").append(i);var o=parseInt(s.match(/trang(\d+)/gim)[0].replace("trang",""));s=s.replace(/trang(\d+)/gim,"trang"+(o+1)),a.attr("href",s)}else a.attr("href","");r=!1,EpiUi.loading.hide(),l.checkShowPr({onShow:function(){EpiPR.loadUnrendered()}})});else{var e=$(a[0]).attr("href");e&&""!==e?a.show():a.hide()}}})}},this.initArticleVideo=function(){function e(){var e=$(window).height();return e*=.8}function o(e,t,n,i){var o=0,r=0;0<n&&(r=e,0<i&&t<(o=Math.round(r*i/n))&&(o=Math.round(t),r=0));var a={width:r?r+"px":"100%"};return o&&(a.height=o+"px"),a}if(0<$(".article__body p.body-video video").length||0<$(".article__body p.body-video-youtube iframe").length){var t,r=e();$(".article__body p.body-video video").each(function(){$(this).attr("controls")||$(this).prop("controls",!0);var e=$(this).parent().width(),t=$(this).attr("data-width"),n=$(this).attr("data-height"),i=o(e,r,t,n);$(this).attr("width",i.width),i.height&&$(this).attr("height",i.height)});var n=document.querySelectorAll(".article__body .body-video video");for(t=0;t<n.length;t++){var i=PLAYER.load(t,n[t],"desktop-video",u,c,d),a=$(n[t]);i.vw=a.attr("data-width"),i.vh=a.attr("data-height")}var s=document.querySelectorAll(".article__body .body-video-youtube iframe");for(t=0;t<s.length;t++)PLAYER.load(t,n[t],"desktop-youtube",u,c,d);window.addEventListener("resize",function(){var n=e();EpiLib.isDebug&&(console.log($(window).width()+" x "+$(window).height()),console.log("wh:"+n)),PLAYER.ls.forEach(function(e){var t=o($("#"+e.wid).parent().width(),n,e.vw,e.vh);e.setStyles(t)})})}},this.initArticlePhoto=function(){$(".article__body img").wrap(function(e){var t=$(this).attr("src");t=t.replace("w700_r1","w1000_r1");var n=$(this).closest(".body-image").next(".media-caption");return 0<n.length&&(n=n.find("em")),"<a class='photo' href='"+t+"' data-desc='"+(n?n.text():document.title.replace('"',"&quot;").replace("“","&quot;").replace("”","&quot;"))+"' data-index='"+e+"' />"}),$(".article__body").each(function(){var t,e=$(this),n=(t=[],e.find("a.photo").each(function(){var e={src:$(this).attr("href"),w:0,h:0,title:$(this).attr("data-desc")};t.push(e)}),t),i=$(".pswp")[0];e.on("click","a.photo",function(e){e.preventDefault();var t=$(this).data("index");new PhotoSwipe(i,PhotoSwipeUI_Default,n,{index:t,showAnimationDuration:0,hideAnimationDuration:0,tapToClose:!0,shareEl:!1,captionEl:!0}).init()})})},this.initArticleBox=function(o){o&&EpiPage.renderArticles(EpiAPI.WebData,{data:{method:o.name,apptype:2,size:3*o.size,catid:e,imgsize:"w200_r3x2"},size:o.size,excludedIds:[c],success:function(n){$.each(n,function(e,t){$(t).attr("data-track","|index"+e)});var e=$("#"+o.name+"-box"),i=0;$.each(e.find(".story.is-pr"),function(e,t){$(t).before(n[i]),$(t).before(n[i+1]),i+=2});for(var t=i;t<n.length;t++)e.append(n[t]);EpiUi.Article.trackImps(e)}})},this.initArticleWatcher=function(){var e,t=0;$(document).on("userwatcher:active",function(){e||0!=t||(e=setInterval(n,6e4))}),$(document).on("userwatcher:inactive",function(){e&&(clearInterval(e),e=null)});var n=function(){"active"===UserWatcher.getState()&&(t+=1,e&&(clearInterval(e),e=null),EpiTrackingInst.sendTrackArticle(60*t))}},this.initArticle=function(){this.initArticlePhoto(),this.initBookmark(),this.initReportArticle(),this.initArticleWatcher(),this.initArticleVideo(),this.initArticleBox({name:"hotnews",size:6}),this.initArticleBox({name:"mostrecent",size:8})},this.initRecommendPage=function(){if(null===EpiLib.user)document.location="/";else{var e=EpiLib.getUserId()?{method:"recommend",apptype:1,size:104,imgsize:"w200_r3x2",userId:EpiLib.getUserId(),includes:1}:{method:"hotnews",apptype:2,size:104,imgsize:"w200_r3x2"};EpiPage.renderArticles(EpiAPI.WebData,{data:e,size:0,excludedIds:[c],success:function(e){var t=$("<div>",{class:"timeline "});$(".breadcrumbs").after(t);var n=e.length,i=[];if(0<n)for(var o=[];o.length<52&&o.length<n;){var r=Math.floor(Math.random()*n);-1===o.indexOf(r)&&(o.push(r),i.push(e[r]))}if(0<i.length){$(i[0]).addClass("is-first");for(r=0;r<i.length;r++)$(i[r]).attr("data-track","|index"+r);t.append(i),t.show(),EpiUi.Article.trackImps(t)}}})}},this.initRecommendBox=function(){var n=$('div[data-track="|index9"]');if(n.length){var e={method:"recommend",apptype:1,size:60,imgsize:"w300_r3x2",includes:1},i="";0<EpiLib.getUserId()?(e.userId=EpiLib.getUserId(),i="u"):(e.contentids=LastRead.get().join(),i="c");var o=[];$(".story[data-aid]").each(function(e,t){var n=parseInt($(this).attr("data-aid"));isNaN(n)||o.push(n)}),EpiPage.renderArticles(EpiAPI.WebData,{data:e,size:3,excludedIds:o,success:function(e){if(0<e.length){for(var t=0;t<e.length;t++)$(e[t]).attr("data-track","|"+i+"recommend"+t),$(e[t]).addClass("is-recommend");n.after(e),EpiUi.Article.trackSelectorImps($(".is-recommend"))}}})}},this.initUserFeedLoadmore=function(){var e=0,t=!1,n=!1,r=$(".timeline"),a=0,i=function(){t||n||(EpiUi.loading.show("Đang tải tin ...","new-feed"),t=!0,s({start:30*e,size:30,success:function(){0===e&&o(),e++,EpiUi.loading.hide(),t=!1},error:function(){0===e&&$(".timeline").before($("<div>",{class:"no-results",text:"Chưa tải được dữ liệu!"})),n=!0,EpiUi.loading.hide(),t=!1},empty:function(){0===e&&$(".timeline").before($("<div>",{class:"no-results",text:"Chưa có dữ liệu!"})),n=!0,EpiUi.loading.hide(),t=!1}}))},o=function(){$(window).bind("scroll",function(){$(window).scrollTop()>=r.height()-$(window).height()-500&&i()})},s=function(o){o&&null!==EpiLib.getUserId()&&EpiPage.renderArticles(EpiAPI.WebFeed,{data:{imgsize:"w200_r3x2",start:o.start,size:o.size},size:o.size,success:function(e){if(e)if(0===e.length)o.empty();else{o.success(),r.children().length<=0&&$(e[0]).addClass("is-first");for(var t=0;t<e.length;t++){var n="",i=$(e[t]).attr("data-source");i&&(n=";"+i),$(e[t]).attr("data-track","|index"+(t+a)+n),EpiUi.Article.trackElementImps(e[t])}r.append(e),a+=e.length}else o.error()},error:function(e){o.error()}})};$(document).on("user:loggedout",function(){document.location="/"}),null===EpiLib.user?document.location="/":i()},this.initLoginPage=function(){$(document).on("user:loggedin",function(){document.location.reload()})},this.initTracking=function(){$(document).on("click touch","[data-track] a, a[data-track]",function(){var e="";$(this).parents("[data-track]").each(function(){e=$(this).attr("data-track")+e}),-1===this.href.indexOf("#")&&("|"===e.substring(0,1)&&(e=u+e),this.href=this.href+"#"+e)})},this.initNotify=function(){var t=$.cookie("lastTime");void 0===t&&(t=0),$(".timeline .story time").each(function(){var e=Date.parse($(this).attr("datetime"))/1e3;t<e&&(t=e)}),$.cookie("lastTime",t,{expires:1,path:"/"});var e="//"+EpiLib.apiHost+"/web/content/get?method=noti5news&sttime="+t;$.getJSON(e).done(function(e){if(e.result&&!e.error){var n=0;$.each(e.result,function(e,t){"c_-1"!==t.zoneId||(n=t.counter)}),0<n&&(0<$(".main-filter .latest .number").length?$(".main-filter .latest .number").text(n):$(".main-filter .latest").append($("<span>",{class:"number",text:n})))}})},this.checkShowPr=(o=!(i=!1),r=function(e){o?e.onShow():e.onHide&&e.onHide()},function(n){n&&(i?r(n):$.get("//"+EpiLib.apiHost+"/setting/config?key=StringConfig_Open_BlockedAdsZones",function(e){if(e&&e.data){var t=EpiLib.pageType;a&&0<a&&(t=t+"_"+a),o=!(0<=e.data.indexOf(t)),r(n)}i=!0}))}),this.load=function(){switch(EpiPage.UrlCorrect(EpiLib.pageType,"canonical"),void 0!==window.article_id&&(c=window.article_id),void 0!==window.cate_id&&(e=window.cate_id),u=EpiPage.catePath(),void 0!==window.data_id&&(a=window.data_id),void 0!==window.data_id_str&&(t=window.data_id_str),void 0!==window.pub_id&&(d=window.pub_id),l.initSearch(),l.initLogin(),l.initSocial(),l.initTracking(),EpiUi.Article.format($(document)),EpiUi.Article.trackImps($(document)),EpiLib.pageType){case"detail":l.initArticle(),0<d&&EpiPage.initFollowZone("p_"+d,"#follow-pub"),InternalAds.loadZaloPC();break;case"recommend":l.initRecommendPage();break;case"history":case"bookmark":EpiPage.initProfileUserInfo(),EpiPage.initUserPageLoadmore(EpiLib.pageType,"w100_r1x1");break;case"publisher":0<a&&EpiPage.initFollowZone("p_"+a,"#follow");break;case"groupcluster":0<a&&EpiPage.initFollowZone("gt_"+a,"#follow");break;case"cluster":0<a&&EpiPage.initFollowZone("t_"+a,"#follow");break;case"channeldashboard":Channel.initDashboardPage(3);break;case"channeledit":case"channelcreate":Channel.initDashboardPage(0),Channel.initEditPage(t);break;case"profile":EpiPage.initProfilePage();break;case"login":l.initLoginPage();break;case"followedcontents":EpiPage.initFollowedContentsPage({preset:"w200_r3x2"});break;case"followedlists":EpiPage.initProfileUserInfo(),EpiPage.initFollowPage("publisher"),EpiPage.initFollowPage("cluster");break;case"region":EpiPage.Region.load(".breadcrumbs .location");break;case"homepage":(new timeoutevent).listen("ZA.onready",3e3,function(){EpiLib.setVisitorID(ZA.getVisitorID()),EpiPR.loadNewestBox()}),EpiPage.loadRecommendSections("w300_r3x2"),EpiPage.Region.load(".location-box",!0),EpiPage.initBoxChannel($(".timeline .story")[15],{preset:"w200_r1x1",size:3,top:2}),EpiPage.removeDuplicateClusterTopicStory();default:"latest"===EpiLib.pageType&&$.cookie("lastTime",parseInt((new Date).getTime()/1e3)+25200,{expires:1,path:"/"}),0<$(".timeline").length&&l.initLoadMore()}0<$(".main-filter").length&&(l.initNotify(),setInterval(function(){l.initNotify()},3e4)),EpiPR.init({platform:"web",preset:"w300_r3x2"}),l.checkShowPr({onShow:function(){new timeoutevent("ZA.onready",3e3,function(){EpiLib.setVisitorID(ZA.getVisitorID()),EpiPR.loadUnrendered()}).listen()},onHide:function(){$(".is-ads").remove(),$(".fyi--group").each(function(){$(this).children().length<=0&&$(this).remove()})}}),document.addEventListener("ZA.onready",function(){EpiLib.setVisitorID(ZA.getVisitorID())})}}!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(k,e){"use strict";function m(e,t){var n=(t=t||Z).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function s(e){var t=!!e&&"length"in e&&e.length,n=ae.type(e);return"function"!==n&&!ae.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function t(e,n,i){return ae.isFunction(n)?ae.grep(e,function(e,t){return!!n.call(e,t,e)!==i}):n.nodeType?ae.grep(e,function(e){return e===n!==i}):"string"!=typeof n?ae.grep(e,function(e){return-1<X.call(n,e)!==i}):ge.test(n)?ae.filter(n,e,i):(n=ae.filter(n,e),ae.grep(e,function(e){return-1<X.call(n,e)!==i&&1===e.nodeType}))}function n(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e){return e}function d(e){throw e}function l(e,t,n,i){var o;try{e&&ae.isFunction(o=e.promise)?o.call(e).done(t).fail(n):e&&ae.isFunction(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}function i(){Z.removeEventListener("DOMContentLoaded",i),k.removeEventListener("load",i),ae.ready()}function o(){this.expando=ae.expando+o.uid++}function p(e,t,n){var i,o;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Ae,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(o=n)||"false"!==o&&("null"===o?null:o===+o+""?+o:Ie.test(o)?JSON.parse(o):o)}catch(e){}Te.set(e,t,n)}else n=void 0;return n}function f(e,t,n,i){var o,r=1,a=20,s=i?function(){return i.cur()}:function(){return ae.css(e,t,"")},l=s(),c=n&&n[3]||(ae.cssNumber[t]?"":"px"),u=(ae.cssNumber[t]||"px"!==c&&+l)&&Le.exec(ae.css(e,t));if(u&&u[3]!==c)for(c=c||u[3],n=n||[],u=+l||1;u/=r=r||".5",ae.style(e,t,u+c),r!==(r=s()/l)&&1!==r&&--a;);return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}function v(e,t){for(var n,i,o=[],r=0,a=e.length;r<a;r++)(i=e[r]).style&&(n=i.style.display,t?("none"===n&&(o[r]=Se.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&je(i)&&(o[r]=(d=c=l=void 0,c=(s=i).ownerDocument,u=s.nodeName,(d=Pe[u])||(l=c.body.appendChild(c.createElement(u)),d=ae.css(l,"display"),l.parentNode.removeChild(l),"none"===d&&(d="block"),Pe[u]=d)))):"none"!==n&&(o[r]="none",Se.set(i,"display",n)));var s,l,c,u,d;for(r=0;r<a;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}function g(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&c(e,t)?ae.merge([e],n):n}function y(e,t){for(var n=0,i=e.length;n<i;n++)Se.set(e[n],"globalEval",!t||Se.get(t[n],"globalEval"))}function b(e,t,n,i,o){for(var r,a,s,l,c,u,d=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if((r=e[f])||0===r)if("object"===ae.type(r))ae.merge(p,r.nodeType?[r]:r);else if(Ue.test(r)){for(a=a||d.appendChild(t.createElement("div")),s=(Me.exec(r)||["",""])[1].toLowerCase(),l=qe[s]||qe._default,a.innerHTML=l[1]+ae.htmlPrefilter(r)+l[2],u=l[0];u--;)a=a.lastChild;ae.merge(p,a.childNodes),(a=d.firstChild).textContent=""}else p.push(t.createTextNode(r));for(d.textContent="",f=0;r=p[f++];)if(i&&-1<ae.inArray(r,i))o&&o.push(r);else if(c=ae.contains(r.ownerDocument,r),a=g(d.appendChild(r),"script"),c&&y(a),n)for(u=0;r=a[u++];)ze.test(r.type||"")&&n.push(r);return d}function r(){return!0}function h(){return!1}function a(){try{return Z.activeElement}catch(e){}}function w(e,t,n,i,o,r){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)w(e,s,n,i,t[s],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=h;else if(!o)return e;return 1===r&&(a=o,(o=function(e){return ae().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ae.guid++)),e.each(function(){ae.event.add(this,t,o,i,n)})}function x(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")&&ae(">tbody",e)[0]||e}function _(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function C(e){var t=Ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){var n,i,o,r,a,s,l,c;if(1===t.nodeType){if(Se.hasData(e)&&(r=Se.access(e),a=Se.set(t,r),c=r.events))for(o in delete a.handle,a.events={},c)for(n=0,i=c[o].length;n<i;n++)ae.event.add(t,o,c[o][n]);Te.hasData(e)&&(s=Te.access(e),l=ae.extend({},s),Te.set(t,l))}}function S(n,i,o,r){i=G.apply([],i);var e,t,a,s,l,c,u=0,d=n.length,p=d-1,f=i[0],h=ae.isFunction(f);if(h||1<d&&"string"==typeof f&&!oe.checkClone&&Qe.test(f))return n.each(function(e){var t=n.eq(e);h&&(i[0]=f.call(this,e,t.html())),S(t,i,o,r)});if(d&&(t=(e=b(i,n[0].ownerDocument,!1,n,r)).firstChild,1===e.childNodes.length&&(e=t),t||r)){for(s=(a=ae.map(g(e,"script"),_)).length;u<d;u++)l=e,u!==p&&(l=ae.clone(l,!0,!0),s&&ae.merge(a,g(l,"script"))),o.call(n[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,ae.map(a,C),u=0;u<s;u++)l=a[u],ze.test(l.type||"")&&!Se.access(l,"globalEval")&&ae.contains(c,l)&&(l.src?ae._evalUrl&&ae._evalUrl(l.src):m(l.textContent.replace(Je,""),c))}return n}function T(e,t,n){for(var i,o=t?ae.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||ae.cleanData(g(i)),i.parentNode&&(n&&ae.contains(i.ownerDocument,i)&&y(g(i,"script")),i.parentNode.removeChild(i));return e}function I(e,t,n){var i,o,r,a,s=e.style;return(n=n||et(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ae.contains(e.ownerDocument,e)||(a=ae.style(e,t)),!oe.pixelMarginRight()&&Ye.test(a)&&Xe.test(t)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function A(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function $(e){var t=ae.cssProps[e];return t||(t=ae.cssProps[e]=function(e){if(e in at)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=rt.length;n--;)if((e=rt[n]+t)in at)return e}(e)||e),t}function L(e,t,n){var i=Le.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function D(e,t,n,i,o){var r,a=0;for(r=n===(i?"border":"content")?4:"width"===t?1:0;r<4;r+=2)"margin"===n&&(a+=ae.css(e,n+De[r],!0,o)),i?("content"===n&&(a-=ae.css(e,"padding"+De[r],!0,o)),"margin"!==n&&(a-=ae.css(e,"border"+De[r]+"Width",!0,o))):(a+=ae.css(e,"padding"+De[r],!0,o),"padding"!==n&&(a+=ae.css(e,"border"+De[r]+"Width",!0,o)));return a}function j(e,t,n){var i,o=et(e),r=I(e,t,o),a="border-box"===ae.css(e,"boxSizing",!1,o);return Ye.test(r)?r:(i=a&&(oe.boxSizingReliable()||r===e.style[t]),"auto"===r&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)]),(r=parseFloat(r)||0)+D(e,t,n||(a?"border":"content"),i,o)+"px")}function O(e,t,n,i,o){return new O.prototype.init(e,t,n,i,o)}function P(){lt&&(!1===Z.hidden&&k.requestAnimationFrame?k.requestAnimationFrame(P):k.setTimeout(P,ae.fx.interval),ae.fx.tick())}function N(){return k.setTimeout(function(){st=void 0}),st=ae.now()}function M(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=De[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function z(e,t,n){for(var i,o=(q.tweeners[t]||[]).concat(q.tweeners["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,t,e))return i}function q(r,e,t){var n,a,i=0,o=q.prefilters.length,s=ae.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=st||N(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),i=0,o=c.tweens.length;i<o;i++)c.tweens[i].run(n);return s.notifyWith(r,[c,n,t]),n<1&&o?t:(o||s.notifyWith(r,[c,1,0]),s.resolveWith(r,[c]),!1)},c=s.promise({elem:r,props:ae.extend({},e),opts:ae.extend(!0,{specialEasing:{},easing:ae.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||N(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ae.Tween(r,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)c.tweens[t].run(1);return e?(s.notifyWith(r,[c,1,0]),s.resolveWith(r,[c,e])):s.rejectWith(r,[c,e]),this}}),u=c.props;for(function(e,t){var n,i,o,r,a;for(n in e)if(o=t[i=ae.camelCase(n)],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(a=ae.cssHooks[i])&&"expand"in a)for(n in r=a.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(u,c.opts.specialEasing);i<o;i++)if(n=q.prefilters[i].call(c,r,u,c.opts))return ae.isFunction(n.stop)&&(ae._queueHooks(c.elem,c.opts.queue).stop=ae.proxy(n.stop,n)),n;return ae.map(u,z,c),ae.isFunction(c.opts.start)&&c.opts.start.call(r,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),ae.fx.timer(ae.extend(l,{elem:r,anim:c,queue:c.opts.queue})),c}function H(e){return(e.match(xe)||[]).join(" ")}function R(e){return e.getAttribute&&e.getAttribute("class")||""}function U(n,e,i,o){var t;if(Array.isArray(e))ae.each(e,function(e,t){i||_t.test(n)?o(n,t):U(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,o)});else if(i||"object"!==ae.type(e))o(n,e);else for(t in e)U(n+"["+t+"]",e[t],i,o)}function F(r){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,o=e.toLowerCase().match(xe)||[];if(ae.isFunction(t))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(t)):(r[n]=r[n]||[]).push(t)}}function B(t,o,r,a){function s(e){var i;return l[e]=!0,ae.each(t[e]||[],function(e,t){var n=t(o,r,a);return"string"!=typeof n||c||l[n]?c?!(i=n):void 0:(o.dataTypes.unshift(n),s(n),!1)}),i}var l={},c=t===jt;return s(o.dataTypes[0])||!l["*"]&&s("*")}function W(e,t){var n,i,o=ae.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&ae.extend(!0,e,i),e}var V=[],Z=k.document,K=Object.getPrototypeOf,Q=V.slice,G=V.concat,J=V.push,X=V.indexOf,Y={},ee=Y.toString,te=Y.hasOwnProperty,ne=te.toString,ie=ne.call(Object),oe={},re="3.2.1",ae=function(e,t){return new ae.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,le=/^-ms-/,ce=/-([a-z])/g,ue=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:re,constructor:ae,length:0,toArray:function(){return Q.call(this)},get:function(e){return null==e?Q.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ae.each(this,e)},map:function(n){return this.pushStack(ae.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:J,sort:V.sort,splice:V.splice},ae.extend=ae.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||ae.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(i=e[t])&&(c&&i&&(ae.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&ae.isPlainObject(n)?n:{},a[t]=ae.extend(c,r,i)):void 0!==i&&(a[t]=i));return a},ae.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ae.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ee.call(e)||(t=K(e))&&("function"!=typeof(n=te.call(t,"constructor")&&t.constructor)||ne.call(n)!==ie))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[ee.call(e)]||"object":typeof e},globalEval:function(e){m(e)},camelCase:function(e){return e.replace(le,"ms-").replace(ce,ue)},each:function(e,t){var n,i=0;if(s(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?ae.merge(n,"string"==typeof e?[e]:e):J.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:X.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,a=!n;o<r;o++)!t(e[o],o)!==a&&i.push(e[o]);return i},map:function(e,t,n){var i,o,r=0,a=[];if(s(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&a.push(o);else for(r in e)null!=(o=t(e[r],r,n))&&a.push(o);return G.apply([],a)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),ae.isFunction(e))return i=Q.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(Q.call(arguments)))}).guid=e.guid=e.guid||ae.guid++,o},now:Date.now,support:oe}),"function"==typeof Symbol&&(ae.fn[Symbol.iterator]=V[Symbol.iterator]),ae.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()});var de=function(n){function w(e,t,n,i){var o,r,a,s,l,c,u,d=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!i&&((t?t.ownerDocument||t:q)!==L&&$(t),t=t||L,j)){if(11!==p&&(l=me.exec(e)))if(o=l[1]){if(9===p){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(d&&(a=d.getElementById(o))&&M(t,a)&&a.id===o)return n.push(a),n}else{if(l[2])return G.apply(n,t.getElementsByTagName(e)),n;if((o=l[3])&&v.getElementsByClassName&&t.getElementsByClassName)return G.apply(n,t.getElementsByClassName(o)),n}if(v.qsa&&!B[e+" "]&&(!O||!O.test(e))){if(1!==p)d=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,we):t.setAttribute("id",s=z),r=(c=C(e)).length;r--;)c[r]="#"+s+" "+h(c[r]);u=c.join(","),d=ge.test(e)&&f(t.parentNode)||t}if(u)try{return G.apply(n,d.querySelectorAll(u)),n}catch(e){}finally{s===z&&t.removeAttribute("id")}}}return S(e.replace(re,"$1"),t,n,i)}function e(){var i=[];return function e(t,n){return i.push(t+" ")>_.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function l(e){return e[z]=!0,e}function o(e){var t=L.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function t(e,t){for(var n=e.split("|"),i=n.length;i--;)_.attrHandle[n[i]]=t}function c(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function i(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function r(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&_e(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function s(a){return l(function(r){return r=+r,l(function(e,t){for(var n,i=a([],e.length,r),o=i.length;o--;)e[n=i[o]]&&(e[n]=!(t[n]=e[n]))})})}function f(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(s,e,t){var l=e.dir,c=e.next,u=c||l,d=t&&"parentNode"===u,p=R++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||d)return s(e,t,n);return!1}:function(e,t,n){var i,o,r,a=[H,p];if(n){for(;e=e[l];)if((1===e.nodeType||d)&&s(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||d)if(o=(r=e[z]||(e[z]={}))[e.uniqueID]||(r[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[l]||e;else{if((i=o[u])&&i[0]===H&&i[1]===p)return a[2]=i[2];if((o[u]=a)[2]=s(e,t,n))return!0}return!1}}function p(o){return 1<o.length?function(e,t,n){for(var i=o.length;i--;)if(!o[i](e,t,n))return!1;return!0}:o[0]}function x(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),c&&t.push(s)));return a}function y(f,h,m,g,v,e){return g&&!g[z]&&(g=y(g)),v&&!v[z]&&(v=y(v,e)),l(function(e,t,n,i){var o,r,a,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var i=0,o=t.length;i<o;i++)w(e,t[i],n);return n}(h||"*",n.nodeType?[n]:n,[]),d=!f||!e&&h?u:x(u,s,f,n,i),p=m?v||(e?f:c||g)?[]:t:d;if(m&&m(d,p,n,i),g)for(o=x(p,l),g(o,[],n,i),r=o.length;r--;)(a=o[r])&&(p[l[r]]=!(d[l[r]]=a));if(e){if(v||f){if(v){for(o=[],r=p.length;r--;)(a=p[r])&&o.push(d[r]=a);v(null,p=[],o,i)}for(r=p.length;r--;)(a=p[r])&&-1<(o=v?X(e,a):s[r])&&(e[o]=!(t[o]=a))}}else p=x(p===t?p.splice(c,p.length):p),v?v(null,t,p,i):G.apply(t,p)})}function m(e){for(var o,t,n,i=e.length,r=_.relative[e[0].type],a=r||_.relative[" "],s=r?1:0,l=d(function(e){return e===o},a,!0),c=d(function(e){return-1<X(o,e)},a,!0),u=[function(e,t,n){var i=!r&&(n||t!==T)||((o=t).nodeType?l(e,t,n):c(e,t,n));return o=null,i}];s<i;s++)if(t=_.relative[e[s].type])u=[d(p(u),t)];else{if((t=_.filter[e[s].type].apply(null,e[s].matches))[z]){for(n=++s;n<i&&!_.relative[e[n].type];n++);return y(1<s&&p(u),1<s&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(re,"$1"),t,s<n&&m(e.slice(s,n)),n<i&&m(e=e.slice(n)),n<i&&h(e))}u.push(t)}return p(u)}var g,v,_,b,k,C,E,S,T,I,A,$,L,D,j,O,P,N,M,z="sizzle"+1*new Date,q=n.document,H=0,R=0,U=e(),F=e(),B=e(),W=function(e,t){return e===t&&(A=!0),0},V={}.hasOwnProperty,Z=[],K=Z.pop,Q=Z.push,G=Z.push,J=Z.slice,X=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Y="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ie=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",oe=new RegExp(ee+"+","g"),re=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=new RegExp(ie),ue=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Y+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,we=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},xe=function(){$()},_e=d(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{G.apply(Z=J.call(q.childNodes),q.childNodes),Z[q.childNodes.length].nodeType}catch(e){G={apply:Z.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}for(g in v=w.support={},k=w.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},$=w.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:q;return i!==L&&9===i.nodeType&&i.documentElement&&(D=(L=i).documentElement,j=!k(L),q!==L&&(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),v.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),v.getElementsByTagName=o(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),v.getElementsByClassName=he.test(L.getElementsByClassName),v.getById=o(function(e){return D.appendChild(e).id=z,!L.getElementsByName||!L.getElementsByName(z).length}),v.getById?(_.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){return e.getAttribute("id")===t}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&j){var n=t.getElementById(e);return n?[n]:[]}}):(_.filter.ID=function(e){var n=e.replace(ve,ye);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&j){var n,i,o,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),_.find.TAG=v.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):v.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},_.find.CLASS=v.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&j)return t.getElementsByClassName(e)},P=[],O=[],(v.qsa=he.test(L.querySelectorAll))&&(o(function(e){D.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ee+"*(?:value|"+Y+")"),e.querySelectorAll("[id~="+z+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||O.push(".#.+[+~]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&O.push(":enabled",":disabled"),D.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(v.matchesSelector=he.test(N=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&o(function(e){v.disconnectedMatch=N.call(e,"*"),N.call(e,"[s!='']:x"),P.push("!=",ie)}),O=O.length&&new RegExp(O.join("|")),P=P.length&&new RegExp(P.join("|")),t=he.test(D.compareDocumentPosition),M=t||he.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!v.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===q&&M(q,e)?-1:t===L||t.ownerDocument===q&&M(q,t)?1:I?X(I,e)-X(I,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,a=[e],s=[t];if(!o||!r)return e===L?-1:t===L?1:o?-1:r?1:I?X(I,e)-X(I,t):0;if(o===r)return c(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?c(a[i],s[i]):a[i]===q?-1:s[i]===q?1:0}),L},w.matches=function(e,t){return w(e,null,null,t)},w.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&$(e),t=t.replace(le,"='$1']"),v.matchesSelector&&j&&!B[t+" "]&&(!P||!P.test(t))&&(!O||!O.test(t)))try{var n=N.call(e,t);if(n||v.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<w(t,L,null,[e]).length},w.contains=function(e,t){return(e.ownerDocument||e)!==L&&$(e),M(e,t)},w.attr=function(e,t){(e.ownerDocument||e)!==L&&$(e);var n=_.attrHandle[t.toLowerCase()],i=n&&V.call(_.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==i?i:v.attributes||!j?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},w.escape=function(e){return(e+"").replace(be,we)},w.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},w.uniqueSort=function(e){var t,n=[],i=0,o=0;if(A=!v.detectDuplicates,I=!v.sortStable&&e.slice(0),e.sort(W),A){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return I=null,e},b=w.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=b(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=b(t);return n},(_=w.selectors={cacheLength:50,createPseudo:l,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||w.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&w.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,o){return function(e){var t=w.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===o:"!="===i?t!==o:"^="===i?o&&0===t.indexOf(o):"*="===i?o&&-1<t.indexOf(o):"$="===i?o&&t.slice(-o.length)===o:"~="===i?-1<(" "+t.replace(oe," ")+" ").indexOf(o):"|="===i&&(t===o||t.slice(0,o.length+1)===o+"-"))}},CHILD:function(h,e,t,m,g){var v="nth"!==h.slice(0,3),y="last"!==h.slice(-4),b="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,o,r,a,s,l,c=v!==y?"nextSibling":"previousSibling",u=e.parentNode,d=b&&e.nodeName.toLowerCase(),p=!n&&!b,f=!1;if(u){if(v){for(;c;){for(a=e;a=a[c];)if(b?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===h&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&p){for(f=(s=(i=(o=(r=(a=u)[z]||(a[z]={}))[a.uniqueID]||(r[a.uniqueID]={}))[h]||[])[0]===H&&i[1])&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(f=s=0)||l.pop();)if(1===a.nodeType&&++f&&a===e){o[h]=[H,s,f];break}}else if(p&&(f=s=(i=(o=(r=(a=e)[z]||(a[z]={}))[a.uniqueID]||(r[a.uniqueID]={}))[h]||[])[0]===H&&i[1]),!1===f)for(;(a=++s&&a&&a[c]||(f=s=0)||l.pop())&&((b?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++f||(p&&((o=(r=a[z]||(a[z]={}))[a.uniqueID]||(r[a.uniqueID]={}))[h]=[H,f]),a!==e)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(e,r){var t,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||w.error("unsupported pseudo: "+e);return a[z]?a(r):1<a.length?(t=[e,e,"",r],_.setFilters.hasOwnProperty(e.toLowerCase())?l(function(e,t){for(var n,i=a(e,r),o=i.length;o--;)e[n=X(e,i[o])]=!(t[n]=i[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:l(function(e){var i=[],o=[],s=E(e.replace(re,"$1"));return s[z]?l(function(e,t,n,i){for(var o,r=s(e,null,i,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return i[0]=e,s(i,null,n,o),i[0]=null,!o.pop()}}),has:l(function(t){return function(e){return 0<w(t,e).length}}),contains:l(function(t){return t=t.replace(ve,ye),function(e){return-1<(e.textContent||e.innerText||b(e)).indexOf(t)}}),lang:l(function(n){return ue.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(ve,ye).toLowerCase(),function(e){var t;do{if(t=j?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===D},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:s(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[g]=i(g);for(g in{submit:!0,reset:!0})_.pseudos[g]=r(g);return u.prototype=_.filters=_.pseudos,_.setFilters=new u,C=w.tokenize=function(e,t){var n,i,o,r,a,s,l,c=F[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=_.preFilter;a;){for(r in n&&!(i=ae.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(o=[])),n=!1,(i=se.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(re," ")}),a=a.slice(n.length)),_.filter)!(i=de[r].exec(a))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?w.error(e):F(e,s).slice(0)},E=w.compile=function(e,t){var n,g,v,y,b,i,o=[],r=[],a=B[e+" "];if(!a){for(t||(t=C(e)),n=t.length;n--;)(a=m(t[n]))[z]?o.push(a):r.push(a);(a=B(e,(g=r,y=0<(v=o).length,b=0<g.length,i=function(e,t,n,i,o){var r,a,s,l=0,c="0",u=e&&[],d=[],p=T,f=e||b&&_.find.TAG("*",o),h=H+=null==p?1:Math.random()||.1,m=f.length;for(o&&(T=t===L||t||o);c!==m&&null!=(r=f[c]);c++){if(b&&r){for(a=0,t||r.ownerDocument===L||($(r),n=!j);s=g[a++];)if(s(r,t||L,n)){i.push(r);break}o&&(H=h)}y&&((r=!s&&r)&&l--,e&&u.push(r))}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=K.call(i));d=x(d)}G.apply(i,d),o&&!e&&0<d.length&&1<l+v.length&&w.uniqueSort(i)}return o&&(H=h,T=p),u},y?l(i):i))).selector=e}return a},S=w.select=function(e,t,n,i){var o,r,a,s,l,c="function"==typeof e&&e,u=!i&&C(e=c.selector||e);if(n=n||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(a=r[0]).type&&9===t.nodeType&&j&&_.relative[r[1].type]){if(!(t=(_.find.ID(a.matches[0].replace(ve,ye),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=de.needsContext.test(e)?0:r.length;o--&&(a=r[o],!_.relative[s=a.type]);)if((l=_.find[s])&&(i=l(a.matches[0].replace(ve,ye),ge.test(r[0].type)&&f(t.parentNode)||t))){if(r.splice(o,1),!(e=i.length&&h(r)))return G.apply(n,i),n;break}}return(c||E(e,u))(i,t,!j,n,!t||ge.test(e)&&f(t.parentNode)||t),n},v.sortStable=z.split("").sort(W).join("")===z,v.detectDuplicates=!!A,$(),v.sortDetached=o(function(e){return 1&e.compareDocumentPosition(L.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||t("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),v.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||t("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||t(Y,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),w}(k);ae.find=de,ae.expr=de.selectors,ae.expr[":"]=ae.expr.pseudos,ae.uniqueSort=ae.unique=de.uniqueSort,ae.text=de.getText,ae.isXMLDoc=de.isXML,ae.contains=de.contains,ae.escapeSelector=de.escape;var pe=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ae(e).is(n))break;i.push(e)}return i},fe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},he=ae.expr.match.needsContext,me=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,ge=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ae.find.matchesSelector(i,e)?[i]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;t<i;t++)if(ae.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)ae.find(e,o[t],n);return 1<i?ae.uniqueSort(n):n},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&he.test(e)?ae(e):e||[],!1).length}});var ve,ye=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ae.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||ve,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ye.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),me.test(i[1])&&ae.isPlainObject(t))for(i in t)ae.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=Z.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ae.isFunction(e)?void 0!==n.ready?n.ready(e):e(ae):ae.makeArray(e,this)}).prototype=ae.fn,ve=ae(Z);var be=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};ae.fn.extend({has:function(e){var t=ae(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ae.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,o=this.length,r=[],a="string"!=typeof e&&ae(e);if(!he.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ae.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(1<r.length?ae.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?X.call(ae(e),this[0]):X.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.uniqueSort(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return pe(e,"parentNode")},parentsUntil:function(e,t,n){return pe(e,"parentNode",n)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return pe(e,"nextSibling")},prevAll:function(e){return pe(e,"previousSibling")},nextUntil:function(e,t,n){return pe(e,"nextSibling",n)},prevUntil:function(e,t,n){return pe(e,"previousSibling",n)},siblings:function(e){return fe((e.parentNode||{}).firstChild,e)},children:function(e){return fe(e.firstChild)},contents:function(e){return c(e,"iframe")?e.contentDocument:(c(e,"template")&&(e=e.content||e),ae.merge([],e.childNodes))}},function(i,o){ae.fn[i]=function(e,t){var n=ae.map(this,o,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ae.filter(t,n)),1<this.length&&(we[i]||ae.uniqueSort(n),be.test(i)&&n.reverse()),this.pushStack(n)}});var xe=/[^\x20\t\r\n\f]+/g;ae.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},ae.each(e.match(xe)||[],function(e,t){n[t]=!0}),n):ae.extend({},i);var o,t,r,a,s=[],l=[],c=-1,u=function(){for(a=a||i.once,r=o=!0;l.length;c=-1)for(t=l.shift();++c<s.length;)!1===s[c].apply(t[0],t[1])&&i.stopOnFalse&&(c=s.length,t=!1);i.memory||(t=!1),o=!1,a&&(s=t?[]:"")},d={add:function(){return s&&(t&&!o&&(c=s.length-1,l.push(t)),function n(e){ae.each(e,function(e,t){ae.isFunction(t)?i.unique&&d.has(t)||s.push(t):t&&t.length&&"string"!==ae.type(t)&&n(t)})}(arguments),t&&!o&&u()),this},remove:function(){return ae.each(arguments,function(e,t){for(var n;-1<(n=ae.inArray(t,s,n));)s.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<ae.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=l=[],t||o||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),o||u()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ae.extend({Deferred:function(e){var r=[["notify","progress",ae.Callbacks("memory"),ae.Callbacks("memory"),2],["resolve","done",ae.Callbacks("once memory"),ae.Callbacks("once memory"),0,"resolved"],["reject","fail",ae.Callbacks("once memory"),ae.Callbacks("once memory"),1,"rejected"]],o="pending",a={state:function(){return o},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var o=arguments;return ae.Deferred(function(i){ae.each(r,function(e,t){var n=ae.isFunction(o[t[4]])&&o[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this,n?[e]:arguments)})}),o=null}).promise()},then:function(t,n,i){function l(o,r,a,s){return function(){var n=this,i=arguments,e=function(){var e,t;if(!(o<c)){if((e=a.apply(n,i))===r.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,ae.isFunction(t)?s?t.call(e,l(c,r,u,s),l(c,r,d,s)):(c++,t.call(e,l(c,r,u,s),l(c,r,d,s),l(c,r,u,r.notifyWith))):(a!==u&&(n=void 0,i=[e]),(s||r.resolveWith)(n,i))}},t=s?e:function(){try{e()}catch(e){ae.Deferred.exceptionHook&&ae.Deferred.exceptionHook(e,t.stackTrace),c<=o+1&&(a!==d&&(n=void 0,i=[e]),r.rejectWith(n,i))}};o?t():(ae.Deferred.getStackHook&&(t.stackTrace=ae.Deferred.getStackHook()),k.setTimeout(t))}}var c=0;return ae.Deferred(function(e){r[0][3].add(l(0,e,ae.isFunction(i)?i:u,e.notifyWith)),r[1][3].add(l(0,e,ae.isFunction(t)?t:u)),r[2][3].add(l(0,e,ae.isFunction(n)?n:d))}).promise()},promise:function(e){return null!=e?ae.extend(e,a):a}},s={};return ae.each(r,function(e,t){var n=t[2],i=t[5];a[t[1]]=n.add,i&&n.add(function(){o=i},r[3-e][2].disable,r[0][2].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,i=Array(t),o=Q.call(arguments),r=ae.Deferred(),a=function(t){return function(e){i[t]=this,o[t]=1<arguments.length?Q.call(arguments):e,--n||r.resolveWith(i,o)}};if(n<=1&&(l(e,r.done(a(t)).resolve,r.reject,!n),"pending"===r.state()||ae.isFunction(o[t]&&o[t].then)))return r.then();for(;t--;)l(o[t],a(t),r.reject);return r.promise()}});var _e=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ae.Deferred.exceptionHook=function(e,t){k.console&&k.console.warn&&e&&_e.test(e.name)&&k.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ae.readyException=function(e){k.setTimeout(function(){throw e})};var ke=ae.Deferred();ae.fn.ready=function(e){return ke.then(e).catch(function(e){ae.readyException(e)}),this},ae.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ae.readyWait:ae.isReady)||((ae.isReady=!0)!==e&&0<--ae.readyWait||ke.resolveWith(Z,[ae]))}}),ae.ready.then=ke.then,"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?k.setTimeout(ae.ready):(Z.addEventListener("DOMContentLoaded",i),k.addEventListener("load",i));var Ce=function(e,t,n,i,o,r,a){var s=0,l=e.length,c=null==n;if("object"===ae.type(n))for(s in o=!0,n)Ce(e,t,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,ae.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(ae(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):r},Ee=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};o.uid=1,o.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ee(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[ae.camelCase(t)]=n;else for(i in t)o[ae.camelCase(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ae.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){Array.isArray(t)?t=t.map(ae.camelCase):t=(t=ae.camelCase(t))in i?[t]:t.match(xe)||[],n=t.length;for(;n--;)delete i[t[n]]}(void 0===t||ae.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ae.isEmptyObject(t)}};var Se=new o,Te=new o,Ie=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ae=/[A-Z]/g;ae.extend({hasData:function(e){return Te.hasData(e)||Se.hasData(e)},data:function(e,t,n){return Te.access(e,t,n)},removeData:function(e,t){Te.remove(e,t)},_data:function(e,t,n){return Se.access(e,t,n)},_removeData:function(e,t){Se.remove(e,t)}}),ae.fn.extend({data:function(n,e){var t,i,o,r=this[0],a=r&&r.attributes;if(void 0===n){if(this.length&&(o=Te.get(r),1===r.nodeType&&!Se.get(r,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(0===(i=a[t].name).indexOf("data-")&&(i=ae.camelCase(i.slice(5)),p(r,i,o[i])));Se.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof n?this.each(function(){Te.set(this,n)}):Ce(this,function(e){var t;if(r&&void 0===e){if(void 0!==(t=Te.get(r,n)))return t;if(void 0!==(t=p(r,n)))return t}else this.each(function(){Te.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Te.remove(this,e)})}}),ae.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Se.get(e,t),n&&(!i||Array.isArray(n)?i=Se.access(e,t,ae.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ae.queue(e,t),i=n.length,o=n.shift(),r=ae._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,function(){ae.dequeue(e,t)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Se.get(e,n)||Se.access(e,n,{empty:ae.Callbacks("once memory").add(function(){Se.remove(e,[t+"queue",n])})})}}),ae.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ae.queue(this[0],t):void 0===n?this:this.each(function(){var e=ae.queue(this,t,n);ae._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ae.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=ae.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Se.get(r[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var $e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Le=new RegExp("^(?:([+-])=|)("+$e+")([a-z%]*)$","i"),De=["Top","Right","Bottom","Left"],je=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae.contains(e.ownerDocument,e)&&"none"===ae.css(e,"display")},Oe=function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in o=n.apply(e,i||[]),t)e.style[r]=a[r];return o},Pe={};ae.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){je(this)?ae(this).show():ae(this).hide()})}});var Ne=/^(?:checkbox|radio)$/i,Me=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ze=/^$|\/(?:java|ecma)script/i,qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td;var He,Re,Ue=/<|&#?\w+;/;He=Z.createDocumentFragment().appendChild(Z.createElement("div")),(Re=Z.createElement("input")).setAttribute("type","radio"),Re.setAttribute("checked","checked"),Re.setAttribute("name","t"),He.appendChild(Re),oe.checkClone=He.cloneNode(!0).cloneNode(!0).lastChild.checked,He.innerHTML="<textarea>x</textarea>",oe.noCloneChecked=!!He.cloneNode(!0).lastChild.defaultValue;var Fe=Z.documentElement,Be=/^key/,We=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ve=/^([^.]*)(?:\.(.+)|)/;ae.event={global:{},add:function(t,e,n,i,o){var r,a,s,l,c,u,d,p,f,h,m,g=Se.get(t);if(g)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&ae.find.matchesSelector(Fe,o),n.guid||(n.guid=ae.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(e){return void 0!==ae&&ae.event.triggered!==e.type?ae.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(xe)||[""]).length;c--;)f=m=(s=Ve.exec(e[c])||[])[1],h=(s[2]||"").split(".").sort(),f&&(d=ae.event.special[f]||{},f=(o?d.delegateType:d.bindType)||f,d=ae.event.special[f]||{},u=ae.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&ae.expr.match.needsContext.test(o),namespace:h.join(".")},r),(p=l[f])||((p=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,h,a)||t.addEventListener&&t.addEventListener(f,a)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,u):p.push(u),ae.event.global[f]=!0)},remove:function(e,t,n,i,o){var r,a,s,l,c,u,d,p,f,h,m,g=Se.hasData(e)&&Se.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(xe)||[""]).length;c--;)if(f=m=(s=Ve.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),f){for(d=ae.event.special[f]||{},p=l[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=p.length;r--;)u=p[r],!o&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(r,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||ae.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)ae.event.remove(e,f+t[c],n,i,!0);ae.isEmptyObject(l)&&Se.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,a,s=ae.event.fix(e),l=new Array(arguments.length),c=(Se.get(this,"events")||{})[s.type]||[],u=ae.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=ae.event.handlers.call(this,s,c),t=0;(o=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(i=((ae.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,o,r,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],a={},n=0;n<l;n++)void 0===a[o=(i=t[n]).selector+" "]&&(a[o]=i.needsContext?-1<ae(o,this).index(c):ae.find(o,this,null,[c]).length),a[o]&&r.push(i);r.length&&s.push({elem:c,handlers:r})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(ae.Event.prototype,t,{enumerable:!0,configurable:!0,get:ae.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ae.expando]?e:new ae.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==a()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===a()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(e){return c(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ae.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ae.Event=function(e,t){return this instanceof ae.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?r:h,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),void(this[ae.expando]=!0)):new ae.Event(e,t)},ae.Event.prototype={constructor:ae.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=r,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=r,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=r,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ae.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&We.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ae.event.addProp),ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){ae.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||ae.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=o),t}}}),ae.fn.extend({on:function(e,t,n,i){return w(this,e,t,n,i)},one:function(e,t,n,i){return w(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ae(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=h),this.each(function(){ae.event.remove(this,e,n,t)})}});var Ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ke=/<script|<style|<link/i,Qe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^true\/(.*)/,Je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ae.extend({htmlPrefilter:function(e){return e.replace(Ze,"<$1></$2>")},clone:function(e,t,n){var i,o,r,a,s,l,c,u=e.cloneNode(!0),d=ae.contains(e.ownerDocument,e);if(!(oe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(a=g(u),i=0,o=(r=g(e)).length;i<o;i++)s=r[i],l=a[i],void 0,"input"===(c=l.nodeName.toLowerCase())&&Ne.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(r=r||g(e),a=a||g(u),i=0,o=r.length;i<o;i++)E(r[i],a[i]);else E(e,u);return 0<(a=g(u,"script")).length&&y(a,!d&&g(e,"script")),u},cleanData:function(e){for(var t,n,i,o=ae.event.special,r=0;void 0!==(n=e[r]);r++)if(Ee(n)){if(t=n[Se.expando]){if(t.events)for(i in t.events)o[i]?ae.event.remove(n,i):ae.removeEvent(n,i,t.handle);n[Se.expando]=void 0}n[Te.expando]&&(n[Te.expando]=void 0)}}}),ae.fn.extend({detach:function(e){return T(this,e,!0)},remove:function(e){return T(this,e)},text:function(e){return Ce(this,function(e){return void 0===e?ae.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return S(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||x(this,e).appendChild(e)})},prepend:function(){return S(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ae.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return Ce(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ke.test(e)&&!qe[(Me.exec(e)||["",""])[1].toLowerCase()]){e=ae.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(ae.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return S(this,arguments,function(e){var t=this.parentNode;ae.inArray(this,n)<0&&(ae.cleanData(g(this)),t&&t.replaceChild(e,this))},n)}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ae.fn[e]=function(e){for(var t,n=[],i=ae(e),o=i.length-1,r=0;r<=o;r++)t=r===o?this:this.clone(!0),ae(i[r])[a](t),J.apply(n,t.get());return this.pushStack(n)}});var Xe=/^margin/,Ye=new RegExp("^("+$e+")(?!px)[a-z%]+$","i"),et=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=k),t.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Fe.appendChild(r);var e=k.getComputedStyle(a);t="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",i="4px"===e.marginRight,Fe.removeChild(r),a=null}}var t,n,i,o,r=Z.createElement("div"),a=Z.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",oe.clearCloneStyle="content-box"===a.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(a),ae.extend(oe,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),i},reliableMarginLeft:function(){return e(),o}}))}();var tt=/^(none|table(?!-c[ea]).+)/,nt=/^--/,it={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"},rt=["Webkit","Moz","ms"],at=Z.createElement("div").style;ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=I(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=ae.camelCase(t),l=nt.test(t),c=e.style;return l||(t=$(s)),a=ae.cssHooks[t]||ae.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:c[t]:("string"===(r=typeof n)&&(o=Le.exec(n))&&o[1]&&(n=f(e,t,o),r="number"),void(null!=n&&n==n&&("number"===r&&(n+=o&&o[3]||(ae.cssNumber[s]?"":"px")),oe.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))))}},css:function(e,t,n,i){var o,r,a,s=ae.camelCase(t);return nt.test(t)||(t=$(s)),(a=ae.cssHooks[t]||ae.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=I(e,t,i)),"normal"===o&&t in ot&&(o=ot[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),ae.each(["height","width"],function(e,a){ae.cssHooks[a]={get:function(e,t,n){if(t)return!tt.test(ae.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?j(e,a,n):Oe(e,it,function(){return j(e,a,n)})},set:function(e,t,n){var i,o=n&&et(e),r=n&&D(e,a,n,"border-box"===ae.css(e,"boxSizing",!1,o),o);return r&&(i=Le.exec(t))&&"px"!==(i[3]||"px")&&(e.style[a]=t,t=ae.css(e,a)),L(0,t,r)}}}),ae.cssHooks.marginLeft=A(oe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(I(e,"marginLeft"))||e.getBoundingClientRect().left-Oe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ae.each({margin:"",padding:"",border:"Width"},function(o,r){ae.cssHooks[o+r]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[o+De[t]+r]=i[t]||i[t-2]||i[0];return n}},Xe.test(o)||(ae.cssHooks[o+r].set=L)}),ae.fn.extend({css:function(e,t){return Ce(this,function(e,t,n){var i,o,r={},a=0;if(Array.isArray(t)){for(i=et(e),o=t.length;a<o;a++)r[t[a]]=ae.css(e,t[a],!1,i);return r}return void 0!==n?ae.style(e,t,n):ae.css(e,t)},e,t,1<arguments.length)}}),(ae.Tween=O).prototype={constructor:O,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||ae.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(ae.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.options.duration?this.pos=t=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ae.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ae.cssProps[e.prop]]&&!ae.cssHooks[e.prop]?e.elem[e.prop]=e.now:ae.style(e.elem,e.prop,e.now+e.unit)}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ae.fx=O.prototype.init,ae.fx.step={};var st,lt,ct,ut,dt=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;ae.Animation=ae.extend(q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return f(n.elem,e,Le.exec(t),n),n}]},tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.match(xe);for(var n,i=0,o=e.length;i<o;i++)n=e[i],q.tweeners[n]=q.tweeners[n]||[],q.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,r,a,s,l,c,u,d="width"in t||"height"in t,p=this,f={},h=e.style,m=e.nodeType&&je(e),g=Se.get(e,"fxshow");for(i in n.queue||(null==(a=ae._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ae.queue(e,"fx").length||a.empty.fire()})})),t)if(o=t[i],dt.test(o)){if(delete t[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||ae.style(e,i)}if((l=!ae.isEmptyObject(t))||!ae.isEmptyObject(f))for(i in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=g&&g.display)&&(c=Se.get(e,"display")),"none"===(u=ae.css(e,"display"))&&(c?u=c:(v([e],!0),c=e.style.display||c,u=ae.css(e,"display"),v([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===ae.css(e,"float")&&(l||(p.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=Se.access(e,"fxshow",{display:c}),r&&(g.hidden=!m),m&&v([e],!0),p.done(function(){for(i in m||v([e]),Se.remove(e,"fxshow"),f)ae.style(e,i,f[i])})),l=z(m?g[i]:0,i,p),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),ae.speed=function(e,t,n){var i=e&&"object"==typeof e?ae.extend({},e):{complete:n||!n&&t||ae.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ae.isFunction(t)&&t};return ae.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in ae.fx.speeds?i.duration=ae.fx.speeds[i.duration]:i.duration=ae.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){ae.isFunction(i.old)&&i.old.call(this),i.queue&&ae.dequeue(this,i.queue)},i},ae.fn.extend({fadeTo:function(e,t,n,i){return this.filter(je).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var o=ae.isEmptyObject(t),r=ae.speed(e,n,i),a=function(){var e=q(this,ae.extend({},t),r);(o||Se.get(this,"finish"))&&e.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(o,e,r){var a=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof o&&(r=e,e=o,o=void 0),e&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var e=!0,t=null!=o&&o+"queueHooks",n=ae.timers,i=Se.get(this);if(t)i[t]&&i[t].stop&&a(i[t]);else for(t in i)i[t]&&i[t].stop&&pt.test(t)&&a(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=o&&n[t].queue!==o||(n[t].anim.stop(r),e=!1,n.splice(t,1));!e&&r||ae.dequeue(this,o)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Se.get(this),n=t[a+"queue"],i=t[a+"queueHooks"],o=ae.timers,r=n?n.length:0;for(t.finish=!0,ae.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===a&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ae.each(["toggle","show","hide"],function(e,i){var o=ae.fn[i];ae.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(M(i,!0),e,t,n)}}),ae.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){ae.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),ae.timers=[],ae.fx.tick=function(){var e,t=0,n=ae.timers;for(st=ae.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ae.fx.stop(),st=void 0},ae.fx.timer=function(e){ae.timers.push(e),ae.fx.start()},ae.fx.interval=13,ae.fx.start=function(){lt||(lt=!0,P())},ae.fx.stop=function(){lt=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(i,e){return i=ae.fx&&ae.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=k.setTimeout(e,i);t.stop=function(){k.clearTimeout(n)}})},ct=Z.createElement("input"),ut=Z.createElement("select").appendChild(Z.createElement("option")),ct.type="checkbox",oe.checkOn=""!==ct.value,oe.optSelected=ut.selected,(ct=Z.createElement("input")).value="t",ct.type="radio",oe.radioValue="t"===ct.value;var ft,ht=ae.expr.attrHandle;ae.fn.extend({attr:function(e,t){return Ce(this,ae.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?ae.prop(e,t,n):(1===r&&ae.isXMLDoc(e)||(o=ae.attrHooks[t.toLowerCase()]||(ae.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void ae.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=ae.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!oe.radioValue&&"radio"===t&&c(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(xe);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?ae.removeAttr(e,n):e.setAttribute(n,n),n}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ht[t]||ae.find.attr;ht[t]=function(e,t,n){var i,o,r=t.toLowerCase();return n||(o=ht[r],ht[r]=i,i=null!=a(e,t,n)?r:null,ht[r]=o),i}});var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return Ce(this,ae.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ae.propFix[e]||e]})}}),ae.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&ae.isXMLDoc(e)||(t=ae.propFix[t]||t,o=ae.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),oe.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this}),ae.fn.extend({addClass:function(t){var e,n,i,o,r,a,s,l=0;if(ae.isFunction(t))return this.each(function(e){ae(this).addClass(t.call(this,e,R(this)))});if("string"==typeof t&&t)for(e=t.match(xe)||[];n=this[l++];)if(o=R(n),i=1===n.nodeType&&" "+H(o)+" "){for(a=0;r=e[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(s=H(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,o,r,a,s,l=0;if(ae.isFunction(t))return this.each(function(e){ae(this).removeClass(t.call(this,e,R(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(xe)||[];n=this[l++];)if(o=R(n),i=1===n.nodeType&&" "+H(o)+" "){for(a=0;r=e[a++];)for(;-1<i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");o!==(s=H(i))&&n.setAttribute("class",s)}return this},toggleClass:function(o,t){var r=typeof o;return"boolean"==typeof t&&"string"===r?t?this.addClass(o):this.removeClass(o):ae.isFunction(o)?this.each(function(e){ae(this).toggleClass(o.call(this,e,R(this),t),t)}):this.each(function(){var e,t,n,i;if("string"===r)for(t=0,n=ae(this),i=o.match(xe)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==o&&"boolean"!==r||((e=R(this))&&Se.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===o?"":Se.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+H(R(n))+" ").indexOf(t))return!0;return!1}});var vt=/\r/g;ae.fn.extend({val:function(n){var i,e,o,t=this[0];return arguments.length?(o=ae.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=o?n.call(this,e,ae(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ae.map(t,function(e){return null==e?"":e+""})),(i=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=ae.valHooks[t.type]||ae.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(vt,""):null==e?"":e:void 0}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:H(ae.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?r+1:o.length;for(i=r<0?l:a?r:0;i<l;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(t=ae(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,r=ae.makeArray(t),a=o.length;a--;)((i=o[a]).selected=-1<ae.inArray(ae.valHooks.option.get(i),r))&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ae.inArray(ae(e).val(),t)}},oe.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var yt=/^(?:focusinfocus|focusoutblur)$/;ae.extend(ae.event,{trigger:function(e,t,n,i){var o,r,a,s,l,c,u,d=[n||Z],p=te.call(e,"type")?e.type:e,f=te.call(e,"namespace")?e.namespace.split("."):[];if(r=a=n=n||Z,3!==n.nodeType&&8!==n.nodeType&&!yt.test(p+ae.event.triggered)&&(-1<p.indexOf(".")&&(p=(f=p.split(".")).shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,(e=e[ae.expando]?e:new ae.Event(p,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ae.makeArray(t,[e]),u=ae.event.special[p]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!ae.isWindow(n)){for(s=u.delegateType||p,yt.test(s+p)||(r=r.parentNode);r;r=r.parentNode)d.push(r),a=r;a===(n.ownerDocument||Z)&&d.push(a.defaultView||a.parentWindow||k)}for(o=0;(r=d[o++])&&!e.isPropagationStopped();)e.type=1<o?s:u.bindType||p,(c=(Se.get(r,"events")||{})[e.type]&&Se.get(r,"handle"))&&c.apply(r,t),(c=l&&r[l])&&c.apply&&Ee(r)&&(e.result=c.apply(r,t),!1===e.result&&e.preventDefault());return e.type=p,i||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),t)||!Ee(n)||l&&ae.isFunction(n[p])&&!ae.isWindow(n)&&((a=n[l])&&(n[l]=null),n[ae.event.triggered=p](),ae.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(e,t,n){var i=ae.extend(new ae.Event,n,{type:e,isSimulated:!0});ae.event.trigger(i,null,t)}}),ae.fn.extend({trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ae.event.trigger(e,t,n,!0)}}),ae.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ae.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),oe.focusin="onfocusin"in k,oe.focusin||ae.each({focus:"focusin",blur:"focusout"},function(n,i){var o=function(e){ae.event.simulate(i,e.target,ae.event.fix(e))};ae.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=Se.access(e,i);t||e.addEventListener(n,o,!0),Se.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Se.access(e,i)-1;t?Se.access(e,i,t):(e.removeEventListener(n,o,!0),Se.remove(e,i))}}});var bt=k.location,wt=ae.now(),xt=/\?/;ae.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new k.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+e),t};var _t=/\[\]$/,kt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var n,i=[],o=function(e,t){var n=ae.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){o(this.name,this.value)});else for(n in e)U(n,e[n],t,o);return i.join("&")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Et.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=ae(this).val();return null==n?null:Array.isArray(n)?ae.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var St=/%20/g,Tt=/#.*$/,It=/([?&])_=[^&]*/,At=/^(.*?):[ \t]*([^\r\n]*)$/gm,$t=/^(?:GET|HEAD)$/,Lt=/^\/\//,Dt={},jt={},Ot="*/".concat("*"),Pt=Z.createElement("a");Pt.href=bt.href,ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ot,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,ae.ajaxSettings),t):W(ae.ajaxSettings,e)},ajaxPrefilter:F(Dt),ajaxTransport:F(jt),ajax:function(e,t){function n(e,t,n,i){var o,r,a,s,l,c=t;h||(h=!0,f&&k.clearTimeout(f),u=void 0,p=i||"",_.readyState=0<e?4:0,o=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var i,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),n[r]}(g,_,n)),s=function(e,t,n,i){var o,r,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if((s=o.split(" "))[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(g,s,_,o),o?(g.ifModified&&((l=_.getResponseHeader("Last-Modified"))&&(ae.lastModified[d]=l),(l=_.getResponseHeader("etag"))&&(ae.etag[d]=l)),204===e||"HEAD"===g.type?c="nocontent":304===e?c="notmodified":(c=s.state,r=s.data,o=!(a=s.error))):(a=c,!e&&c||(c="error",e<0&&(e=0))),_.status=e,_.statusText=(t||c)+"",o?b.resolveWith(v,[r,c,_]):b.rejectWith(v,[_,c,a]),_.statusCode(x),x=void 0,m&&y.trigger(o?"ajaxSuccess":"ajaxError",[_,g,o?r:a]),w.fireWith(v,[_,c]),m&&(y.trigger("ajaxComplete",[_,g]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,d,p,i,f,o,h,m,r,a,g=ae.ajaxSetup({},t),v=g.context||g,y=g.context&&(v.nodeType||v.jquery)?ae(v):ae.event,b=ae.Deferred(),w=ae.Callbacks("once memory"),x=g.statusCode||{},s={},l={},c="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(h){if(!i)for(i={};t=At.exec(p);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=l[e.toLowerCase()]=l[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==h&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)_.always(e[_.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||c;return u&&u.abort(t),n(0,t),this}};if(b.promise(_),g.url=((e||g.url||bt.href)+"").replace(Lt,bt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(xe)||[""],null==g.crossDomain){o=Z.createElement("a");try{o.href=g.url,o.href=o.href,g.crossDomain=Pt.protocol+"//"+Pt.host!=o.protocol+"//"+o.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=ae.param(g.data,g.traditional)),B(Dt,g,t,_),h)return _;for(r in(m=ae.event&&g.global)&&0==ae.active++&&ae.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!$t.test(g.type),d=g.url.replace(Tt,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(St,"+")):(a=g.url.slice(d.length),g.data&&(d+=(xt.test(d)?"&":"?")+g.data,delete g.data),!1===g.cache&&(d=d.replace(It,"$1"),a=(xt.test(d)?"&":"?")+"_="+wt+++a),g.url=d+a),g.ifModified&&(ae.lastModified[d]&&_.setRequestHeader("If-Modified-Since",ae.lastModified[d]),ae.etag[d]&&_.setRequestHeader("If-None-Match",ae.etag[d])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&_.setRequestHeader("Content-Type",g.contentType),_.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ot+"; q=0.01":""):g.accepts["*"]),g.headers)_.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(v,_,g)||h))return _.abort();if(c="abort",w.add(g.complete),_.done(g.success),_.fail(g.error),u=B(jt,g,t,_)){if(_.readyState=1,m&&y.trigger("ajaxSend",[_,g]),h)return _;g.async&&0<g.timeout&&(f=k.setTimeout(function(){_.abort("timeout")},g.timeout));try{h=!1,u.send(s,n)}catch(e){if(h)throw e;n(-1,e)}}else n(-1,"No Transport");return _},getJSON:function(e,t,n){return ae.get(e,t,n,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,o){ae[o]=function(e,t,n,i){return ae.isFunction(t)&&(i=i||n,n=t,t=void 0),ae.ajax(ae.extend({url:e,type:o,dataType:i,data:t,success:n},ae.isPlainObject(e)&&e))}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ae.fn.extend({wrapAll:function(e){var t;return this[0]&&(ae.isFunction(e)&&(e=e.call(this[0])),t=ae(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return ae.isFunction(n)?this.each(function(e){ae(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ae(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=ae.isFunction(t);return this.each(function(e){ae(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ae(this).replaceWith(this.childNodes)}),this}}),ae.expr.pseudos.hidden=function(e){return!ae.expr.pseudos.visible(e)},ae.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ae.ajaxSettings.xhr=function(){try{return new k.XMLHttpRequest}catch(e){}};var Nt={0:200,1223:204},Mt=ae.ajaxSettings.xhr();oe.cors=!!Mt&&"withCredentials"in Mt,oe.ajax=Mt=!!Mt,ae.ajaxTransport(function(o){var r,a;if(oe.cors||Mt&&!o.crossDomain)return{send:function(e,t){var n,i=o.xhr();if(i.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)i[n]=o.xhrFields[n];for(n in o.mimeType&&i.overrideMimeType&&i.overrideMimeType(o.mimeType),o.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);r=function(e){return function(){r&&(r=a=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Nt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=r(),a=i.onerror=r("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&k.setTimeout(function(){r&&a()})},r=r("abort");try{i.send(o.hasContent&&o.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}}),ae.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ae.ajaxTransport("script",function(n){var i,o;if(n.crossDomain)return{send:function(e,t){i=ae("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",o=function(e){i.remove(),o=null,e&&t("error"===e.type?404:200,e.type)}),Z.head.appendChild(i[0])},abort:function(){o&&o()}}});var zt,qt=[],Ht=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||ae.expando+"_"+wt++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,r,a=!1!==e.jsonp&&(Ht.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ht.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=ae.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ht,"$1"+i):!1!==e.jsonp&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return r||ae.error(i+" was not called"),r[0]},e.dataTypes[0]="json",o=k[i],k[i]=function(){r=arguments},n.always(function(){void 0===o?ae(k).removeProp(i):k[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,qt.push(i)),r&&ae.isFunction(o)&&o(r[0]),r=o=void 0}),"script"}),oe.createHTMLDocument=((zt=Z.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===zt.childNodes.length),ae.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(oe.createHTMLDocument?((i=(t=Z.implementation.createHTMLDocument("")).createElement("base")).href=Z.location.href,t.head.appendChild(i)):t=Z),r=!n&&[],(o=me.exec(e))?[t.createElement(o[1])]:(o=b([e],t,r),r&&r.length&&ae(r).remove(),ae.merge([],o.childNodes)));var i,o,r},ae.fn.load=function(e,t,n){var i,o,r,a=this,s=e.indexOf(" ");return-1<s&&(i=H(e.slice(s)),e=e.slice(0,s)),ae.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),0<a.length&&ae.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?ae("<div>").append(ae.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae.expr.pseudos.animated=function(t){return ae.grep(ae.timers,function(e){return t===e.elem}).length},ae.offset={setOffset:function(e,t,n){var i,o,r,a,s,l,c=ae.css(e,"position"),u=ae(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),r=ae.css(e,"top"),l=ae.css(e,"left"),("absolute"===c||"fixed"===c)&&-1<(r+l).indexOf("auto")?(a=(i=u.position()).top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),ae.isFunction(t)&&(t=t.call(e,n,ae.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):u.css(d)}},ae.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ae.offset.setOffset(this,t,e)});var e,n,i,o,r=this[0];return r?r.getClientRects().length?(i=r.getBoundingClientRect(),n=(e=r.ownerDocument).documentElement,o=e.defaultView,{top:i.top+o.pageYOffset-n.clientTop,left:i.left+o.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ae.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),c(e[0],"html")||(i=e.offset()),i={top:i.top+ae.css(e[0],"borderTopWidth",!0),left:i.left+ae.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-ae.css(n,"marginTop",!0),left:t.left-i.left-ae.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||Fe})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,o){var r="pageYOffset"===o;ae.fn[t]=function(e){return Ce(this,function(e,t,n){var i;return ae.isWindow(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===n?i?i[o]:e[t]:void(i?i.scrollTo(r?i.pageXOffset:n,r?n:i.pageYOffset):e[t]=n)},t,e,arguments.length)}}),ae.each(["top","left"],function(e,n){ae.cssHooks[n]=A(oe.pixelPosition,function(e,t){if(t)return t=I(e,n),Ye.test(t)?ae(e).position()[n]+"px":t})}),ae.each({Height:"height",Width:"width"},function(a,s){ae.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,r){ae.fn[r]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),o=i||(!0===e||!0===t?"margin":"border");return Ce(this,function(e,t,n){var i;return ae.isWindow(e)?0===r.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+a],i["scroll"+a],e.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?ae.css(e,t,o):ae.style(e,t,n,o)},s,n?e:void 0,n)}})}),ae.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ae.holdReady=function(e){e?ae.readyWait++:ae.ready(!0)},ae.isArray=Array.isArray,ae.parseJSON=JSON.parse,ae.nodeName=c,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var Rt=k.jQuery,Ut=k.$;return ae.noConflict=function(e){return k.$===ae&&(k.$=Ut),e&&k.jQuery===ae&&(k.jQuery=Rt),ae},e||(k.jQuery=k.$=ae),ae}),function(e,t){"use strict";e.fn.fixer=function(s){s=e.extend({},e.fn.fixer.options,s);var l=0;return l=0<s.top?s.top:s.gap,this.each(function(){var o=e(this),r=o.parent(),a=e(t);o.attr("class");a.bind("scroll load",function(){s.horizontal;var e=r.offset()[s.horizontal?"left":"top"],t=o[s.horizontal?"outerWidth":"outerHeight"](),n=r[s.horizontal?"outerWidth":"outerHeight"](),i=a[s.horizontal?"scrollLeft":"scrollTop"]();i>=e-s.gap&&n+e-s.gap>=i+t?(o.css({position:"fixed"}).css(s.horizontal?{left:s.gap}:{top:s.gap}),s.isFixed()):i<e?o.css({position:"absolute"}).css(s.horizontal?{left:0}:{top:l}):o.css({position:"absolute"}).css(s.horizontal?{left:n-t}:{top:n-t})})})},e.fn.fixer.options={gap:0,horizontal:!1,isFixed:e.noop}}(jQuery,window),function(O,f){"use strict";function a(b,w,x,e,t){function n(){var o,r,a,s;y=1<O.devicePixelRatio,x=i(x),0<=w.delay&&setTimeout(function(){l(!0)},w.delay),(w.delay<0||w.combined)&&(e.e=(o=w.throttle,r=function(e){"resize"===e.type&&(C=E=-1),l(e.all)},s=0,function(e,t){function n(){s=+new Date,r.call(b,e)}var i=+new Date-s;a&&clearTimeout(a),o<i||!w.enableThrottle||t?n():a=setTimeout(n,o-i)}),e.a=function(e){e=i(e),x.push.apply(x,e)},e.g=function(){return x=P(x).filter(function(){return!P(this).data(w.loadedName)})},e.f=function(e){for(var t=0;t<e.length;t++){var n=x.filter(function(){return this===e[t]});n.length&&l(!1,n)}},l(),P(w.appendScroll).on("scroll."+t+" resize."+t,e.e))}function i(e){for(var t=w.defaultImage,n=w.placeholder,i=w.imageBase,o=w.srcsetAttribute,r=w.loaderAttribute,a=w._f||{},s=0,l=(e=P(e).filter(function(){var e=P(this),t=k(this);return!e.data(w.handledName)&&(e.attr(w.attribute)||e.attr(o)||e.attr(r)||a[t]!==f)}).data("plugin_"+w.name,b)).length;s<l;s++){var c=P(e[s]),u=k(e[s]),d=c.attr(w.imageBaseAttribute)||i;u===A&&d&&c.attr(o)&&c.attr(o,p(c.attr(o),d)),a[u]===f||c.attr(r)||c.attr(r,a[u]),u===A&&t&&!c.attr($)?c.attr($,t):u===A||!n||c.css(j)&&"none"!==c.css(j)||c.css(j,"url('"+n+"')")}return e}function l(e,t){if(x.length){for(var n=t||x,i=!1,o=w.imageBase||"",r=w.srcsetAttribute,a=w.handledName,s=0;s<n.length;s++)if(e||t||(f=n[s],void 0,h=f.getBoundingClientRect(),m=w.scrollDirection,g=w.threshold,v=(0<=E?E:E=P(O).height())+g>h.top&&-g<h.bottom,y=(0<=C?C:C=P(O).width())+g>h.left&&-g<h.right,"vertical"===m?v:"horizontal"===m?y:v&&y)){var l=P(n[s]),c=k(n[s]),u=l.attr(w.attribute),d=l.attr(w.imageBaseAttribute)||o,p=l.attr(w.loaderAttribute);l.data(a)||w.visibleOnly&&!l.is(":visible")||!((u||l.attr(r))&&(c===A&&(d+u!==l.attr($)||l.attr(r)!==l.attr(L))||c!==A&&d+u!==l.css(j))||p)||(i=!0,l.data(a,!0),_(l,c,d,p))}var f,h,m,g,v,y;i&&(x=P(x).filter(function(){return!P(this).data(a)}))}else w.autoDestroy&&b.destroy()}function _(t,e,n,i){++v;var o=function(){g("onError",t),m(),o=P.noop};g("beforeLoad",t);var r=w.attribute,a=w.srcsetAttribute,s=w.sizesAttribute,l=w.retinaAttribute,c=w.removeAttribute,u=w.loadedName,d=t.attr(l);if(i){var p=function(){c&&t.removeAttr(w.loaderAttribute),t.data(u,!0),g(S,t),setTimeout(m,1),p=P.noop};t.off(I).one(I,o).one(T,p),g(i,t,function(e){e?(t.off(T),p()):(t.off(I),o())})||t.trigger(I)}else{var f=P(new Image);f.one(I,o).one(T,function(){t.hide(),e===A?t.attr(D,f.attr(D)).attr(L,f.attr(L)).attr($,f.attr($)):t.css(j,"url('"+f.attr($)+"')"),t[w.effect](w.effectTime),c&&(t.removeAttr(r+" "+a+" "+l+" "+w.imageBaseAttribute),s!==D&&t.removeAttr(s)),t.data(u,!0),g(S,t),f.remove(),m()});var h=(y&&d?d:t.attr(r))||"";f.attr(D,t.attr(s)).attr(L,t.attr(a)).attr($,h?n+h:null),f.complete&&f.trigger(T)}}function k(e){return e.tagName.toLowerCase()}function p(e,t){if(t){var n=e.split(",");e="";for(var i=0,o=n.length;i<o;i++)e+=t+n[i].trim()+(i!==o-1?",":"")}return e}function m(){--v,x.length||v||g("onFinishedAll")}function g(e,t,n){return!!(e=w[e])&&(e.apply(b,[].slice.call(arguments,1)),!0)}var v=0,C=-1,E=-1,y=!1,S="afterLoad",T="load",I="error",A="img",$="src",L="srcset",D="sizes",j="background-image";"event"===w.bind||o?n():P(O).on(T+"."+t,n)}function c(e,t){var n=this,i=P.extend({},n.config,t),o={},r=i.name+"-"+ ++s;return n.config=function(e,t){return t===f?i[e]:(i[e]=t,n)},n.addItems=function(e){return o.a&&o.a("string"===P.type(e)?P(e):e),n},n.getItems=function(){return o.g?o.g():{}},n.update=function(e){return o.e&&o.e({},!e),n},n.force=function(e){return o.f&&o.f("string"===P.type(e)?P(e):e),n},n.loadAll=function(){return o.e&&o.e({all:!0},!0),n},n.destroy=function(){return P(i.appendScroll).off("."+r,o.e),P(O).off("."+r),o={},f},a(n,i,e,o,r),i.chainable?e:n}var P=O.jQuery||O.Zepto,s=0,o=!1;P.fn.Lazy=P.fn.lazy=function(e){return new c(this,e)},P.Lazy=P.lazy=function(e,t,n){if(P.isFunction(t)&&(n=t,t=[]),P.isFunction(n)){e=P.isArray(e)?e:[e],t=P.isArray(t)?t:[t];for(var i=c.prototype.config,o=i._f||(i._f={}),r=0,a=e.length;r<a;r++)(i[e[r]]===f||P.isFunction(i[e[r]]))&&(i[e[r]]=n);for(var s=0,l=t.length;s<l;s++)o[t[s]]=e[0]}},c.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:O,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:f,afterLoad:f,onError:f,onFinishedAll:f},P(O).on("load",function(){o=!0})}(window),function(o){function n(t,n,i,e){o.ajax({url:n.attr("data-src"),type:e||"get",dataType:n.attr("data-type")||"html",success:function(e){n.html(e),i(!0),t.config("removeAttribute")&&n.removeAttr("data-src data-method data-type")},error:function(){i(!1)}})}o.lazy("ajax",function(e,t){n(this,e,t,e.attr("data-method"))}),o.lazy("get",function(e,t){n(this,e,t,"get")}),o.lazy("post",function(e,t){n(this,e,t,"post")})}(window.jQuery||window.Zepto),function(l){l.lazy(["av","audio","video"],["audio","video"],function(i,e){var t=i[0].tagName.toLowerCase();if("audio"===t||"video"===t){var n=i.find("data-src"),o=i.find("data-track"),r=0,a=function(){++r===n.length&&e(!1)},s=function(){var e=l(this),t=e[0].tagName.toLowerCase(),n=e.prop("attributes"),i=l("data-src"===t?"<source>":"<track>");"data-src"===t&&i.one("error",a),l.each(n,function(e,t){i.attr(t.name,t.value)}),e.replaceWith(i)};i.one("loadedmetadata",function(){e(!0)}).off("load error").attr("poster",i.attr("data-poster")),n.length?n.each(s):i.attr("data-src")?(l.each(i.attr("data-src").split(","),function(e,t){var n=t.split("|");i.append(l("<source>").one("error",a).attr({src:n[0].trim(),type:n[1].trim()}))}),this.config("removeAttribute")&&i.removeAttr("data-src")):e(!1),o.length&&o.each(s)}else e(!1)})}(window.jQuery||window.Zepto),function(o){o.lazy(["frame","iframe"],"iframe",function(t,e){var n=this;if("iframe"===t[0].tagName.toLowerCase()){var i=t.attr("data-error-detect");"true"!==i&&"1"!==i?(t.attr("src",t.attr("data-src")),n.config("removeAttribute")&&t.removeAttr("data-src data-error-detect")):o.ajax({url:t.attr("data-src"),dataType:"html",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(e){t.html(e).attr("src",t.attr("data-src")),n.config("removeAttribute")&&t.removeAttr("data-src data-error-detect")},error:function(){e(!1)}})}else e(!1)})}(window.jQuery||window.Zepto),function(e){e.lazy("noop",function(){}),e.lazy("noop-success",function(e,t){t(!0)}),e.lazy("noop-error",function(e,t){t(!1)})}(window.jQuery||window.Zepto),function(r){function a(e,t,n){var i=e.prop("attributes"),o=r("<"+t+">");return r.each(i,function(e,t){"srcset"!==t.name&&t.name!==c||(t.value=l(t.value,n)),o.attr(t.name,t.value)}),e.replaceWith(o),o}function s(e,t,n){var i=r("<img>").one("load",function(){n(!0)}).one("error",function(){n(!1)}).appendTo(e).attr("src",t);i.complete&&i.load()}function l(e,t){if(t){var n=e.split(",");e="";for(var i=0,o=n.length;i<o;i++)e+=t+n[i].trim()+(i!==o-1?",":"")}return e}var c="data-src";r.lazy(["pic","picture"],["picture"],function(e,t){if("picture"===e[0].tagName.toLowerCase()){var n=e.find(c),i=e.find("data-img"),o=this.config("imageBase");n.length?(n.each(function(){a(r(this),"source",o)}),1===i.length?((i=a(i,"img",o)).on("load",function(){t(!0)}).on("error",function(){t(!1)}),i.attr("src",i.attr(c)),this.config("removeAttribute")&&i.removeAttr(c)):e.attr(c)?(s(e,o+e.attr(c),t),this.config("removeAttribute")&&e.removeAttr(c)):t(!1)):e.attr("data-srcset")?(r("<source>").attr({media:e.attr("data-media"),sizes:e.attr("data-sizes"),type:e.attr("data-type"),srcset:l(e.attr("data-srcset"),o)}).appendTo(e),s(e,o+e.attr(c),t),this.config("removeAttribute")&&e.removeAttr(c+" data-srcset data-media data-sizes data-type")):t(!1)}else t(!1)})}(window.jQuery||window.Zepto),(window.jQuery||window.Zepto).lazy(["js","javascript","script"],"script",function(e,t){"script"==e[0].tagName.toLowerCase()?(e.attr("src",e.attr("data-src")),this.config("removeAttribute")&&e.removeAttr("data-src")):t(!1)}),(window.jQuery||window.Zepto).lazy("vimeo",function(e,t){"iframe"===e[0].tagName.toLowerCase()?(e.attr("src","https://player.vimeo.com/video/"+e.attr("data-src")),this.config("removeAttribute")&&e.removeAttr("data-src")):t(!1)}),(window.jQuery||window.Zepto).lazy(["yt","youtube"],function(e,t){"iframe"===e[0].tagName.toLowerCase()?(e.attr("src","https://www.youtube.com/embed/"+e.attr("data-src")+"?rel=0&amp;showinfo=0"),this.config("removeAttribute")&&e.removeAttr("data-src")):t(!1)}),function(F){var B={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};F.fn.bxSlider=function(t){if(0===this.length)return this;if(1<this.length)return this.each(function(){F(this).bxSlider(t)}),this;var d={},p=this,o=F(window).width(),r=F(window).height();if(!F(p).data("bxSlider")){var n=function(){F(p).data("bxSlider")||(d.settings=F.extend({},B,t),d.settings.slideWidth=parseInt(d.settings.slideWidth),d.children=p.children(d.settings.slideSelector),d.children.length<d.settings.minSlides&&(d.settings.minSlides=d.children.length),d.children.length<d.settings.maxSlides&&(d.settings.maxSlides=d.children.length),d.settings.randomStart&&(d.settings.startSlide=Math.floor(Math.random()*d.children.length)),d.active={index:d.settings.startSlide},d.carousel=1<d.settings.minSlides||1<d.settings.maxSlides,d.carousel&&(d.settings.preloadImages="all"),d.minThreshold=d.settings.minSlides*d.settings.slideWidth+(d.settings.minSlides-1)*d.settings.slideMargin,d.maxThreshold=d.settings.maxSlides*d.settings.slideWidth+(d.settings.maxSlides-1)*d.settings.slideMargin,d.working=!1,d.controls={},d.interval=null,d.animProp="vertical"===d.settings.mode?"top":"left",d.usingCSS=d.settings.useCSS&&"fade"!==d.settings.mode&&function(){for(var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],n=0;n<t.length;n++)if(void 0!==e.style[t[n]])return d.cssPrefix=t[n].replace("Perspective","").toLowerCase(),d.animProp="-"+d.cssPrefix+"-transform",!0;return!1}(),"vertical"===d.settings.mode&&(d.settings.maxSlides=d.settings.minSlides),p.data("origStyle",p.attr("style")),p.children(d.settings.slideSelector).each(function(){F(this).data("origStyle",F(this).attr("style"))}),e())},e=function(){var e=d.children.eq(d.settings.startSlide);p.wrap('<div class="'+d.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),d.viewport=p.parent(),d.settings.ariaLive&&!d.settings.ticker&&d.viewport.attr("aria-live","polite"),d.loader=F('<div class="bx-loading" />'),d.viewport.prepend(d.loader),p.css({width:"horizontal"===d.settings.mode?1e3*d.children.length+215+"%":"auto",position:"relative"}),d.usingCSS&&d.settings.easing?p.css("-"+d.cssPrefix+"-transition-timing-function",d.settings.easing):d.settings.easing||(d.settings.easing="swing"),d.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),d.viewport.parent().css({maxWidth:l()}),d.children.css({float:"horizontal"===d.settings.mode?"left":"none",listStyle:"none",position:"relative"}),d.children.css("width",c()),"horizontal"===d.settings.mode&&0<d.settings.slideMargin&&d.children.css("marginRight",d.settings.slideMargin),"vertical"===d.settings.mode&&0<d.settings.slideMargin&&d.children.css("marginBottom",d.settings.slideMargin),"fade"===d.settings.mode&&(d.children.css({position:"absolute",zIndex:0,display:"none"}),d.children.eq(d.settings.startSlide).css({zIndex:d.settings.slideZIndex,display:"block"})),d.controls.el=F('<div class="bx-controls" />'),d.settings.captions&&_(),d.active.last=d.settings.startSlide===h()-1,d.settings.video&&p.fitVids(),("all"===d.settings.preloadImages||d.settings.ticker)&&(e=d.children),d.settings.ticker?d.settings.pager=!1:(d.settings.controls&&w(),d.settings.auto&&d.settings.autoControls&&x(),d.settings.pager&&b(),(d.settings.controls||d.settings.autoControls||d.settings.pager)&&d.viewport.after(d.controls.el)),a(e,s)},a=function(e,t){var n=e.find('img:not([src=""]), iframe').length,i=0;0!==n?e.find('img:not([src=""]), iframe').each(function(){F(this).one("load error",function(){++i===n&&t()}).each(function(){this.complete&&F(this).trigger("load")})}):t()},s=function(){if(d.settings.infiniteLoop&&"fade"!==d.settings.mode&&!d.settings.ticker){var e="vertical"===d.settings.mode?d.settings.minSlides:d.settings.maxSlides,t=d.children.slice(0,e).clone(!0).addClass("bx-clone"),n=d.children.slice(-e).clone(!0).addClass("bx-clone");d.settings.ariaHidden&&(t.attr("aria-hidden",!0),n.attr("aria-hidden",!0)),p.append(t).prepend(n)}d.loader.remove(),g(),"vertical"===d.settings.mode&&(d.settings.adaptiveHeight=!0),d.viewport.height(f()),p.redrawSlider(),d.settings.onSliderLoad.call(p,d.active.index),d.initialized=!0,d.settings.responsive&&F(window).bind("resize",R),d.settings.auto&&d.settings.autoStart&&(1<h()||d.settings.autoSlideForOnePage)&&D(),d.settings.ticker&&j(),d.settings.pager&&I(d.settings.startSlide),d.settings.controls&&L(),d.settings.touchEnabled&&!d.settings.ticker&&N(),d.settings.keyboardEnabled&&!d.settings.ticker&&F(document).keydown(P)},f=function(){var t=0,e=F();if("vertical"===d.settings.mode||d.settings.adaptiveHeight)if(d.carousel){var n=1===d.settings.moveSlides?d.active.index:d.active.index*m();for(e=d.children.eq(n),i=1;i<=d.settings.maxSlides-1;i++)e=n+i>=d.children.length?e.add(d.children.eq(i-1)):e.add(d.children.eq(n+i))}else e=d.children.eq(d.active.index);else e=d.children;return"vertical"===d.settings.mode?(e.each(function(e){t+=F(this).outerHeight()}),0<d.settings.slideMargin&&(t+=d.settings.slideMargin*(d.settings.minSlides-1))):t=Math.max.apply(Math,e.map(function(){return F(this).outerHeight(!1)}).get()),"border-box"===d.viewport.css("box-sizing")?t+=parseFloat(d.viewport.css("padding-top"))+parseFloat(d.viewport.css("padding-bottom"))+parseFloat(d.viewport.css("border-top-width"))+parseFloat(d.viewport.css("border-bottom-width")):"padding-box"===d.viewport.css("box-sizing")&&(t+=parseFloat(d.viewport.css("padding-top"))+parseFloat(d.viewport.css("padding-bottom"))),t},l=function(){var e="100%";return 0<d.settings.slideWidth&&(e="horizontal"===d.settings.mode?d.settings.maxSlides*d.settings.slideWidth+(d.settings.maxSlides-1)*d.settings.slideMargin:d.settings.slideWidth),e},c=function(){var e=d.settings.slideWidth,t=d.viewport.width();if(0===d.settings.slideWidth||d.settings.slideWidth>t&&!d.carousel||"vertical"===d.settings.mode)e=t;else if(1<d.settings.maxSlides&&"horizontal"===d.settings.mode){if(t>d.maxThreshold)return e;t<d.minThreshold?e=(t-d.settings.slideMargin*(d.settings.minSlides-1))/d.settings.minSlides:d.settings.shrinkItems&&(e=Math.floor((t+d.settings.slideMargin)/Math.ceil((t+d.settings.slideMargin)/(e+d.settings.slideMargin))-d.settings.slideMargin))}return e},u=function(){var e=1,t=null;return"horizontal"===d.settings.mode&&0<d.settings.slideWidth?d.viewport.width()<d.minThreshold?e=d.settings.minSlides:d.viewport.width()>d.maxThreshold?e=d.settings.maxSlides:(t=d.children.first().width()+d.settings.slideMargin,e=Math.floor((d.viewport.width()+d.settings.slideMargin)/t)):"vertical"===d.settings.mode&&(e=d.settings.minSlides),e},h=function(){var e=0,t=0,n=0;if(0<d.settings.moveSlides)if(d.settings.infiniteLoop)e=Math.ceil(d.children.length/m());else for(;t<d.children.length;)++e,t=n+u(),n+=d.settings.moveSlides<=u()?d.settings.moveSlides:u();else e=Math.ceil(d.children.length/u());return e},m=function(){return 0<d.settings.moveSlides&&d.settings.moveSlides<=u()?d.settings.moveSlides:u()},g=function(){var e,t,n;d.children.length>d.settings.maxSlides&&d.active.last&&!d.settings.infiniteLoop?"horizontal"===d.settings.mode?(e=(t=d.children.last()).position(),v(-(e.left-(d.viewport.width()-t.outerWidth())),"reset",0)):"vertical"===d.settings.mode&&(n=d.children.length-d.settings.minSlides,e=d.children.eq(n).position(),v(-e.top,"reset",0)):(e=d.children.eq(d.active.index*m()).position(),d.active.index===h()-1&&(d.active.last=!0),void 0!==e&&("horizontal"===d.settings.mode?v(-e.left,"reset",0):"vertical"===d.settings.mode&&v(-e.top,"reset",0)))},v=function(e,t,n,i){var o,r;d.usingCSS?(r="vertical"===d.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)",p.css("-"+d.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"===t?(p.css(d.animProp,r),0!==n?p.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){F(e.target).is(p)&&(p.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),A())}):A()):"reset"===t?p.css(d.animProp,r):"ticker"===t&&(p.css("-"+d.cssPrefix+"-transition-timing-function","linear"),p.css(d.animProp,r),0!==n?p.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){F(e.target).is(p)&&(p.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),v(i.resetValue,"reset",0),O())}):(v(i.resetValue,"reset",0),O()))):((o={})[d.animProp]=e,"slide"===t?p.animate(o,n,d.settings.easing,function(){A()}):"reset"===t?p.css(d.animProp,e):"ticker"===t&&p.animate(o,n,"linear",function(){v(i.resetValue,"reset",0),O()}))},y=function(){for(var e="",t="",n=h(),i=0;i<n;i++)t="",d.settings.buildPager&&F.isFunction(d.settings.buildPager)||d.settings.pagerCustom?(t=d.settings.buildPager(i),d.pagerEl.addClass("bx-custom-pager")):(t=i+1,d.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+t+"</a></div>";d.pagerEl.html(e)},b=function(){d.settings.pagerCustom?d.pagerEl=F(d.settings.pagerCustom):(d.pagerEl=F('<div class="bx-pager" />'),d.settings.pagerSelector?F(d.settings.pagerSelector).html(d.pagerEl):d.controls.el.addClass("bx-has-pager").append(d.pagerEl),y()),d.pagerEl.on("click touchend","a",T)},w=function(){d.controls.next=F('<a class="bx-next" href="">'+d.settings.nextText+"</a>"),d.controls.prev=F('<a class="bx-prev" href="">'+d.settings.prevText+"</a>"),d.controls.next.bind("click touchend",k),d.controls.prev.bind("click touchend",C),d.settings.nextSelector&&F(d.settings.nextSelector).append(d.controls.next),d.settings.prevSelector&&F(d.settings.prevSelector).append(d.controls.prev),d.settings.nextSelector||d.settings.prevSelector||(d.controls.directionEl=F('<div class="bx-controls-direction" />'),d.controls.directionEl.append(d.controls.prev).append(d.controls.next),d.controls.el.addClass("bx-has-controls-direction").append(d.controls.directionEl))},x=function(){d.controls.start=F('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+d.settings.startText+"</a></div>"),d.controls.stop=F('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+d.settings.stopText+"</a></div>"),d.controls.autoEl=F('<div class="bx-controls-auto" />'),d.controls.autoEl.on("click",".bx-start",E),d.controls.autoEl.on("click",".bx-stop",S),d.settings.autoControlsCombine?d.controls.autoEl.append(d.controls.start):d.controls.autoEl.append(d.controls.start).append(d.controls.stop),d.settings.autoControlsSelector?F(d.settings.autoControlsSelector).html(d.controls.autoEl):d.controls.el.addClass("bx-has-controls-auto").append(d.controls.autoEl),$(d.settings.autoStart?"stop":"start")},_=function(){d.children.each(function(e){var t=F(this).find("img:first").attr("title");void 0!==t&&(""+t).length&&F(this).append('<div class="bx-caption"><span>'+t+"</span></div>")})},k=function(e){e.preventDefault(),d.controls.el.hasClass("disabled")||(d.settings.auto&&d.settings.stopAutoOnClick&&p.stopAuto(),p.goToNextSlide())},C=function(e){e.preventDefault(),d.controls.el.hasClass("disabled")||(d.settings.auto&&d.settings.stopAutoOnClick&&p.stopAuto(),p.goToPrevSlide())},E=function(e){p.startAuto(),e.preventDefault()},S=function(e){p.stopAuto(),e.preventDefault()},T=function(e){var t,n;e.preventDefault(),d.controls.el.hasClass("disabled")||(d.settings.auto&&d.settings.stopAutoOnClick&&p.stopAuto(),void 0!==(t=F(e.currentTarget)).attr("data-slide-index")&&(n=parseInt(t.attr("data-slide-index")))!==d.active.index&&p.goToSlide(n))},I=function(n){var e=d.children.length;if("short"===d.settings.pagerType)return 1<d.settings.maxSlides&&(e=Math.ceil(d.children.length/d.settings.maxSlides)),void d.pagerEl.html(n+1+d.settings.pagerShortSeparator+e);d.pagerEl.find("a").removeClass("active"),d.pagerEl.each(function(e,t){F(t).find("a").eq(n).addClass("active")})},A=function(){if(d.settings.infiniteLoop){var e="";0===d.active.index?e=d.children.eq(0).position():d.active.index===h()-1&&d.carousel?e=d.children.eq((h()-1)*m()).position():d.active.index===d.children.length-1&&(e=d.children.eq(d.children.length-1).position()),e&&("horizontal"===d.settings.mode?v(-e.left,"reset",0):"vertical"===d.settings.mode&&v(-e.top,"reset",0))}d.working=!1,d.settings.onSlideAfter.call(p,d.children.eq(d.active.index),d.oldIndex,d.active.index)},$=function(e){d.settings.autoControlsCombine?d.controls.autoEl.html(d.controls[e]):(d.controls.autoEl.find("a").removeClass("active"),d.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},L=function(){1===h()?(d.controls.prev.addClass("disabled"),d.controls.next.addClass("disabled")):!d.settings.infiniteLoop&&d.settings.hideControlOnEnd&&(0===d.active.index?(d.controls.prev.addClass("disabled"),d.controls.next.removeClass("disabled")):d.active.index===h()-1?(d.controls.next.addClass("disabled"),d.controls.prev.removeClass("disabled")):(d.controls.prev.removeClass("disabled"),d.controls.next.removeClass("disabled")))},D=function(){if(0<d.settings.autoDelay)setTimeout(p.startAuto,d.settings.autoDelay);else p.startAuto(),F(window).focus(function(){p.startAuto()}).blur(function(){p.stopAuto()});d.settings.autoHover&&p.hover(function(){d.interval&&(p.stopAuto(!0),d.autoPaused=!0)},function(){d.autoPaused&&(p.startAuto(!0),d.autoPaused=null)})},j=function(){var e,t,n,i,o,r,a,s,l=0;"next"===d.settings.autoDirection?p.append(d.children.clone().addClass("bx-clone")):(p.prepend(d.children.clone().addClass("bx-clone")),e=d.children.first().position(),l="horizontal"===d.settings.mode?-e.left:-e.top),v(l,"reset",0),d.settings.pager=!1,d.settings.controls=!1,d.settings.autoControls=!1,d.settings.tickerHover&&(d.usingCSS?(i="horizontal"===d.settings.mode?4:5,d.viewport.hover(function(){t=p.css("-"+d.cssPrefix+"-transform"),n=parseFloat(t.split(",")[i]),v(n,"reset",0)},function(){s=0,d.children.each(function(e){s+="horizontal"===d.settings.mode?F(this).outerWidth(!0):F(this).outerHeight(!0)}),o=d.settings.speed/s,r="horizontal"===d.settings.mode?"left":"top",a=o*(s-Math.abs(parseInt(n))),O(a)})):d.viewport.hover(function(){p.stop()},function(){s=0,d.children.each(function(e){s+="horizontal"===d.settings.mode?F(this).outerWidth(!0):F(this).outerHeight(!0)}),o=d.settings.speed/s,r="horizontal"===d.settings.mode?"left":"top",a=o*(s-Math.abs(parseInt(p.css(r)))),O(a)})),O()},O=function(e){var t,n,i=e||d.settings.speed,o={left:0,top:0},r={left:0,top:0};"next"===d.settings.autoDirection?o=p.find(".bx-clone").first().position():r=d.children.first().position(),t="horizontal"===d.settings.mode?-o.left:-o.top,n="horizontal"===d.settings.mode?-r.left:-r.top,v(t,"ticker",i,{resetValue:n})},P=function(e){var t,n,i,o,r=document.activeElement.tagName.toLowerCase();if(null==new RegExp(r,["i"]).exec("input|textarea")&&(t=p,n=F(window),i={top:n.scrollTop(),left:n.scrollLeft()},o=t.offset(),i.right=i.left+n.width(),i.bottom=i.top+n.height(),o.right=o.left+t.outerWidth(),o.bottom=o.top+t.outerHeight(),!(i.right<o.left||i.left>o.right||i.bottom<o.top||i.top>o.bottom))){if(39===e.keyCode)return k(e),!1;if(37===e.keyCode)return C(e),!1}},N=function(){d.touch={start:{x:0,y:0},end:{x:0,y:0}},d.viewport.bind("touchstart MSPointerDown pointerdown",M),d.viewport.on("click",".bxslider a",function(e){d.viewport.hasClass("click-disabled")&&(e.preventDefault(),d.viewport.removeClass("click-disabled"))})},M=function(e){if(d.controls.el.addClass("disabled"),d.working)e.preventDefault(),d.controls.el.removeClass("disabled");else{d.touch.originalPos=p.position();var t=e.originalEvent,n=void 0!==t.changedTouches?t.changedTouches:[t];if("function"==typeof PointerEvent&&void 0===t.pointerId)return;d.touch.start.x=n[0].pageX,d.touch.start.y=n[0].pageY,d.viewport.get(0).setPointerCapture&&(d.pointerId=t.pointerId,d.viewport.get(0).setPointerCapture(d.pointerId)),d.viewport.bind("touchmove MSPointerMove pointermove",q),d.viewport.bind("touchend MSPointerUp pointerup",H),d.viewport.bind("MSPointerCancel pointercancel",z)}},z=function(e){v(d.touch.originalPos.left,"reset",0),d.controls.el.removeClass("disabled"),d.viewport.unbind("MSPointerCancel pointercancel",z),d.viewport.unbind("touchmove MSPointerMove pointermove",q),d.viewport.unbind("touchend MSPointerUp pointerup",H),d.viewport.get(0).releasePointerCapture&&d.viewport.get(0).releasePointerCapture(d.pointerId)},q=function(e){var t=e.originalEvent,n=void 0!==t.changedTouches?t.changedTouches:[t],i=Math.abs(n[0].pageX-d.touch.start.x),o=Math.abs(n[0].pageY-d.touch.start.y),r=0,a=0;o<3*i&&d.settings.preventDefaultSwipeX?e.preventDefault():i<3*o&&d.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!==d.settings.mode&&d.settings.oneToOneTouch&&("horizontal"===d.settings.mode?(a=n[0].pageX-d.touch.start.x,r=d.touch.originalPos.left+a):(a=n[0].pageY-d.touch.start.y,r=d.touch.originalPos.top+a),v(r,"reset",0))},H=function(e){d.viewport.unbind("touchmove MSPointerMove pointermove",q),d.controls.el.removeClass("disabled");var t=e.originalEvent,n=void 0!==t.changedTouches?t.changedTouches:[t],i=0,o=0;d.touch.end.x=n[0].pageX,d.touch.end.y=n[0].pageY,"fade"===d.settings.mode?(o=Math.abs(d.touch.start.x-d.touch.end.x))>=d.settings.swipeThreshold&&(d.touch.start.x>d.touch.end.x?p.goToNextSlide():p.goToPrevSlide(),p.stopAuto()):("horizontal"===d.settings.mode?(o=d.touch.end.x-d.touch.start.x,i=d.touch.originalPos.left):(o=d.touch.end.y-d.touch.start.y,i=d.touch.originalPos.top),!d.settings.infiniteLoop&&(0===d.active.index&&0<o||d.active.last&&o<0)?v(i,"reset",200):Math.abs(o)>=d.settings.swipeThreshold?(o<0?p.goToNextSlide():p.goToPrevSlide(),p.stopAuto()):v(i,"reset",200)),d.viewport.unbind("touchend MSPointerUp pointerup",H),d.viewport.get(0).releasePointerCapture&&d.viewport.get(0).releasePointerCapture(d.pointerId)},R=function(e){if(d.initialized)if(d.working)window.setTimeout(R,10);else{var t=F(window).width(),n=F(window).height();o===t&&r===n||(o=t,r=n,p.redrawSlider(),d.settings.onSliderResize.call(p,d.active.index))}},U=function(e){var t=u();d.settings.ariaHidden&&!d.settings.ticker&&(d.children.attr("aria-hidden","true"),d.children.slice(e,e+t).attr("aria-hidden","false"))};return p.goToSlide=function(e,t){var n,i,o,r,a,s=!0,l=0,c={left:0,top:0},u=null;if(d.oldIndex=d.active.index,d.active.index=(a=e)<0?d.settings.infiniteLoop?h()-1:d.active.index:a>=h()?d.settings.infiniteLoop?0:d.active.index:a,!d.working&&d.active.index!==d.oldIndex){if(d.working=!0,void 0!==(s=d.settings.onSlideBefore.call(p,d.children.eq(d.active.index),d.oldIndex,d.active.index))&&!s)return d.active.index=d.oldIndex,void(d.working=!1);"next"===t?d.settings.onSlideNext.call(p,d.children.eq(d.active.index),d.oldIndex,d.active.index)||(s=!1):"prev"===t&&(d.settings.onSlidePrev.call(p,d.children.eq(d.active.index),d.oldIndex,d.active.index)||(s=!1)),d.active.last=d.active.index>=h()-1,(d.settings.pager||d.settings.pagerCustom)&&I(d.active.index),d.settings.controls&&L(),"fade"===d.settings.mode?(d.settings.adaptiveHeight&&d.viewport.height()!==f()&&d.viewport.animate({height:f()},d.settings.adaptiveHeightSpeed),d.children.filter(":visible").fadeOut(d.settings.speed).css({zIndex:0}),d.children.eq(d.active.index).css("zIndex",d.settings.slideZIndex+1).fadeIn(d.settings.speed,function(){F(this).css("zIndex",d.settings.slideZIndex),A()})):(d.settings.adaptiveHeight&&d.viewport.height()!==f()&&d.viewport.animate({height:f()},d.settings.adaptiveHeightSpeed),!d.settings.infiniteLoop&&d.carousel&&d.active.last?"horizontal"===d.settings.mode?(c=(u=d.children.eq(d.children.length-1)).position(),l=d.viewport.width()-u.outerWidth()):(n=d.children.length-d.settings.minSlides,c=d.children.eq(n).position()):d.carousel&&d.active.last&&"prev"===t?(i=1===d.settings.moveSlides?d.settings.maxSlides-m():(h()-1)*m()-(d.children.length-d.settings.maxSlides),c=(u=p.children(".bx-clone").eq(i)).position()):"next"===t&&0===d.active.index?(c=p.find("> .bx-clone").eq(d.settings.maxSlides).position(),d.active.last=!1):0<=e&&(r=e*parseInt(m()),c=d.children.eq(r).position()),void 0!==c?(o="horizontal"===d.settings.mode?-(c.left-l):-c.top,v(o,"slide",d.settings.speed)):d.working=!1),d.settings.ariaHidden&&U(d.active.index*m())}},p.goToNextSlide=function(){if(d.settings.infiniteLoop||!d.active.last){var e=parseInt(d.active.index)+1;p.goToSlide(e,"next")}},p.goToPrevSlide=function(){if(d.settings.infiniteLoop||0!==d.active.index){var e=parseInt(d.active.index)-1;p.goToSlide(e,"prev")}},p.startAuto=function(e){d.interval||(d.interval=setInterval(function(){"next"===d.settings.autoDirection?p.goToNextSlide():p.goToPrevSlide()},d.settings.pause),d.settings.autoControls&&!0!==e&&$("stop"))},p.stopAuto=function(e){d.interval&&(clearInterval(d.interval),d.interval=null,d.settings.autoControls&&!0!==e&&$("start"))},p.getCurrentSlide=function(){return d.active.index},p.getCurrentSlideElement=function(){return d.children.eq(d.active.index)},p.getSlideElement=function(e){return d.children.eq(e)},p.getSlideCount=function(){return d.children.length},p.isWorking=function(){return d.working},p.redrawSlider=function(){d.children.add(p.find(".bx-clone")).outerWidth(c()),d.viewport.css("height",f()),d.settings.ticker||g(),d.active.last&&(d.active.index=h()-1),d.active.index>=h()&&(d.active.last=!0),d.settings.pager&&!d.settings.pagerCustom&&(y(),I(d.active.index)),d.settings.ariaHidden&&U(d.active.index*m())},p.destroySlider=function(){d.initialized&&(d.initialized=!1,F(".bx-clone",this).remove(),d.children.each(function(){void 0!==F(this).data("origStyle")?F(this).attr("style",F(this).data("origStyle")):F(this).removeAttr("style")}),void 0!==F(this).data("origStyle")?this.attr("style",F(this).data("origStyle")):F(this).removeAttr("style"),F(this).unwrap().unwrap(),d.controls.el&&d.controls.el.remove(),d.controls.next&&d.controls.next.remove(),d.controls.prev&&d.controls.prev.remove(),d.pagerEl&&d.settings.controls&&!d.settings.pagerCustom&&d.pagerEl.remove(),F(".bx-caption",this).remove(),d.controls.autoEl&&d.controls.autoEl.remove(),clearInterval(d.interval),d.settings.responsive&&F(window).unbind("resize",R),d.settings.keyboardEnabled&&F(document).unbind("keydown",P),F(this).removeData("bxSlider"))},p.reloadSlider=function(e){void 0!==e&&(t=e),p.destroySlider(),n(),F(p).data("bxSlider",this)},n(),F(p).data("bxSlider",this),this}}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";return function(f,i,e,t){var h={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[o](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){h.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){h.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(h.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(h.features)return h.features;var e=h.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!n.pointerEvent){var i=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var o=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);o&&0<o.length&&1<=(o=parseInt(o[1],10))&&o<8&&(n.isOldIOSPhone=!0)}var r=i.match(/Android\s([0-9\.]*)/),a=r?r[1]:0;1<=(a=parseFloat(a))&&(a<4.4&&(n.isOldAndroid=!0),n.androidVersion=a),n.isMobileOpera=/opera mini|opera mobi/i.test(i)}for(var s,l,c=["transform","perspective","animationName"],u=["","webkit","Moz","ms","O"],d=0;d<4;d++){t=u[d];for(var p=0;p<3;p++)s=c[p],l=t+(t?s.charAt(0).toUpperCase()+s.slice(1):s),!n[s]&&l in e&&(n[s]=l);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var f=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-f)),i=window.setTimeout(function(){e(t+n)},n);return f=t+n,i},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,h.features=n}};h.detectFeatures(),h.features.oldIE&&(h.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(o=t[s])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=a;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)});var m=this,g={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};h.extend(g,t);var l,o,r,v,a,s,c,u,d,y,p,b,w,x,_,k,C,E,S,T,I,A,$,L,D,j,O,P,N,M,z,q,H,R,U,F,B,W,V,Z,K,n,Q,G,J,X,Y,ee,te,ne,ie,oe,re,ae,se,le={x:0,y:0},ce={x:0,y:0},ue={x:0,y:0},de={},pe=0,fe={},he={x:0,y:0},me=0,ge=!0,ve=[],ye={},be=!1,we=function(e,t){h.extend(m,t.publicMethods),ve.push(e)},xe=function(e){var t=Ht();return t-1<e?e-t:e<0?t+e:e},_e={},ke=function(e,t){return _e[e]||(_e[e]=[]),_e[e].push(t)},Ce=function(e){var t=_e[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(m,n)}},Ee=function(){return(new Date).getTime()},Se=function(e){re=e,m.bg.style.opacity=e*g.bgOpacity},Te=function(e,t,n,i,o){(!be||o&&o!==m.currItem)&&(i/=o?o.fitRatio:m.currItem.fitRatio),e[A]=b+t+"px, "+n+"px"+w+" scale("+i+")"},Ie=function(e){ee&&(e&&(y>m.currItem.fitRatio?be||(Qt(m.currItem,!1,!0),be=!0):be&&(Qt(m.currItem),be=!1)),Te(ee,ue.x,ue.y,y))},Ae=function(e){e.container&&Te(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},$e=function(e,t){t[A]=b+e+"px, 0px"+w},Le=function(e,t){if(!g.loop&&t){var n=v+(he.x*pe-e)/he.x,i=Math.round(e-ct.x);(n<0&&0<i||n>=Ht()-1&&i<0)&&(e=ct.x+i*g.mainScrollEndFriction)}ct.x=e,$e(e,a)},De=function(e,t){var n=ut[e]-fe[e];return ce[e]+le[e]+n-n*(t/p)},je=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Oe=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Pe=null,Ne=function(){Pe&&(h.unbind(document,"mousemove",Ne),h.addClass(f,"pswp--has_mouse"),g.mouseUsed=!0,Ce("mouseUsed")),Pe=setTimeout(function(){Pe=null},100)},Me=function(e,t){var n=Wt(m.currItem,de,e);return t&&(Y=n),n},ze=function(e){return e||(e=m.currItem),e.initialZoomLevel},qe=function(e){return e||(e=m.currItem),0<e.w?g.maxSpreadZoom:1},He=function(e,t,n,i){return i===m.currItem.initialZoomLevel?(n[e]=m.currItem.initialPosition[e],!0):(n[e]=De(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Re=function(e){var t="";g.escKey&&27===e.keyCode?t="close":g.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,m[t]()))},Ue=function(e){e&&(K||Z||te||F)&&(e.preventDefault(),e.stopPropagation())},Fe=function(){m.setScrollOffset(0,h.getScrollY())},Be={},We=0,Ve=function(e){Be[e]&&(Be[e].raf&&j(Be[e].raf),We--,delete Be[e])},Ze=function(e){Be[e]&&Ve(e),Be[e]||(We++,Be[e]={})},Ke=function(){for(var e in Be)Be.hasOwnProperty(e)&&Ve(e)},Qe=function(e,t,n,i,o,r,a){var s,l=Ee();Ze(e);var c=function(){if(Be[e]){if(s=Ee()-l,i<=s)return Ve(e),r(n),void(a&&a());r((n-t)*o(s/i)+t),Be[e].raf=D(c)}};c()},Ge={shout:Ce,listen:ke,viewportSize:de,options:g,isMainScrollAnimating:function(){return te},getZoomLevel:function(){return y},getCurrentIndex:function(){return v},isDragging:function(){return W},isZooming:function(){return J},setScrollOffset:function(e,t){fe.x=e,M=fe.y=t,Ce("updateScrollOffset",fe)},applyZoomPan:function(e,t,n,i){ue.x=t,ue.y=n,y=e,Ie(i)},init:function(){if(!l&&!o){var e;m.framework=h,m.template=f,m.bg=h.getChildByClass(f,"pswp__bg"),O=f.className,l=!0,z=h.detectFeatures(),D=z.raf,j=z.caf,A=z.transform,N=z.oldIE,m.scrollWrap=h.getChildByClass(f,"pswp__scroll-wrap"),m.container=h.getChildByClass(m.scrollWrap,"pswp__container"),a=m.container.style,m.itemHolders=k=[{el:m.container.children[0],wrap:0,index:-1},{el:m.container.children[1],wrap:0,index:-1},{el:m.container.children[2],wrap:0,index:-1}],k[0].el.style.display=k[2].el.style.display="none",function(){if(A){var e=z.perspective&&!L;return b="translate"+(e?"3d(":"("),w=z.perspective?", 0px)":")"}A="left",h.addClass(f,"pswp--ie"),$e=function(e,t){t.left=e+"px"},Ae=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Ie=function(){if(ee){var e=ee,t=m.currItem,n=1<t.fitRatio?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=ue.x+"px",e.top=ue.y+"px"}}}(),d={resize:m.updateSize,scroll:Fe,keydown:Re,click:Ue};var t=z.isOldIOSPhone||z.isOldAndroid||z.isMobileOpera;for(z.animationName&&z.transform&&!t||(g.showAnimationDuration=g.hideAnimationDuration=0),e=0;e<ve.length;e++)m["init"+ve[e]]();i&&(m.ui=new i(m,h)).init(),Ce("firstUpdate"),v=v||g.index||0,(isNaN(v)||v<0||v>=Ht())&&(v=0),m.currItem=qt(v),(z.isOldIOSPhone||z.isOldAndroid)&&(ge=!1),f.setAttribute("aria-hidden","false"),g.modal&&(ge?f.style.position="fixed":(f.style.position="absolute",f.style.top=h.getScrollY()+"px")),void 0===M&&(Ce("initialLayout"),M=P=h.getScrollY());var n="pswp--open ";for(g.mainClass&&(n+=g.mainClass+" "),g.showHideOpacity&&(n+="pswp--animate_opacity "),n+=L?"pswp--touch":"pswp--notouch",n+=z.animationName?" pswp--css_animation":"",n+=z.svg?" pswp--svg":"",h.addClass(f,n),m.updateSize(),s=-1,me=null,e=0;e<3;e++)$e((e+s)*he.x,k[e].el.style);N||h.bind(m.scrollWrap,u,m),ke("initialZoomInEnd",function(){m.setContent(k[0],v-1),m.setContent(k[2],v+1),k[0].el.style.display=k[2].el.style.display="block",g.focus&&f.focus(),h.bind(document,"keydown",m),z.transform&&h.bind(m.scrollWrap,"click",m),g.mouseUsed||h.bind(document,"mousemove",Ne),h.bind(window,"resize scroll",m),Ce("bindEvents")}),m.setContent(k[1],v),m.updateCurrItem(),Ce("afterInit"),ge||(x=setInterval(function(){We||W||J||y!==m.currItem.initialZoomLevel||m.updateSize()},1e3)),h.addClass(f,"pswp--visible")}},close:function(){l&&(o=!(l=!1),Ce("close"),h.unbind(window,"resize",m),h.unbind(window,"scroll",d.scroll),h.unbind(document,"keydown",m),h.unbind(document,"mousemove",Ne),z.transform&&h.unbind(m.scrollWrap,"click",m),W&&h.unbind(window,c,m),Ce("unbindEvents"),Rt(m.currItem,null,!0,m.destroy))},destroy:function(){Ce("destroy"),Pt&&clearTimeout(Pt),f.setAttribute("aria-hidden","true"),f.className=O,x&&clearInterval(x),h.unbind(m.scrollWrap,u,m),h.unbind(window,"scroll",m),ft(),Ke(),_e=null},panTo:function(e,t,n){n||(e>Y.min.x?e=Y.min.x:e<Y.max.x&&(e=Y.max.x),t>Y.min.y?t=Y.min.y:t<Y.max.y&&(t=Y.max.y)),ue.x=e,ue.y=t,Ie()},handleEvent:function(e){e=e||window.event,d[e.type]&&d[e.type](e)},goTo:function(e){var t=(e=xe(e))-v;me=t,v=e,m.currItem=qt(v),pe-=t,Le(he.x*pe),Ke(),te=!1,m.updateCurrItem()},next:function(){m.goTo(v+1)},prev:function(){m.goTo(v-1)},updateCurrZoomItem:function(e){if(e&&Ce("beforeChange",0),k[1].el.children.length){var t=k[1].el.children[0];ee=h.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ee=null;Y=m.currItem.bounds,p=y=m.currItem.initialZoomLevel,ue.x=Y.center.x,ue.y=Y.center.y,e&&Ce("afterChange")},invalidateCurrItems:function(){_=!0;for(var e=0;e<3;e++)k[e].item&&(k[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==me){var t,n=Math.abs(me);if(!(e&&n<2)){m.currItem=qt(v),be=!1,Ce("beforeChange",me),3<=n&&(s+=me+(0<me?-3:3),n=3);for(var i=0;i<n;i++)0<me?(t=k.shift(),k[2]=t,$e((++s+2)*he.x,t.el.style),m.setContent(t,v-n+i+1+1)):(t=k.pop(),k.unshift(t),$e(--s*he.x,t.el.style),m.setContent(t,v+n-i-1-1));if(ee&&1===Math.abs(me)){var o=qt(C);o.initialZoomLevel!==y&&(Wt(o,de),Qt(o),Ae(o))}me=0,m.updateCurrZoomItem(),C=v,Ce("afterChange")}}},updateSize:function(e){if(!ge&&g.modal){var t=h.getScrollY();if(M!==t&&(f.style.top=t+"px",M=t),!e&&ye.x===window.innerWidth&&ye.y===window.innerHeight)return;ye.x=window.innerWidth,ye.y=window.innerHeight,f.style.height=ye.y+"px"}if(de.x=m.scrollWrap.clientWidth,de.y=m.scrollWrap.clientHeight,Fe(),he.x=de.x+Math.round(de.x*g.spacing),he.y=de.y,Le(he.x*pe),Ce("beforeResize"),void 0!==s){for(var n,i,o,r=0;r<3;r++)n=k[r],$e((r+s)*he.x,n.el.style),o=v+r-1,g.loop&&2<Ht()&&(o=xe(o)),(i=qt(o))&&(_||i.needsUpdate||!i.bounds)?(m.cleanSlide(i),m.setContent(n,o),1===r&&(m.currItem=i,m.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=o&&m.setContent(n,o),i&&i.container&&(Wt(i,de),Qt(i),Ae(i));_=!1}p=y=m.currItem.initialZoomLevel,(Y=m.currItem.bounds)&&(ue.x=Y.center.x,ue.y=Y.center.y,Ie(!0)),Ce("resize")},zoomTo:function(t,e,n,i,o){e&&(p=y,ut.x=Math.abs(e.x)-ue.x,ut.y=Math.abs(e.y)-ue.y,je(ce,ue));var r=Me(t,!1),a={};He("x",r,a,t),He("y",r,a,t);var s=y,l=ue.x,c=ue.y;Oe(a);var u=function(e){1===e?(y=t,ue.x=a.x,ue.y=a.y):(y=(t-s)*e+s,ue.x=(a.x-l)*e+l,ue.y=(a.y-c)*e+c),o&&o(e),Ie(1===e)};n?Qe("customZoomTo",0,1,n,i||h.easing.sine.inOut,u):u(1)}},Je={},Xe={},Ye={},et={},tt={},nt=[],it={},ot=[],rt={},at=0,st={x:0,y:0},lt=0,ct={x:0,y:0},ut={x:0,y:0},dt={x:0,y:0},pt=function(e,t){return rt.x=Math.abs(e.x-t.x),rt.y=Math.abs(e.y-t.y),Math.sqrt(rt.x*rt.x+rt.y*rt.y)},ft=function(){n&&(j(n),n=null)},ht=function(){W&&(n=D(ht),It())},mt=function(e,t){return!!e&&!(e.className&&-1<e.className.indexOf("pswp__scroll-wrap"))&&(t(e)?e:mt(e.parentNode,t))},gt={},vt=function(e,t){return gt.prevent=!mt(e.target,g.isClickableElement),Ce("preventDragEvent",e,t,gt),gt.prevent},yt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},bt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},wt=function(){var e=ue.y-m.currItem.initialPosition.y;return 1-Math.abs(e/(de.y/2))},xt={},_t={},kt=[],Ct=function(e){for(;0<kt.length;)kt.pop();return $?(se=0,nt.forEach(function(e){0===se?kt[0]=e:1===se&&(kt[1]=e),se++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(kt[0]=yt(e.touches[0],xt),1<e.touches.length&&(kt[1]=yt(e.touches[1],_t))):(xt.x=e.pageX,xt.y=e.pageY,xt.id="",kt[0]=xt),kt},Et=function(e,t){var n,i,o,r,a=ue[e]+t[e],s=0<t[e],l=ct.x+t.x,c=ct.x-it.x;return n=a>Y.min[e]||a<Y.max[e]?g.panEndFriction:1,a=ue[e]+t[e]*n,!g.allowPanToNext&&y!==m.currItem.initialZoomLevel||(ee?"h"!==ne||"x"!==e||Z||(s?(a>Y.min[e]&&(n=g.panEndFriction,Y.min[e],i=Y.min[e]-ce[e]),(i<=0||c<0)&&1<Ht()?(r=l,c<0&&l>it.x&&(r=it.x)):Y.min.x!==Y.max.x&&(o=a)):(a<Y.max[e]&&(n=g.panEndFriction,Y.max[e],i=ce[e]-Y.max[e]),(i<=0||0<c)&&1<Ht()?(r=l,0<c&&l<it.x&&(r=it.x)):Y.min.x!==Y.max.x&&(o=a))):r=l,"x"!==e)?void(te||Q||y>m.currItem.fitRatio&&(ue[e]+=t[e]*n)):(void 0!==r&&(Le(r,!0),Q=r!==it.x),Y.min.x!==Y.max.x&&(void 0!==o?ue.x=o:Q||(ue.x+=t.x*n)),void 0!==r)},St=function(e){if(!("mousedown"===e.type&&0<e.button)){if(zt)return void e.preventDefault();if(!B||"mousedown"!==e.type){if(vt(e,!0)&&e.preventDefault(),Ce("pointerDown"),$){var t=h.arraySearch(nt,e.pointerId,"id");t<0&&(t=nt.length),nt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Ct(e),i=n.length;G=null,Ke(),W&&1!==i||(W=ie=!0,h.bind(window,c,m),U=ae=oe=F=Q=K=V=Z=!1,ne=null,Ce("firstTouchStart",n),je(ce,ue),le.x=le.y=0,je(et,n[0]),je(tt,et),it.x=he.x*pe,ot=[{x:et.x,y:et.y}],H=q=Ee(),Me(y,!0),ft(),ht()),!J&&1<i&&!te&&!Q&&(p=y,J=V=!(Z=!1),le.y=le.x=0,je(ce,ue),je(Je,n[0]),je(Xe,n[1]),bt(Je,Xe,dt),ut.x=Math.abs(dt.x)-ue.x,ut.y=Math.abs(dt.y)-ue.y,X=pt(Je,Xe))}}},Tt=function(e){if(e.preventDefault(),$){var t=h.arraySearch(nt,e.pointerId,"id");if(-1<t){var n=nt[t];n.x=e.pageX,n.y=e.pageY}}if(W){var i=Ct(e);if(ne||K||J)G=i;else if(ct.x!==he.x*pe)ne="h";else{var o=Math.abs(i[0].x-et.x)-Math.abs(i[0].y-et.y);10<=Math.abs(o)&&(ne=0<o?"h":"v",G=i)}}},It=function(){if(G){var e=G.length;if(0!==e)if(je(Je,G[0]),Ye.x=Je.x-et.x,Ye.y=Je.y-et.y,J&&1<e){if(et.x=Je.x,et.y=Je.y,!Ye.x&&!Ye.y&&(l=G[1],c=Xe,l.x===c.x&&l.y===c.y))return;je(Xe,G[1]),Z||(Z=!0,Ce("zoomGestureStarted"));var t=pt(Je,Xe),n=jt(t);n>m.currItem.initialZoomLevel+m.currItem.initialZoomLevel/15&&(ae=!0);var i=1,o=ze(),r=qe();if(n<o)if(g.pinchToClose&&!ae&&p<=m.currItem.initialZoomLevel){var a=1-(o-n)/(o/1.2);Se(a),Ce("onPinchClose",a),oe=!0}else 1<(i=(o-n)/o)&&(i=1),n=o-i*(o/3);else r<n&&(1<(i=(n-r)/(6*o))&&(i=1),n=r+i*o);i<0&&(i=0),bt(Je,Xe,st),le.x+=st.x-dt.x,le.y+=st.y-dt.y,je(dt,st),ue.x=De("x",n),ue.y=De("y",n),U=y<n,y=n,Ie()}else{if(!ne)return;if(ie&&(ie=!1,10<=Math.abs(Ye.x)&&(Ye.x-=G[0].x-tt.x),10<=Math.abs(Ye.y)&&(Ye.y-=G[0].y-tt.y)),et.x=Je.x,et.y=Je.y,0===Ye.x&&0===Ye.y)return;if("v"===ne&&g.closeOnVerticalDrag&&"fit"===g.scaleMode&&y===m.currItem.initialZoomLevel){le.y+=Ye.y,ue.y+=Ye.y;var s=wt();return F=!0,Ce("onVerticalDrag",s),Se(s),void Ie()}(function(e,t,n){if(50<e-H){var i=2<ot.length?ot.shift():{};i.x=t,i.y=n,ot.push(i),H=e}})(Ee(),Je.x,Je.y),K=!0,Y=m.currItem.bounds,Et("x",Ye)||(Et("y",Ye),Oe(ue),Ie())}}var l,c},At=function(e){if(z.isOldAndroid){if(B&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(B),B=setTimeout(function(){B=0},600))}var t;if(Ce("pointerUp"),vt(e,!1)&&e.preventDefault(),$){var n=h.arraySearch(nt,e.pointerId,"id");-1<n&&(t=nt.splice(n,1)[0],navigator.pointerEnabled?t.type=e.pointerType||"mouse":(t.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],t.type||(t.type=e.pointerType||"mouse")))}var i,o=Ct(e),r=o.length;if("mouseup"===e.type&&(r=0),2===r)return!(G=null);1===r&&je(tt,o[0]),0!==r||ne||te||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ce("touchRelease",e,t));var a=-1;if(0===r&&(W=!1,h.unbind(window,c,m),ft(),J?a=0:-1!==lt&&(a=Ee()-lt)),lt=1===r?Ee():-1,i=-1!==a&&a<150?"zoom":"swipe",J&&r<2&&(J=!1,1===r&&(i="zoomPointerUp"),Ce("zoomGestureEnded")),G=null,K||Z||te||F)if(Ke(),R||(R=$t()),R.calculateSwipeSpeed("x"),F)if(wt()<g.verticalDragRange)m.close();else{var s=ue.y,l=re;Qe("verticalDrag",0,1,300,h.easing.cubic.out,function(e){ue.y=(m.currItem.initialPosition.y-s)*e+s,Se((1-l)*e+l),Ie()}),Ce("onVerticalDrag",1)}else{if((Q||te)&&0===r){if(Dt(i,R))return;i="zoomPointerUp"}if(!te)return"swipe"!==i?void Ot():void(!Q&&y>m.currItem.fitRatio&&Lt(R))}},$t=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){1<ot.length?(t=Ee()-H+50,n=ot[ot.length-2][e]):(t=Ee()-q,n=tt[e]),i.lastFlickOffset[e]=et[e]-n,i.lastFlickDist[e]=Math.abs(i.lastFlickOffset[e]),i.lastFlickSpeed[e]=20<i.lastFlickDist[e]?i.lastFlickOffset[e]/t:0,Math.abs(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(ue[t]>Y.min[t]?i.backAnimDestination[t]=Y.min[t]:ue[t]<Y.max[t]&&(i.backAnimDestination[t]=Y.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,Qe("bounceZoomPan"+t,ue[t],i.backAnimDestination[t],e||300,h.easing.sine.out,function(e){ue[t]=e,Ie()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]=i.speedDecelerationRatio[e]*(i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10),i.speedDecelerationRatioAbs[e]=Math.abs(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,ue[e]+=i.distanceOffset[e])},panAnimLoop:function(){return Be.zoomPan&&(Be.zoomPan.raf=D(i.panAnimLoop),i.now=Ee(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),Ie(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05&&i.speedDecelerationRatioAbs.y<.05)?(ue.x=Math.round(ue.x),ue.y=Math.round(ue.y),Ie(),void Ve("zoomPan")):void 0}};return i},Lt=function(e){return e.calculateSwipeSpeed("y"),Y=m.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(Ze("zoomPan"),e.lastNow=Ee(),void e.panAnimLoop())},Dt=function(e,t){var n,i,o;if(te||(at=v),"swipe"===e){var r=et.x-tt.x,a=t.lastFlickDist.x<10;30<r&&(a||20<t.lastFlickOffset.x)?i=-1:r<-30&&(a||t.lastFlickOffset.x<-20)&&(i=1)}i&&((v+=i)<0?(v=g.loop?Ht()-1:0,o=!0):v>=Ht()&&(v=g.loop?0:Ht()-1,o=!0),(!o||g.loop)&&(me+=i,pe-=i,n=!0));var s,l=he.x*pe,c=Math.abs(l-ct.x);return n||l>ct.x==0<t.lastFlickSpeed.x?(s=0<Math.abs(t.lastFlickSpeed.x)?c/Math.abs(t.lastFlickSpeed.x):333,s=Math.min(s,400),s=Math.max(s,250)):s=333,at===v&&(n=!1),te=!0,Ce("mainScrollAnimStart"),Qe("mainScroll",ct.x,l,s,h.easing.cubic.out,Le,function(){Ke(),te=!1,at=-1,(n||at!==v)&&m.updateCurrItem(),Ce("mainScrollAnimComplete")}),n&&m.updateCurrItem(!0),n},jt=function(e){return 1/X*e*p},Ot=function(){var e=y,t=ze(),n=qe();y<t?e=t:n<y&&(e=n);var i,o=re;return oe&&!U&&!ae&&y<t?m.close():(oe&&(i=function(e){Se((1-o)*e+o)}),m.zoomTo(e,0,200,h.easing.cubic.out,i)),!0};we("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){E=e+t,S=e+n,T=e+i,I=o?e+o:""};($=z.pointerEvent)&&z.touch&&(z.touch=!1),$?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):z.touch?(e("touch","start","move","end","cancel"),L=!0):e("mouse","down","move","up"),c=S+" "+T+" "+I,u=E,$&&!L&&(L=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),m.likelyTouchDevice=L,d[E]=St,d[S]=Tt,d[T]=At,I&&(d[I]=d[T]),z.touch&&(u+=" mousedown",c+=" mousemove mouseup",d.mousedown=d[E],d.mousemove=d[S],d.mouseup=d[T]),L||(g.allowPanToNext=!1)}}});var Pt,Nt,Mt,zt,qt,Ht,Rt=function(a,e,s,t){var l;Pt&&clearTimeout(Pt),Mt=zt=!0,a.initialLayout?(l=a.initialLayout,a.initialLayout=null):l=g.getThumbBoundsFn&&g.getThumbBoundsFn(v);var c,u,d=s?g.hideAnimationDuration:g.showAnimationDuration,p=function(){Ve("initialZoom"),s?(m.template.removeAttribute("style"),m.bg.removeAttribute("style")):(Se(1),e&&(e.style.display="block"),h.addClass(f,"pswp--animated-in"),Ce("initialZoom"+(s?"OutEnd":"InEnd"))),t&&t(),zt=!1};if(!d||!l||void 0===l.x)return Ce("initialZoom"+(s?"Out":"In")),y=a.initialZoomLevel,je(ue,a.initialPosition),Ie(),f.style.opacity=s?0:1,Se(1),void(d?setTimeout(function(){p()},d):p());c=r,u=!m.currItem.src||m.currItem.loadError||g.showHideOpacity,a.miniImg&&(a.miniImg.style.webkitBackfaceVisibility="hidden"),s||(y=l.w/a.w,ue.x=l.x,ue.y=l.y-P,m[u?"template":"bg"].style.opacity=.001,Ie()),Ze("initialZoom"),s&&!c&&h.removeClass(f,"pswp--animated-in"),u&&(s?h[(c?"remove":"add")+"Class"](f,"pswp--animate_opacity"):setTimeout(function(){h.addClass(f,"pswp--animate_opacity")},30)),Pt=setTimeout(function(){if(Ce("initialZoom"+(s?"Out":"In")),s){var t=l.w/a.w,n=ue.x,i=ue.y,o=y,r=re,e=function(e){1===e?(y=t,ue.x=l.x,ue.y=l.y-M):(y=(t-o)*e+o,ue.x=(l.x-n)*e+n,ue.y=(l.y-M-i)*e+i),Ie(),u?f.style.opacity=1-e:Se(r-e*r)};c?Qe("initialZoom",0,1,d,h.easing.cubic.out,e,p):(e(1),Pt=setTimeout(p,d+20))}else y=a.initialZoomLevel,je(ue,a.initialPosition),Ie(),Se(1),u?f.style.opacity=1:Se(1),Pt=setTimeout(p,d+20)},s?25:90)},Ut={},Ft=[],Bt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Nt.length}},Wt=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Ce("parseVerticalMargin",e)),Ut.x=t.x,Ut.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=Ut.x/e.w,r=Ut.y/e.h;e.fitRatio=o<r?o:r;var a=g.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),1<n&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})}if(!n)return;return l=(s=e).w*n,c=e.h*n,(u=s.bounds).center.x=Math.round((Ut.x-l)/2),u.center.y=Math.round((Ut.y-c)/2)+s.vGap.top,u.max.x=l>Ut.x?Math.round(Ut.x-l):u.center.x,u.max.y=c>Ut.y?Math.round(Ut.y-c)+s.vGap.top:u.center.y,u.min.x=l>Ut.x?0:u.center.x,u.min.y=c>Ut.y?s.vGap.top:u.center.y,i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}var s,l,c,u;return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},e.initialPosition=e.bounds.center,e.bounds},Vt=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,Qt(t,i,t===m.currItem&&be),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},Zt=function(e){e.loading=!0,e.loaded=!1;var t=e.img=h.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?(e.w=t.width,e.h=t.height,e.loadComplete(e),m.updateSize()):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},Kt=function(e,t){return e.src&&e.loadError&&e.container?(t&&(e.container.innerHTML=""),e.container.innerHTML=g.errorMsg.replace("%url%",e.src),!0):void 0},Qt=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},Gt=function(){if(Ft.length){for(var e,t=0;t<Ft.length;t++)(e=Ft[t]).holder.index===e.index&&Vt(e.index,e.item,e.baseDiv,e.img,0,e.clearPlaceholder);Ft=[]}};we("Controller",{publicMethods:{lazyLoadItem:function(e){e=xe(e);var t=qt(e);t&&(!t.loaded&&!t.loading||_)&&(Ce("gettingData",e,t),t.src&&Zt(t))},initController:function(){h.extend(g,Bt,!0),m.items=Nt=e,qt=m.getItemAt,Ht=g.getNumItemsFn,g.loop,Ht()<3&&(g.loop=!1),ke("beforeChange",function(e){var t,n=g.preload,i=null===e||0<=e,o=Math.min(n[0],Ht()),r=Math.min(n[1],Ht());for(t=1;t<=(i?r:o);t++)m.lazyLoadItem(v+t);for(t=1;t<=(i?o:r);t++)m.lazyLoadItem(v-t)}),ke("initialLayout",function(){m.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(v)}),ke("mainScrollAnimComplete",Gt),ke("initialZoomInEnd",Gt),ke("destroy",function(){for(var e,t=0;t<Nt.length;t++)(e=Nt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);Ft=null})},getItemAt:function(e){return 0<=e&&void 0!==Nt[e]&&Nt[e]},allowProgressiveImg:function(){return g.forceProgressiveLoading||!L||g.mouseUsed||1200<screen.width},setContent:function(t,n){g.loop&&(n=xe(n));var e=m.getItemAt(t.index);e&&(e.container=null);var i,o=m.getItemAt(n);if(o){Ce("gettingData",n,o),t.index=n;var r=(t.item=o).container=h.createEl("pswp__zoom-wrap");if(!o.src&&o.html&&(o.html.tagName?r.appendChild(o.html):r.innerHTML=o.html),Kt(o),Wt(o,de),!o.src||o.loadError||o.loaded)o.src&&!o.loadError&&((i=h.createEl("pswp__img","img")).style.opacity=1,i.src=o.src,Qt(o,i),Vt(0,o,r,i));else{if(o.loadComplete=function(e){if(l){if(t&&t.index===n){if(Kt(e,!0))return e.loadComplete=e.img=null,Wt(e,de),Ae(e),void(t.index===v&&m.updateCurrZoomItem());e.imageAppended?!zt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):z.transform&&(te||zt)?Ft.push({item:e,baseDiv:r,img:e.img,index:n,holder:t,clearPlaceholder:!0}):Vt(0,e,r,e.img,0,!0)}e.loadComplete=null,e.img=null,Ce("imageLoadComplete",n,e)}},h.features.transform){var a="pswp__img pswp__img--placeholder";a+=o.msrc?"":" pswp__img--placeholder--blank";var s=h.createEl(a,o.msrc?"img":"");o.msrc&&(s.src=o.msrc),Qt(o,s),r.appendChild(s),o.placeholder=s}o.loading||Zt(o),m.allowProgressiveImg()&&(!Mt&&z.transform?Ft.push({item:o,baseDiv:r,img:o.img,index:n,holder:t}):Vt(0,o,r,o.img,0,!0))}Mt||n!==v?Ae(o):(ee=r.style,Rt(o,i||o.img)),t.el.innerHTML="",t.el.appendChild(r)}else t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var Jt,Xt,Yt={},en=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};we("Tap",{publicMethods:{initTap:function(){ke("firstTouchStart",m.onTapStart),ke("touchRelease",m.onTapRelease),ke("destroy",function(){Yt={},Jt=null})},onTapStart:function(e){1<e.length&&(clearTimeout(Jt),Jt=null)},onTapRelease:function(e,t){if(t&&!K&&!V&&!We){var n=t;if(Jt&&(clearTimeout(Jt),Jt=null,i=n,o=Yt,Math.abs(i.x-o.x)<25&&Math.abs(i.y-o.y)<25))return void Ce("doubleTap",n);if("mouse"===t.type)return void en(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||h.hasClass(e.target,"pswp__single-tap"))return void en(e,t);je(Yt,n),Jt=setTimeout(function(){en(e,t),Jt=null},300)}var i,o}}}),we("DesktopZoom",{publicMethods:{initDesktopZoom:function(){N||(L?ke("mouseUsed",function(){m.setupDesktopZoom()}):m.setupDesktopZoom(!0))},setupDesktopZoom:function(e){Xt={};var t="wheel mousewheel DOMMouseScroll";ke("bindEvents",function(){h.bind(f,t,m.handleMouseWheel)}),ke("unbindEvents",function(){Xt&&h.unbind(f,t,m.handleMouseWheel)}),m.mouseZoomedIn=!1;var n,i=function(){m.mouseZoomedIn&&(h.removeClass(f,"pswp--zoomed-in"),m.mouseZoomedIn=!1),y<1?h.addClass(f,"pswp--zoom-allowed"):h.removeClass(f,"pswp--zoom-allowed"),o()},o=function(){n&&(h.removeClass(f,"pswp--dragging"),n=!1)};ke("resize",i),ke("afterChange",i),ke("pointerDown",function(){m.mouseZoomedIn&&(n=!0,h.addClass(f,"pswp--dragging"))}),ke("pointerUp",o),e||i()},handleMouseWheel:function(e){if(y<=m.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||We||W?e.preventDefault():A&&2<Math.abs(e.deltaY)&&(r=!0,m.close())),!0;if(e.stopPropagation(),Xt.x=0,"deltaX"in e)1===e.deltaMode?(Xt.x=18*e.deltaX,Xt.y=18*e.deltaY):(Xt.x=e.deltaX,Xt.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(Xt.x=-.16*e.wheelDeltaX),Xt.y=e.wheelDeltaY?-.16*e.wheelDeltaY:-.16*e.wheelDelta;else{if(!("detail"in e))return;Xt.y=e.detail}Me(y,!0);var t=ue.x-Xt.x,n=ue.y-Xt.y;(g.modal||t<=Y.min.x&&t>=Y.max.x&&n<=Y.min.y&&n>=Y.max.y)&&e.preventDefault(),m.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:de.x/2+fe.x,y:de.y/2+fe.y};var t=g.getDoubleTapZoom(!0,m.currItem),n=y===t;m.mouseZoomedIn=!n,m.zoomTo(n?m.currItem.initialZoomLevel:t,e,333),h[(n?"remove":"add")+"Class"](f,"pswp--zoomed-in")}}});var tn,nn,on,rn,an,sn,ln,cn,un,dn,pn,fn,hn={history:!0,galleryUID:1},mn=function(){return pn.hash.substring(1)},gn=function(){tn&&clearTimeout(tn),on&&clearTimeout(on)},vn=function(){var e=mn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(g.galleryPIDs){var r=t.pid;for(n=t.pid=0;n<Nt.length;n++)if(Nt[n].pid===r){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},yn=function(){if(on&&clearTimeout(on),We||W)on=setTimeout(yn,500);else{rn?clearTimeout(nn):rn=!0;var e=v+1,t=qt(v);t.hasOwnProperty("pid")&&(e=t.pid);var n=ln+"&gid="+g.galleryUID+"&pid="+e;cn||-1===pn.hash.indexOf(n)&&(dn=!0);var i=pn.href.split("#")[0]+"#"+n;fn?"#"+n!==window.location.hash&&history[cn?"replaceState":"pushState"]("",document.title,i):cn?pn.replace(i):pn.hash=n,cn=!0,nn=setTimeout(function(){rn=!1},60)}};we("History",{publicMethods:{initHistory:function(){if(h.extend(g,hn,!0),g.history){pn=window.location,cn=un=dn=!1,ln=mn(),fn="pushState"in history,-1<ln.indexOf("gid=")&&(ln=(ln=ln.split("&gid=")[0]).split("?gid=")[0]),ke("afterChange",m.updateURL),ke("unbindEvents",function(){h.unbind(window,"hashchange",m.onHashChange)});var e=function(){sn=!0,un||(dn?history.back():ln?pn.hash=ln:fn?history.pushState("",document.title,pn.pathname+pn.search):pn.hash=""),gn()};ke("unbindEvents",function(){r&&e()}),ke("destroy",function(){sn||e()}),ke("firstUpdate",function(){v=vn().pid});var t=ln.indexOf("pid=");-1<t&&"&"===(ln=ln.substring(0,t)).slice(-1)&&(ln=ln.slice(0,-1)),setTimeout(function(){l&&h.bind(window,"hashchange",m.onHashChange)},40)}},onHashChange:function(){return mn()===ln?(un=!0,void m.close()):void(rn||(an=!0,m.goTo(vn().pid),an=!1))},updateURL:function(){gn(),an||(cn?tn=setTimeout(yn,800):yn())}}}),h.extend(m,Ge)}}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(o,s){var n,l,r,a,t,i,c,u,d,e,p,f,h,m,g,v,y,b,w=this,x=!1,_=!0,k=!0,C={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / "},E=function(e){if(v)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!d&&O();for(var t,n,i=(e.target||e.srcElement).className,o=0;o<z.length;o++)(t=z[o]).onTap&&-1<i.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);if(n){e.stopPropagation&&e.stopPropagation(),v=!0;var r=s.features.isOldAndroid?600:30;setTimeout(function(){v=!1},r)}},S=function(e,t,n){s[(n?"add":"remove")+"Class"](e,"pswp__"+t)},T=function(){var e=1===g.getNumItemsFn();e!==m&&(S(l,"ui--one-slide",e),m=e)},I=function(){S(c,"share-modal--hidden",k)},A=function(){return(k=!k)?(s.removeClass(c,"pswp__share-modal--fade-in"),setTimeout(function(){k&&I()},300)):(I(),setTimeout(function(){k||s.addClass(c,"pswp__share-modal--fade-in")},30)),k||L(),!1},$=function(e){var t=(e=e||window.event).target||e.srcElement;return o.shout("shareLinkClick",e,t),!(!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),k||A(),1))},L=function(){for(var e,t,n,i,o="",r=0;r<g.shareButtons.length;r++)e=g.shareButtons[r],t=g.getImageURLForShare(e),n=g.getPageURLForShare(e),i=g.getTextForShare(e),o+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(i))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(o=g.parseShareButtonOut(e,o));c.children[0].innerHTML=o,c.children[0].onclick=$},D=function(e){for(var t=0;t<g.closeElClasses.length;t++)if(s.hasClass(e,"pswp__"+g.closeElClasses[t]))return!0},j=0,O=function(){clearTimeout(b),j=0,d&&w.setIdle(!1)},P=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout(function(){w.setIdle(!0)},g.timeToIdleOutside))},N=function(e){f!==e&&(S(p,"preloader--active",!e),f=e)},M=function(e){var t=e.vGap;if(!o.likelyTouchDevice||g.mouseUsed||1200<screen.width){var n=g.barsSize;if(g.captionEl&&"auto"===n.bottom)if(a||((a=s.createEl("pswp__caption pswp__caption--fake")).appendChild(s.createEl("pswp__caption__center")),l.insertBefore(a,r),s.addClass(l,"pswp__ui--fit")),g.addCaptionHTMLFn(e,a,!0)){var i=a.clientHeight;t.bottom=parseInt(i,10)||44}else t.bottom=n.top;else t.bottom="auto"===n.bottom?0:n.bottom;t.top=n.top}else t.top=t.bottom=0},z=[{name:"caption",option:"captionEl",onInit:function(e){r=e}},{name:"share-modal",option:"shareEl",onInit:function(e){c=e},onTap:function(){A()}},{name:"button--share",option:"shareEl",onInit:function(e){i=e},onTap:function(){A()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){t=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}}];w.init=function(){var t;s.extend(o.options,C,!0),g=o.options,l=s.getChildByClass(o.scrollWrap,"pswp__ui"),(e=o.listen)("onVerticalDrag",function(e){_&&e<.95?w.hideControls():!_&&.95<=e&&w.showControls()}),e("onPinchClose",function(e){_&&e<.9?(w.hideControls(),t=!0):t&&!_&&.9<e&&w.showControls()}),e("zoomGestureEnded",function(){(t=!1)&&!_&&w.showControls()}),e("beforeChange",w.update),e("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()!==t?o.zoomTo(t,e,333):o.zoomTo(g.getDoubleTapZoom(!1,o.currItem),e,333)}),e("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.className&&-1<e.type.indexOf("mouse")&&(0<i.className.indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),e("bindEvents",function(){s.bind(l,"pswpTap click",E),s.bind(o.scrollWrap,"pswpTap",w.onGlobalTap),o.likelyTouchDevice||s.bind(o.scrollWrap,"mouseover",w.onMouseOver)}),e("unbindEvents",function(){k||A(),y&&clearInterval(y),s.unbind(document,"mouseout",P),s.unbind(document,"mousemove",O),s.unbind(l,"pswpTap click",E),s.unbind(o.scrollWrap,"pswpTap",w.onGlobalTap),s.unbind(o.scrollWrap,"mouseover",w.onMouseOver),n&&(s.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)}),e("destroy",function(){g.captionEl&&(a&&l.removeChild(a),s.removeClass(r,"pswp__caption--empty")),c&&(c.children[0].onclick=null),s.removeClass(l,"pswp__ui--over-close"),s.addClass(l,"pswp__ui--hidden"),w.setIdle(!1)}),g.showAnimationDuration||s.removeClass(l,"pswp__ui--hidden"),e("initialZoomIn",function(){g.showAnimationDuration&&s.removeClass(l,"pswp__ui--hidden")}),e("initialZoomOut",function(){s.addClass(l,"pswp__ui--hidden")}),e("parseVerticalMargin",M),function(){var o,r,a,e=function(e){if(e)for(var t=e.length,n=0;n<t;n++){o=e[n],r=o.className;for(var i=0;i<z.length;i++)a=z[i],-1<r.indexOf("pswp__"+a.name)&&(g[a.option]?(s.removeClass(o,"pswp__element--disabled"),a.onInit&&a.onInit(o)):s.addClass(o,"pswp__element--disabled"))}};e(l.children);var t=s.getChildByClass(l,"pswp__top-bar");t&&e(t.children)}(),g.shareEl&&i&&c&&(k=!0),T(),g.timeToIdle&&e("mouseUsed",function(){s.bind(document,"mousemove",O),s.bind(document,"mouseout",P),y=setInterval(function(){2==++j&&w.setIdle(!0)},g.timeToIdle/2)}),g.fullscreenEl&&!s.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(s.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),s.addClass(o.template,"pswp--supports-fs")):s.removeClass(o.template,"pswp--supports-fs")),g.preloaderEl&&(N(!0),e("beforeChange",function(){clearTimeout(h),h=setTimeout(function(){o.currItem&&o.currItem.loading?(!o.allowProgressiveImg()||o.currItem.img&&!o.currItem.img.naturalWidth)&&N(!1):N(!0)},g.loadingIndicatorDelay)}),e("imageLoadComplete",function(e,t){o.currItem===t&&N(!0)}))},w.setIdle=function(e){S(l,"ui--idle",d=e)},w.update=function(){_&&o.currItem?(w.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(o.currItem,r),S(r,"caption--empty",!o.currItem.title)),x=!0):x=!1,k||A(),T()},w.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,s.getScrollY())},50),s[(n.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},w.updateIndexIndicator=function(){g.counterEl&&(t.innerHTML=o.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},w.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!v)if(e.detail&&"mouse"===e.detail.pointerType){if(D(t))return void o.close();s.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?g.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint))}else if(g.tapToToggleControls&&(_?w.hideControls():w.showControls()),g.tapToClose&&(s.hasClass(t,"pswp__img")||D(t)))return void o.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;S(l,"ui--over-close",D(t))},w.hideControls=function(){s.addClass(l,"pswp__ui--hidden"),_=!1},w.showControls=function(){_=!0,x||w.update(),s.removeClass(l,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return u=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?o.template[this.enterK]():void o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return g.closeOnScroll=u,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(h){function m(e){return v.raw?e:encodeURIComponent(e)}function g(e,t){var n=v.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(i," ")),v.json?JSON.parse(e):e}catch(e){}}(e);return h.isFunction(t)?t(n):n}var i=/\+/g,v=h.cookie=function(e,t,n){if(1<arguments.length&&!h.isFunction(t)){if("number"==typeof(n=h.extend({},v.defaults,n)).expires){var i=n.expires,o=n.expires=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*i)}return document.cookie=[m(e),"=",(r=t,m(v.json?JSON.stringify(r):String(r))),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var r,a,s=e?void 0:{},l=document.cookie?document.cookie.split("; "):[],c=0,u=l.length;c<u;c++){var d=l[c].split("="),p=(a=d.shift(),v.raw?a:decodeURIComponent(a)),f=d.join("=");if(e===p){s=g(f,t);break}e||void 0===(f=g(f))||(s[p]=f)}return s};v.defaults={},h.removeCookie=function(e,t){return h.cookie(e,"",h.extend({},t,{expires:-1})),!h.cookie(e)}}),Object.create||(Object.create=function(){function t(){}return function(e){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return t.prototype=e,new t}}()),Object.keys||(Object.keys=function(e,t,n){for(t in n=[],e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=2<=arguments.length?arguments[1]:void 0,o=0;o<n;o++)o in t&&e.call(i,t[o],o,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(i,o){var r=[];return this.forEach(function(e,t,n){i.call(o||void 0,e,t,n)&&r.push(e)}),r}),Array.prototype.map||(Array.prototype.map=function(i,o){var r=[];return this.forEach(function(e,t,n){r.push(i.call(o||void 0,e,t,n))}),r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=[].slice,i=n.call(arguments,1),o=this,r=function(){return o.apply(this instanceof t?this:e||window,i.concat(n.call(arguments)))};return t.prototype=this.prototype,r.prototype=new t,r});var hello=function(e){return hello.use(e)};hello.utils={extend:function(n){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(n instanceof Object&&e instanceof Object&&n!==e)for(var t in e)n[t]=hello.utils.extend(n[t],e[t]);else n=e}),n}},hello.utils.extend(hello,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var n=this.utils;if(!e)return this.services;for(var i in e)e.hasOwnProperty(i)&&"object"!=typeof e[i]&&(e[i]={id:e[i]});for(i in n.extend(this.services,e),this.services)this.services.hasOwnProperty(i)&&(this.services[i].scope=this.services[i].scope||{});return t&&(n.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=n.url(t.redirect_uri).href)),this},login:function(){function e(e,t){hello.emit(e,t)}function t(e){return e}var n,i=this,o=i.utils,r=o.error,a=o.Promise(),s=o.args({network:"s",options:"o",callback:"f"},arguments),l=s.options=o.merge(i.settings,s.options||{});if(s.network=s.network||i.settings.default_service,a.proxy.then(s.callback,s.callback),a.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof s.network||!(s.network in i.services))return a.reject(r("invalid_network","The provided network was not recognized"));var c=i.services[s.network],u=o.globalEvent(function(e){var t;(t=e?JSON.parse(e):r("cancelled","The authentication was not completed")).error?a.reject(t):(o.store(t.network,t),a.fulfill({network:t.network,authResponse:t}))}),d=o.url(l.redirect_uri).href,p=c.oauth.response_type||l.response_type;/\bcode\b/.test(p)&&!c.oauth.grant&&(p=p.replace(/\bcode\b/,"token")),s.qs={client_id:encodeURIComponent(c.id),response_type:encodeURIComponent(p),redirect_uri:encodeURIComponent(d),display:l.display,scope:"basic",state:{client_id:c.id,network:s.network,display:l.display,callback:u,state:l.state,redirect_uri:d}};var f=o.store(s.network),h=(l.scope||"").toString();if((h=(h?h+",":"")+s.qs.scope,f&&"scope"in f&&f.scope instanceof String&&(h+=","+f.scope),s.qs.state.scope=o.unique(h.split(/[,\s]+/)).join(","),s.qs.scope=h.replace(/[^,\s]+/gi,function(e){if(e in c.scope)return c.scope[e];for(var t in i.services){var n=i.services[t].scope;if(n&&e in n)return""}return e}).replace(/[,\s]+/gi,","),s.qs.scope=o.unique(s.qs.scope.split(/,+/)).join(c.scope_delim||","),!1===l.force&&f&&"access_token"in f&&f.access_token&&"expires"in f&&f.expires>(new Date).getTime()/1e3)&&0===o.diff(f.scope||[],s.qs.state.scope||[]).length)return a.fulfill({unchanged:!0,network:s.network,authResponse:f}),a;if("page"===l.display&&l.page_uri&&(s.qs.state.page_uri=o.url(l.page_uri).href),"login"in c&&"function"==typeof c.login&&c.login(s),(!/\btoken\b/.test(p)||parseInt(c.oauth.version,10)<2||"none"===l.display&&c.oauth.grant&&f&&f.refresh_token)&&(s.qs.state.oauth=c.oauth,s.qs.state.oauth_proxy=l.oauth_proxy),s.qs.state=encodeURIComponent(JSON.stringify(s.qs.state)),1===parseInt(c.oauth.version,10)?n=o.qs(l.oauth_proxy,s.qs,t):"none"===l.display&&c.oauth.grant&&f&&f.refresh_token?(s.qs.refresh_token=f.refresh_token,n=o.qs(l.oauth_proxy,s.qs,t)):n=o.qs(c.oauth.auth,s.qs,t),"none"===l.display)o.iframe(n);else if("popup"===l.display)var m=o.popup(n,d,l.window_width||500,l.window_height||550),g=setInterval(function(){if((!m||m.closed)&&(clearInterval(g),!a.state)){var e=r("cancelled","Login has been cancelled");m||(e=r("blocked","Popup was blocked")),e.network=s.network,a.reject(e)}},100);else window.location=n;return a.proxy},logout:function(){function e(e,t){hello.emit(e,t)}var t=this.utils,n=t.error,i=t.Promise(),o=t.args({name:"s",options:"o",callback:"f"},arguments);if(o.options=o.options||{},i.proxy.then(o.callback,o.callback),i.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),o.name=o.name||this.settings.default_service,!o.name||o.name in this.services)if(o.name&&t.store(o.name)){var r=function(e){t.store(o.name,""),i.fulfill(hello.utils.merge({network:o.name},e||{}))},a={};if(o.options.force){var s=this.services[o.name].logout;if(s)if("function"==typeof s&&(s=s(r)),"string"==typeof s)t.iframe(s),a.force=null,a.message="Logout success on providers site was indeterminate";else if(void 0===s)return i.proxy}r(a)}else i.reject(n("invalid_session","There was no session to remove"));else i.reject(n("invalid_network","The network was unrecognized"));return i.proxy},getAuthResponse:function(e){return(e=e||this.settings.default_service)&&e in this.services&&this.utils.store(e)||null},events:{}}),hello.utils.extend(hello.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,n){var i;if(t)for(var o in t){if(-1<e.indexOf(o))i=new RegExp("[\\?\\&]"+o+"=[^\\&]*"),e=e.replace(i,"")}return e+(this.isEmpty(t)?"":(-1<e.indexOf("?")?"&":"?")+this.param(t,n))},param:function(e,t){var n,i,o={};if("string"==typeof e){if(t=t||decodeURIComponent,i=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var r=0;r<i.length;r++)o[(n=i[r].match(/([^=]+)=(.*)/))[1]]=t(n[2]);return o}t=t||encodeURIComponent;var a=e;for(var s in o=[],a)a.hasOwnProperty(s)&&a.hasOwnProperty(s)&&o.push([s,"?"===a[s]?"?":t(a[s])].join("="));return o.join("&")},store:function(r){var t=[r,window.sessionStorage],n=0;for(r=t[n++];r;)try{r.setItem(n,n),r.removeItem(n);break}catch(e){r=t[n++]}return r||(r={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].replace(/(^\s+|\s+$)/,"");if(i&&0===i.indexOf(e))return i.substr(e.length)}return null},setItem:function(e,t){document.cookie=e+"="+t}}),function(t,e,n){var i,o=function(){var e={};try{e=JSON.parse(r.getItem("hello"))||{}}catch(e){}return e}();if(t&&void 0===e)return o[t]||null;if(t&&null===e)try{delete o[t]}catch(e){o[t]=null}else{if(!t)return o;o[t]=e}return i=o,r.setItem("hello",JSON.stringify(i)),o||null}}(window.localStorage),append:function(e,t,n){var i="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)n=t;else for(var o in t)if(t.hasOwnProperty(o))if("object"==typeof t[o])for(var r in t[o])t[o].hasOwnProperty(r)&&(i[o][r]=t[o][r]);else"html"===o?i.innerHTML=t[o]:/^on/.test(o)?i[o]=t[o]:i.setAttribute(o,t[o]);return"body"===n?function e(){document.body?document.body.appendChild(i):setTimeout(e,16)}():"object"==typeof n?n.appendChild(i):"string"==typeof n&&document.getElementsByTagName(n)[0].appendChild(i),i},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var n={},i=0,o=null,r=null;for(r in e)if(e.hasOwnProperty(r))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[r])for(r in t[0])if(e.hasOwnProperty(r)&&r in e)return t[0];for(r in e)if(e.hasOwnProperty(r))if(o=typeof t[i],"function"==typeof e[r]&&e[r].test(t[i])||"string"==typeof e[r]&&(-1<e[r].indexOf("s")&&"string"===o||-1<e[r].indexOf("o")&&"object"===o||-1<e[r].indexOf("i")&&"number"===o||-1<e[r].indexOf("a")&&"object"===o||-1<e[r].indexOf("f")&&"function"===o))n[r]=t[i++];else if("string"==typeof e[r]&&-1<e[r].indexOf("!"))return!1;return n},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t}return window.location},diff:function(t,e){return e.filter(function(e){return-1===t.indexOf(e)})},unique:function(n){return Array.isArray(n)?n.filter(function(e,t){return n.indexOf(e)===t}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Promise:function(){var i=function(e){return this instanceof i?(this.id="Thenable/1.0.6",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new i(e)};i.prototype={fulfill:function(e){return t(this,1,"fulfillValue",e)},reject:function(e){return t(this,2,"rejectReason",e)},then:function(e,t){var n=new i;return this.onFulfilled.push(r(e,n,"fulfill")),this.onRejected.push(r(t,n,"reject")),o(this),n.proxy}};var t=function(e,t,n,i){return 0===e.state&&(e.state=t,e[n]=i,o(e)),e},o=function(e){1===e.state?n(e,"onFulfilled",e.fulfillValue):2===e.state&&n(e,"onRejected",e.rejectReason)},n=function(e,t,n){if(0!==e[t].length){var i=e[t];e[t]=[];var o=function(){for(var e=0;e<i.length;e++)i[e](n)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(o):"function"==typeof setImmediate?setImmediate(o):setTimeout(o,0)}},r=function(n,i,o){return function(e){if("function"!=typeof n)i[o].call(i,e);else{var t;try{t=n(e)}catch(e){return void i.reject(e)}a(i,t)}}},a=function(t,n){if(t!==n&&t.proxy!==n){var e;if("object"==typeof n&&null!==n||"function"==typeof n)try{e=n.then}catch(e){return void t.reject(e)}if("function"!=typeof e)t.fulfill(n);else{var i=!1;try{e.call(n,function(e){i||(i=!0,e===n?t.reject(new TypeError("circular thenable chain")):a(t,e))},function(e){i||(i=!0,t.reject(e))})}catch(e){i||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};return i}(),Event:function(){var r=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(e,t){if(t&&"function"==typeof t)for(var n=e.split(r),i=0;i<n.length;i++)this.events[n[i]]=[t].concat(this.events[n[i]]||[]);return this},this.off=function(e,n){return this.findEvents(e,function(e,t){n&&this.events[e][t]!==n||(this.events[e][t]=null)}),this},this.emit=function(n){var i=Array.prototype.slice.call(arguments,1);i.push(n);for(var e=function(e,t){i[i.length-1]="*"===e?n:e,this.events[e][t].apply(this,i)},t=this;t&&t.findEvents;)t.findEvents(n+",*",e),t=t.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(e,t){var n=e.split(r);for(var i in this.events)if(this.events.hasOwnProperty(i)&&-1<n.indexOf(i))for(var o=0;o<this.events[i].length;o++)this.events[i][o]&&t.call(this,i,o)},this},globalEvent:function(t,n){return n=n||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[n]=function(){var e;try{e=t.apply(this,arguments)}catch(e){console.error(e)}if(e)try{delete window[n]}catch(e){}},n},popup:function(e,n,i,a){var t=document.documentElement,o=void 0!==window.screenLeft?window.screenLeft:screen.left,r=void 0!==window.screenTop?window.screenTop:screen.top,s=window.innerWidth||t.clientWidth||screen.width,l=window.innerHeight||t.clientHeight||screen.height,c=(s-i)/2+o,u=(l-a)/2+r,d=function(e){var o=window.open(e,"_blank","resizeable=true,scrollbars,height="+a+",width="+i+",left="+c+",top="+u);if(o&&o.addEventListener){var t=hello.utils.url(n),r=t.origin||t.protocol+"//"+t.hostname;o.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(r)){var n=hello.utils.url(t),i={location:{assign:function(e){o.addEventListener("exit",function(){setTimeout(function(){d(e)},1e3)})},search:n.search,hash:n.hash,href:n.href},close:function(){o.close&&o.close()}};hello.utils.responseHandler(i,window),i.close()}})}return o&&o.focus&&o.focus(),o};return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(e=n+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e))),d(e)},responseHandler:function(e,t){function n(e,t,n){if(a.store(e.network,e),!("display"in e&&"page"===e.display)){if(n){var i=e.callback;try{delete e.callback}catch(e){}if(a.store(e.network,e),i in n){var o=JSON.stringify(e);try{n[i](o)}catch(e){}}}r()}}function r(){try{e.close()}catch(e){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}var i,a=this,o=e.location;if((i=a.param(o.search))&&(i.code&&i.state||i.oauth_token&&i.proxy_url)){var s=JSON.parse(i.state);i.redirect_uri=s.redirect_uri||o.href.replace(/[\?\#].*$/,"");var l=(s.oauth_proxy||i.proxy_url)+"?"+a.param(i);o.assign(l)}else if((i=a.merge(a.param(o.search||""),a.param(o.hash||"")))&&"state"in i){try{var c=JSON.parse(i.state);a.extend(i,c)}catch(e){console.error("Could not decode state parameter")}if("access_token"in i&&i.access_token&&i.network)i.expires_in&&0!==parseInt(i.expires_in,10)||(i.expires_in=0),i.expires_in=parseInt(i.expires_in,10),i.expires=(new Date).getTime()/1e3+(i.expires_in||31536e3),n(i,0,t);else if("error"in i&&i.error&&i.network)i.error={code:i.error,message:i.error_message||i.error_description},n(i,0,t);else if(i.callback&&i.callback in t){var u=!!("result"in i&&i.result)&&JSON.parse(i.result);t[i.callback](u),r()}i.page_uri&&o.assign(i.page_uri)}else if("oauth_redirect"in i)return void o.assign(decodeURIComponent(i.oauth_redirect))}}),hello.utils.Event.call(hello),hello.utils.responseHandler(window,window.opener||window.parent),function(c){var u={},d={};c.on("auth.login, auth.logout",function(e){e&&"object"==typeof e&&e.network&&(u[e.network]=c.utils.store(e.network)||{})}),function e(){var t=(new Date).getTime()/1e3,n=function(e){c.emit("auth."+e,{network:i,authResponse:o})};for(var i in c.services)if(c.services.hasOwnProperty(i)){if(!c.services[i].id)continue;var o=c.utils.store(i)||{},r=c.services[i],a=u[i]||{};if(o&&"callback"in o){var s=o.callback;try{delete o.callback}catch(e){}c.utils.store(i,o);try{window[s](o)}catch(e){}}if(o&&"expires"in o&&o.expires<t){var l=r.refresh||o.refresh_token;!l||i in d&&!(d[i]<t)?l||i in d||(n("expired"),d[i]=!0):(c.emit("notice",i+" has expired trying to resignin"),c.login(i,{display:"none",force:!1}),d[i]=t+600);continue}if(a.access_token===o.access_token&&a.expires===o.expires)continue;!o.access_token&&a.access_token?n("logout"):o.access_token&&!a.access_token?n("login"):o.expires!==a.expires&&n("update"),u[i]=o,i in d&&delete d[i]}setTimeout(e,1e3)}()}(hello),hello.api=function(){function e(e){(e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,n){var i=n?n.replace(/^\|/,""):"";return t in s.query?(i=s.query[t],delete s.query[t]):n||a.reject(r("missing_attribute","The attribute "+t+" is missing from the request")),i})).match(/^https?:\/\//)||(e=c.base+e),s.url=e,o.request(s,function(e,t){if(!0===e?e={success:!0}:e||(e={}),"delete"===s.method&&(e=!e||o.isEmpty(e)?{success:!0}:e),c.wrap&&(s.path in c.wrap||"default"in c.wrap)){var n=s.path in c.wrap?s.path:"default",i=((new Date).getTime(),c.wrap[n](e,t,s));i&&(e=i)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=s.path+e.paging.next:e.paging.next+="#"+s.path),!e||"error"in e?a.reject(e):a.fulfill(e)})}var t=this,o=t.utils,r=o.error,a=o.Promise(),s=o.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);s.method=(s.method||"get").toLowerCase(),s.headers=s.headers||{},s.query=s.query||{},("get"===s.method||"delete"===s.method)&&(o.extend(s.query,s.data),s.data={});var n=s.data=s.data||{};if(a.then(s.callback,s.callback),!s.path)return a.reject(r("invalid_path","Missing the path parameter from the request"));s.path=s.path.replace(/^\/+/,"");var i=(s.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(i in t.services){s.network=i;var l=new RegExp("^"+i+":?/?");s.path=s.path.replace(l,"")}s.network=t.settings.default_service=s.network||t.settings.default_service;var c=t.services[s.network];if(!c)return a.reject(r("invalid_network","Could not match the service requested: "+s.network));if(s.method in c&&s.path in c[s.method]&&!1===c[s.method][s.path])return a.reject(r("invalid_path","The provided path is not available on the selected network"));s.oauth_proxy||(s.oauth_proxy=t.settings.oauth_proxy),"proxy"in s||(s.proxy=s.oauth_proxy&&c.oauth&&1===parseInt(c.oauth.version,10)),"timeout"in s||(s.timeout=t.settings.timeout);var u=t.getAuthResponse(s.network);u&&u.access_token&&(s.query.access_token=u.access_token);var d,p=s.path;s.options=o.clone(s.query),s.data=o.clone(n);var f=c[{delete:"del"}[s.method]||s.method]||{};if("get"===s.method){var h=p.split(/[\?#]/)[1];h&&(o.extend(s.query,o.param(h)),p=p.replace(/\?.*?(#|$)/,"$1"))}return(d=p.match(/#(.+)/,""))?(p=p.split("#")[0],s.path=d[1]):p in f?p=f[s.path=p]:"default"in f&&(p=f.default),s.redirect_uri=t.settings.redirect_uri,s.oauth=c.oauth,s.xhr=c.xhr,s.jsonp=c.jsonp,s.form=c.form,"function"==typeof p?p(s,e):e(p),a.proxy},hello.utils.extend(hello.utils,{request:function(n,i){function e(e,t){var n;e.oauth&&1===parseInt(e.oauth.version,10)&&(n=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(o.extend(e.query,e.data),e.data=null);var i=o.qs(e.url,e.query);e.proxy&&(i=o.qs(e.oauth_proxy,{path:i,access_token:n||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(i)}var o=this,t=o.error;if(o.isEmpty(n.data)||"FileList"in window||!o.hasBinary(n.data)||(n.xhr=!1,n.jsonp=!1),!("withCredentials"in new XMLHttpRequest)||"xhr"in n&&(!n.xhr||"function"==typeof n.xhr&&!n.xhr(n,n.query))){var r,a=n.query;if(n.query=o.clone(n.query),n.callbackID=o.globalEvent(),!1!==n.jsonp){if(n.query.callback=n.callbackID,"function"==typeof n.jsonp&&n.jsonp(n,n.query),"get"===n.method)return void e(n,function(e){o.jsonp(e,i,n.callbackID,n.timeout)});n.query=a}if(!1!==n.form)if(n.query.redirect_uri=n.redirect_uri,n.query.state=JSON.stringify({callback:n.callbackID}),"function"==typeof n.form&&(r=n.form(n,n.query)),"post"===n.method&&!1!==r)return void e(n,function(e){o.post(e,n.data,r,i,n.callbackID,n.timeout)});i(t("invalid_request","There was no mechanism for handling this request"))}else e(n,function(e){var t=o.xhr(n.method,e,n.headers,n.data,i);t.onprogress=n.onprogress||null,t.upload&&n.onuploadprogress&&(t.upload.onprogress=n.onuploadprogress)})},domInstance:function(e,t){var n="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return!!t&&(window[n]?t instanceof window[n]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e)},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e))return e;if(Array.isArray(e))return e.map(this.clone);var t={};for(var n in e)t[n]=this.clone(e[n]);return t},xhr:function(i,e,t,n,o){var r,a=new XMLHttpRequest,s=this.error,l=!1;if("blob"===i&&(l=i,i="GET"),i=i.toUpperCase(),a.onload=function(e){var t=a.response;try{t=JSON.parse(a.responseText)}catch(e){401===a.status&&(t=s("access_denied",a.statusText))}var n=function(e){for(var t,n={},i=/([a-z\-]+):\s?(.*);?/gi;t=i.exec(e);)n[t[1]]=t[2];return n}(a.getAllResponseHeaders());n.statusCode=a.status,o(t||("GET"===i?s("empty_response","Could not get resource"):{}),n)},a.onerror=function(e){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(e){}o(t||s("access_denied","Could not get resource"))},"GET"===i||"DELETE"===i)n=null;else if(!(!n||"string"==typeof n||n instanceof FormData||n instanceof File||n instanceof Blob)){var c=new FormData;for(r in n)n.hasOwnProperty(r)&&(n[r]instanceof HTMLInputElement?"files"in n[r]&&0<n[r].files.length&&c.append(r,n[r].files[0]):n[r]instanceof Blob?c.append(r,n[r],n.name):c.append(r,n[r]));n=c}if(a.open(i,e,!0),l&&("responseType"in a?a.responseType=l:a.overrideMimeType("text/plain; charset=x-user-defined")),t)for(r in t)a.setRequestHeader(r,t[r]);return a.send(n),a},jsonp:function(e,t,n,i){var o,r=this.error,a=0,s=document.getElementsByTagName("head")[0],l=r("server_error","server_error"),c=function(){a++||window.setTimeout(function(){t(l),s.removeChild(u)},0)};n=this.globalEvent(function(e){return l=e,!0},n),e=e.replace(new RegExp("=\\?(&|$)"),"="+n+"$1");var u=this.append("script",{id:n,name:n,src:e,async:!0,onload:c,onerror:c,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&c()}});-1<window.navigator.userAgent.toLowerCase().indexOf("opera")&&(o=this.append("script",{text:"document.getElementById('"+callbackId+"').onerror();"}),u.async=!1),i&&window.setTimeout(function(){l=r("timeout","timeout"),c()},i),s.appendChild(u),o&&s.appendChild(o)},post:function(e,t,n,i,o,r){var a,s,l=this,c=l.error,u=document,d=null,p=[],f=0,h=null,m=0,g=function(e){m++||i(e)};l.globalEvent(g,o);try{s=u.createElement('<iframe name="'+o+'">')}catch(e){s=u.createElement("iframe")}if(s.name=o,s.id=o,s.style.display="none",n&&n.callbackonload&&(s.onload=function(){g({response:"posted",message:"Content was posted"})}),r&&setTimeout(function(){g(c("timeout","The post operation timed out"))},r),u.body.appendChild(s),l.domInstance("form",t)){for(d=t.form,f=0;f<d.elements.length;f++)d.elements[f]!==t&&d.elements[f].setAttribute("disabled",!0);t=d}if(l.domInstance("form",t))for(d=t,f=0;f<d.elements.length;f++)d.elements[f].disabled||"file"!==d.elements[f].type||(d.encoding=d.enctype="multipart/form-data",d.elements[f].setAttribute("name","file"));else{for(h in t)t.hasOwnProperty(h)&&l.domInstance("input",t[h])&&"file"===t[h].type&&((d=t[h].form).encoding=d.enctype="multipart/form-data");var v;for(h in d||(d=u.createElement("form"),u.body.appendChild(d),a=d),t)if(t.hasOwnProperty(h)){var y=l.domInstance("input",t[h])||l.domInstance("textArea",t[h])||l.domInstance("select",t[h]);if(y&&t[h].form===d)y&&t[h].name!==h&&(t[h].setAttribute("name",h),t[h].name=h);else{var b=d.elements[h];if(v)for(b instanceof NodeList||(b=[b]),f=0;f<b.length;f++)b[f].parentNode.removeChild(b[f]);(v=u.createElement("input")).setAttribute("type","hidden"),v.setAttribute("name",h),v.value=y?t[h].value:l.domInstance(null,t[h])?t[h].innerHTML||t[h].innerText:t[h],d.appendChild(v)}}for(f=0;f<d.elements.length;f++)(v=d.elements[f]).name in t||!0===v.getAttribute("disabled")||(v.setAttribute("disabled",!0),p.push(v))}d.setAttribute("method","POST"),d.setAttribute("target",o),d.target=o,d.setAttribute("action",e),setTimeout(function(){d.submit(),setTimeout(function(){try{a&&a.parentNode.removeChild(a)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(e){}}for(var e=0;e<p.length;e++)p[e]&&(p[e].setAttribute("disabled",!1),p[e].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,n=e.match(t);if(!n)return e;for(var i=atob(e.replace(t,"")),o=[],r=0;r<i.length;r++)o.push(i.charCodeAt(r));return new Blob([new Uint8Array(o)],{type:n[1]})}}),function(e){var t=e.api,n=e.utils;n.extend(n,{dataToJSON:function(e){var t=this,n=window,i=e.data;if(t.domInstance("form",i)?i=t.nodeListToJSON(i.elements):"NodeList"in n&&i instanceof NodeList?i=t.nodeListToJSON(i):t.domInstance("input",i)&&(i=t.nodeListToJSON([i])),("File"in n&&i instanceof n.File||"Blob"in n&&i instanceof n.Blob||"FileList"in n&&i instanceof n.FileList)&&(i={file:i}),!("FormData"in n&&i instanceof n.FormData))for(var o in i)if(i.hasOwnProperty(o))if("FileList"in n&&i[o]instanceof n.FileList)1===i[o].length&&(i[o]=i[o][0]);else{if(t.domInstance("input",i[o])&&"file"===i[o].type)continue;t.domInstance("input",i[o])||t.domInstance("select",i[o])||t.domInstance("textArea",i[o])?i[o]=i[o].value:t.domInstance(null,i[o])&&(i[o]=i[o].innerHTML||i[o].innerText)}return e.data=i},nodeListToJSON:function(e){for(var t={},n=0;n<e.length;n++){var i=e[n];!i.disabled&&i.name&&(t[i.name]="file"===i.type?i:i.value||i.innerHTML)}return t}}),e.api=function(){var e=n.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&n.dataToJSON(e),t.call(this,e)}}(hello),function(o){function i(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function r(e,t,n){if(!("object"!=typeof e||"undefined"!=typeof Blob&&e instanceof Blob||"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"error"in e)){var i=e.root+e.path.replace(/\&/g,"%26");e.thumb_exists&&(e.thumbnail=o.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/"+i+"?format=jpeg&size=m")+"&access_token="+n.query.access_token),e.type=e.is_dir?"folder":e.mime_type,e.name=e.path.replace(/.*\//g,""),e.is_dir?e.files="metadata/"+i:(e.downloadLink=o.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/"+i)+"&access_token="+n.query.access_token,e.file="https://api-content.dropbox.com/1/files/"+i),e.id||(e.id=e.path.replace(/^\//,""))}}function e(n){return function(e,t){delete e.query.limit,t(n)}}o.init({dropbox:{name:"Dropbox",oauth:{version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},login:function(e){e.options.window_width=1e3,e.options.window_height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":e("metadata/@{root|sandbox}/@{parent}"),"me/folder":e("metadata/@{root|sandbox}/@{id}"),"me/folders":e("metadata/@{root|sandbox}/"),default:function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(e,t){var n=e.data.parent,i=e.data.name;e.data={file:e.data.file},"string"==typeof e.data.file&&(e.data.file=o.utils.toBlob(e.data.file)),t("https://api-content.dropbox.com/1/files_put/@{root|sandbox}/"+n+"/"+i)},"me/folders":function(e,t){var n=e.data.name;e.data={},t("fileops/create_folder?root=@{root|sandbox}&"+o.utils.param({path:n}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(i(e),!e.uid)return e;e.name=e.display_name;var t=e.name.split(" ");return e.first_name=t.shift(),e.last_name=t.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},default:function(t,e,n){return i(t),t.is_dir&&t.contents&&(t.data=t.contents,delete t.contents,t.data.forEach(function(e){e.root=t.root,r(e,0,n)})),r(t,0,n),t.is_deleted&&(t.success=!0),t}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(e.data=t.files?t.files[0]:t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(hello),function(o){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function e(e){return"data"in e&&e.data.forEach(t),e}function n(e,t,n){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var i=n.query.access_token;e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&(e.thumbnail=r+e.cover_photo+"/picture?access_token="+i),"album"===e.type&&(e.files=e.photos=r+e.id+"/photos"),e.can_upload&&(e.upload_location=r+e.id+"/photos")})}return e}o.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},refresh:!0,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.options.auth_type&&(e.qs.auth_type=e.options.auth_type),e.options.window_width=580,e.options.window_height=400},logout:function(e){var t=o.utils.globalEvent(e),n=encodeURIComponent(o.settings.redirect_uri+"?"+o.utils.param({callback:t,result:JSON.stringify({force:!0}),state:"{}"})),i=(o.utils.store("facebook")||{}).access_token;return o.utils.iframe("https://www.facebook.com/logout.php?next="+n+"&access_token="+i),!!i&&void 0},base:"https://graph.facebook.com/",get:{me:"me","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums","me/album":"@{id}/photos","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":e,"me/following":e,"me/followers":e,"me/albums":n,"me/photos":n,"me/files":n,default:n},xhr:function(e,t){return("get"===e.method||"post"===e.method)&&(t.suppress_response_codes=!0),"post"===e.method&&e.data&&"string"==typeof e.data.file&&(e.data.file=o.utils.toBlob(e.data.file)),!0},jsonp:function(e,t){var n=e.method;"get"===n||o.utils.hasBinary(e.data)?"delete"===e.method&&(t.method="delete",e.method="post"):(e.data.method=n,e.method="get")},form:function(e){return{callbackonload:!0}}}});var r="https://graph.facebook.com/"}(hello),function(a){function s(e,t,n){var i=(n?"":"flickr:")+"?method="+e+"&api_key="+a.services.flickr.id+"&format=json";for(var o in t)t.hasOwnProperty(o)&&(i+="&"+o+"="+t[o]);return i}function e(o,r){return r||(r={}),function(e,t){var n,i;n=function(e){r.user_id=e,t(s(o,r,!0))},i=a.getAuthResponse("flickr"),n(i&&i.user_nsid?i.user_nsid:null)}}function i(e,t){var n="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(n="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),n}function r(e,t,n,i,o){return"https://farm"+t+".staticflickr.com/"+n+"/"+e+"_"+i+(o=o?"_"+o:"")+".jpg"}function o(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function t(e){if(e.photoset||e.photos){u(e=c(e,"photoset"in e?"photoset":"photos")),e.data=e.photo,delete e.photo;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.name=n.title,n.picture=r(n.id,n.farm,n.server,n.secret,""),n.pictures=l(n.id,n.farm,n.server,n.secret),n.source=r(n.id,n.farm,n.server,n.secret,"b"),n.thumbnail=r(n.id,n.farm,n.server,n.secret,"m")}}return e}function l(t,n,i,o){return[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:2048}].map(function(e){return{source:r(t,n,i,o,e.id),width:e.max,height:e.max}})}function c(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function n(e){if(o(e),e.contacts){u(e=c(e,"contacts")),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.id=n.nsid,n.name=n.realname||n.username,n.thumbnail=i(n,"m")}}return e}function u(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}a.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:e("flickr.people.getInfo"),"me/friends":e("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":e("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":e("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":e("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":e("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":e("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(o(e),(e=c(e,"person")).id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=i(e,"l"),e.picture=i(e,"l")}return e},"me/friends":n,"me/followers":n,"me/following":n,"me/albums":function(e){return o(e),u(e=c(e,"photosets")),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+s("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return o(e),t(e)},default:function(e){return o(e),t(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(hello),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function n(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function i(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t.v=20121125,!0}hello.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&n(e=e.response.user),e},default:function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(n),delete e.response),e}},xhr:i,jsonp:i}})}(),function(e){function i(e,t){var n=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;(401===n||403===n)&&(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function o(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}hello.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{basic:"",email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,t){return i(e,t),o(e),e},default:function(e,t,n){return i(e,t),Array.isArray(e)&&(e={data:e}),e.data&&(function(e,t,n){if(e.data&&e.data.length&&t&&t.Link){var i=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);i&&(e.paging={next:i[1]})}}(e,t),e.data.forEach(o)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(),function(e){function i(e){return parseInt(e,10)}function t(e){return l(e),e.data=e.items,delete e.items,e}function n(e){return e.error?void 0:(e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents"),e)}function u(e){return{source:e.url,width:e.width,height:e.height}}function o(e){if(l(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(s),delete e.feed;else{if("entry"in e)return s(e.entry);"items"in e?(e.data=e.items.map(n),delete e.items):n(e)}return e}function r(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function a(e,t,n){if(l(e),"feed"in e&&"entry"in e.feed){for(var i=n.query.access_token,o=0;o<e.feed.entry.length;o++){var r=e.feed.entry[o];if(r.id=r.id.$t,r.name=r.title.$t,delete r.title,r.gd$email&&(r.email=r.gd$email&&0<r.gd$email.length?r.gd$email[0].address:null,r.emails=r.gd$email,delete r.gd$email),r.updated&&(r.updated=r.updated.$t),r.link){var a=0<r.link.length?r.link[0].href:null;a&&r.link[0].gd$etag&&(a+=(-1<a.indexOf("?")?"&":"?")+"access_token="+i,r.picture=a,r.thumbnail=a),delete r.link}r.category&&delete r.category}e.data=e.feed.entry,delete e.feed}return e}function s(e){var t,n=e.media$group,i=n.media$content.length?n.media$content[0]:{},o=n.media$content||[],r=n.media$thumbnail||[],a=o.concat(r).map(u).sort(function(e,t){return e.width-t.width}),s=0,l={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:i?i.url:null,pictures:a,images:[],thumbnail:i?i.url:null,width:i.width,height:i.height};if("link"in e)for(s=0;s<e.link.length;s++){var c=e.link[s];if(c.rel.match(/\#feed$/)){l.upload_location=l.files=l.photos=c.href;break}}if("category"in e&&e.category.length)for(t=e.category,s=0;s<t.length;s++)t[s].scheme&&t[s].scheme.match(/\#kind$/)&&(l.type=t[s].term.replace(/^.*?\#/,""));return"media$thumbnail"in n&&n.media$thumbnail.length&&(t=n.media$thumbnail,l.thumbnail=t[0].url,l.images=t.map(u)),(t=n.media$content)&&t.length&&l.images.push(u(t[0])),l}function l(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var t=i(e.feed.openSearch$itemsPerPage.$t),n=i(e.feed.openSearch$startIndex.$t);n+t<i(e.feed.openSearch$totalResults.$t)&&(e.paging={next:"?start="+(n+t)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function c(n,i){var e,o={};if(n.data&&"undefined"!=typeof HTMLInputElement&&n.data instanceof HTMLInputElement&&(n.data={file:n.data}),!n.data.name&&Object(Object(n.data.file).files).length&&"post"===n.method&&(n.data.name=n.data.file.files[0].name),"post"===n.method?n.data={title:n.data.name,parents:[{id:n.data.parent||"root"}],file:n.data.file}:(o=n.data,n.data={},o.parent&&(n.data.parents=[{id:n.data.parent||"root"}]),o.file&&(n.data.file=o.file),o.name&&(n.data.title=o.name)),"file"in n.data&&(e=n.data.file,delete n.data.file,"object"==typeof e&&"files"in e&&(e=e.files),!e||!e.length))i({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});else{var t=new function(){function r(t){var e=new FileReader;e.onload=function(e){a(btoa(e.target.result),t.type+l+"Content-Transfer-Encoding: base64")},e.readAsBinaryString(t)}function a(e,t){n.push(l+"Content-Type: "+t+l+l+e),s--,o()}var n=[],t=(1e10*Math.random()).toString(32),s=0,l="\r\n",i=l+"--"+t,o=function(){},c=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(e,t){"string"!=typeof e&&"length"in Object(e)||(e=[e]);for(var n=0;n<e.length;n++){s++;var i=e[n];if("undefined"!=typeof File&&i instanceof File||"undefined"!=typeof Blob&&i instanceof Blob)r(i);else if("string"==typeof i&&i.match(c)){var o=i.match(c);a(i.replace(c,""),o[1]+l+"Content-Transfer-Encoding: base64")}else a(i,t)}},this.onready=function(e){(o=function(){0===s&&(n.unshift(""),n.push("--"),e(n.join(i),t),n=[])})()}};t.append(JSON.stringify(n.data),"application/json"),e&&t.append(e),t.onready(function(e,t){n.headers["content-type"]='multipart/related; boundary="'+t+'"',n.data=e,i("upload/drive/v2/files"+(o.id?"/"+o.id:"")+"?uploadType=multipart")})}}var d="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";hello.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"none"===e.qs.display&&(e.qs.display=""),"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":d,"me/followers":d,"me/contacts":d,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var n=e.query.id;delete e.query.id,t(n.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":c,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files")}},put:{"me/files":c},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),r(e)),e},"me/friends":function(e){return e.items&&(l(e),e.data=e.items,e.data.forEach(r),delete e.items),e},"me/contacts":a,"me/followers":a,"me/following":a,"me/share":t,"me/feed":t,"me/albums":o,"me/photos":function(e){e.data=e.feed.entry.map(s),delete e.feed},default:o},xhr:function(e){return("post"===e.method||"put"===e.method)&&function(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(e){}}(e),!0},form:!1}})}(),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function n(e){return o(e),e&&"data"in e&&e.data.forEach(i),e}function i(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function o(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}hello.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",friends:"relationships",publish:"likes comments"},scope_delim:" ",login:function(e){e.qs.display=""},base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var n=e.data.id;e.data={},t("media/"+n+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return t(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":n,"me/following":n,"me/followers":n,"me/photos":function(e){return t(e),o(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(i){i.name=i.caption?i.caption.text:null,i.thumbnail=i.images.thumbnail.url,i.picture=i.images.standard_resolution.url,i.pictures=Object.keys(i.images).map(function(e){var t,n=i.images[e];return{source:(t=n).url,width:t.width,height:t.height}}).sort(function(e,t){return e.width-t.width})})),e},default:function(e){return o(e),e}},xhr:function(e,t){var n=e.method,i="get"!==n;return i&&("post"!==n&&"put"!==n||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=i),i},form:!1}})}(),function(e){function o(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function t(e){return e.error?void 0:(e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e)}function n(e){return o(e),r(e),e.values&&(e.data=e.values.map(t),delete e.values),e}function r(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function i(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function a(e,t){e.headers["x-li-format"]="json";var n=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+n+"/is-liked")}hello.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",friends:"r_network",publish:"rw_nus"},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/friends":"people/~/connections?count=@{limit|500}","me/followers":"people/~/connections?count=@{limit|500}","me/following":"people/~/connections?count=@{limit|500}","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var n={visibility:{code:"anyone"}};e.data.id?n.attribution={share:{id:e.data.id}}:(n.comment=e.data.message,e.data.picture&&e.data.link&&(n.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(n),t("people/~/shares?format=json")},"me/like":a},del:{"me/like":a},wrap:{me:function(e){return o(e),t(e),e},"me/friends":n,"me/following":n,"me/followers":n,"me/share":function(e){return o(e),r(e),e.values&&(e.data=e.values.map(t),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},default:function(e,t){var n,i;o(e),n=e,i=t,"{}"===JSON.stringify(n)&&200===i.statusCode&&(n.success=!0),r(e)}},jsonp:function(e,t){i(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method&&(i(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0)}}})}(),function(e){function t(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t["_status_code_map[302]"]=200,!0}function n(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}hello.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json",default:function(e,t){t(e.path+".json")}},wrap:{me:function(e){return n(e),e},default:function(e){return Array.isArray(e)&&(e={data:e.map(n)}),"next_href"in(t=e)&&(t.paging={next:t.next_href}),e;var t}},xhr:t,jsonp:t}})}(),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function n(e){return i(e),o(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function i(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function o(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}var r="https://api.twitter.com/";hello.init({twitter:{oauth:{version:"1.0a",auth:r+"oauth/authenticate",request:r+"oauth/request_token",token:r+"oauth/access_token"},login:function(e){var t="?force_login=true";this.oauth.auth=this.oauth.auth.replace(t,"")+(e.options.force?t:"")},base:r+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(e,t){var n=e.data;e.data=null,n.file?(e.data={status:n.message,"media[]":n.file},t("statuses/update_with_media.json")):t(n.id?"statuses/retweet/"+n.id+".json":"statuses/update.json?include_entities=1&status="+n.message)},"me/like":function(e,t){var n=e.data.id;e.data=null,t("favorites/create.json?id="+n)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return i(e),t(e),e},"me/friends":n,"me/followers":n,"me/following":n,"me/share":function(e){return i(e),o(e),!e.error&&"length"in e?{data:e}:e},default:function(e){return t=e,o(e=Array.isArray(t)?{data:t}:t),e;var t}},xhr:function(e){return"get"!==e.method}}})}(),function(t){function e(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(n).sort(function(e,t){return e.width-t.width}))}),e}function n(e){return{width:e.width,height:e.height,source:e.source}}function i(e,t,n){if(e.id){var i=n.query.access_token;if(e.emails&&(e.email=e.emails.preferred),!1!==e.is_friend){var o=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+o+"/picture?access_token="+i}}return e}function o(e,t,n){return"data"in e&&e.data.forEach(function(e){i(e,0,n)}),e}t.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive/}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:i,"me/friends":o,"me/contacts":o,"me/followers":o,"me/following":o,"me/albums":function(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e},"me/photos":e,default:e},xhr:function(e){return"get"===e.method||"delete"===e.method||t.utils.hasBinary(e.data)||("string"==typeof e.data.file?e.data.file=t.utils.toBlob(e.data.file):(e.data=JSON.stringify(e.data),e.headers={"Content-Type":"application/json"})),!0},jsonp:function(e){"get"===e.method||t.utils.hasBinary(e.data)||(e.data.method=e.method,e.method="get")}}})}(hello),function(e){function i(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function t(e,t,n){return i(e),r(e,t,n),e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(o)),e}function o(t){t.id=null,t.fields.forEach(function(e){"email"===e.type&&(t.email=e.value),"name"===e.type&&(t.first_name=e.value.givenName,t.last_name=e.value.familyName,t.name=e.value.givenName+" "+e.value.familyName),"yahooid"===e.type&&(t.id=e.value)})}function r(e,t,n){e.query&&e.query.count&&n.options&&(e.paging={next:"?start="+(e.query.count+(+n.options.start||1))})}function n(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}hello.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.window_width=560;try{delete e.qs.state.scope}catch(e){}},base:"https://social.yahooapis.com/v1/",get:{me:n("select * from social.profile(0) where guid=me"),"me/friends":n("select * from social.contacts(0) where guid=me"),"me/following":n("select * from social.contacts(0) where guid=me")},wrap:{me:function(e){if(i(e),e.query&&e.query.results&&e.query.results.profile){(e=e.query.results.profile).id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var t=[];e.first_name&&t.push(e.first_name),e.last_name&&t.push(e.last_name),e.name=t.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e},"me/friends":t,"me/following":t,default:function(e){return r(e),e}}}})}(),"function"==typeof define&&define.amd&&define(function(){return hello}),"object"==typeof module&&module.exports&&(module.exports=hello),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(x){function c(e){return"function"==typeof e}function _(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return null!=e&&"object"==typeof e&&t in e}function k(e){return t=o,n=e,!i.call(t,n);var t,n}function C(e){this.string=e,this.tail=e,this.pos=0}function r(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.cache={}}var t=Object.prototype.toString,E=Array.isArray||function(e){return"[object Array]"===t.call(e)},i=RegExp.prototype.test,o=/\S/,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},S=/\s*/,T=/\s+/,I=/\s*=/,A=/\s*\}/,$=/#|\^|\/|>|\{|&|=|!/;C.prototype.eos=function(){return""===this.tail},C.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},C.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},r.prototype.push=function(e){return new r(e,this)},r.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var i,o,r=this,a=!1;r;){if(0<e.indexOf("."))for(t=r.view,i=e.split("."),o=0;null!=t&&o<i.length;)o===i.length-1&&(a=s(t,i[o])),t=t[i[o++]];else t=r.view[e],a=s(r.view,e);if(a)break;r=r.parent}n[e]=t}return c(t)&&(t=t.call(this.view)),t},e.prototype.clearCache=function(){this.cache={}},e.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=function(e,t){function n(){if(u&&!d)for(;c.length;)delete l[c.pop()];else c=[];d=u=!1}function i(e){if("string"==typeof e&&(e=e.split(T,2)),!E(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(_(e[0])+"\\s*"),r=new RegExp("\\s*"+_(e[1])),a=new RegExp("\\s*"+_("}"+e[1]))}if(!e)return[];var o,r,a,s=[],l=[],c=[],u=!1,d=!1;i(t||x.tags);for(var p,f,h,m,g,v,y=new C(e);!y.eos();){if(p=y.pos,h=y.scanUntil(o))for(var b=0,w=h.length;b<w;++b)k(m=h.charAt(b))?c.push(l.length):d=!0,l.push(["text",m,p,p+1]),p+=1,"\n"===m&&n();if(!y.scan(o))break;if(u=!0,f=y.scan($)||"name",y.scan(S),"="===f?(h=y.scanUntil(I),y.scan(I),y.scanUntil(r)):"{"===f?(h=y.scanUntil(a),y.scan(A),y.scanUntil(r),f="&"):h=y.scanUntil(r),!y.scan(r))throw new Error("Unclosed tag at "+y.pos);if(g=[f,h,p,y.pos],l.push(g),"#"===f||"^"===f)s.push(g);else if("/"===f){if(!(v=s.pop()))throw new Error('Unopened section "'+h+'" at '+p);if(v[1]!==h)throw new Error('Unclosed section "'+v[1]+'" at '+p)}else"name"===f||"{"===f||"&"===f?d=!0:"="===f&&i(h)}if(v=s.pop())throw new Error('Unclosed section "'+v[1]+'" at '+y.pos);return function(e){for(var t,n=[],i=n,o=[],r=0,a=e.length;r<a;++r)switch((t=e[r])[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":o.pop()[5]=t[2],i=0<o.length?o[o.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],o=0,r=e.length;o<r;++o)(t=e[o])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(l))}(e,t)),i},e.prototype.render=function(e,t,n){var i=this.parse(e),o=t instanceof r?t:new r(t);return this.renderTokens(i,o,n,e)},e.prototype.renderTokens=function(e,t,n,i){for(var o,r,a,s="",l=0,c=e.length;l<c;++l)a=void 0,"#"===(r=(o=e[l])[0])?a=this.renderSection(o,t,n,i):"^"===r?a=this.renderInverted(o,t,n,i):">"===r?a=this.renderPartial(o,t,n,i):"&"===r?a=this.unescapedValue(o,t):"name"===r?a=this.escapedValue(o,t):"text"===r&&(a=this.rawValue(o)),void 0!==a&&(s+=a);return s},e.prototype.renderSection=function(e,t,n,i){var o=this,r="",a=t.lookup(e[1]);if(a){if(E(a))for(var s=0,l=a.length;s<l;++s)r+=this.renderTokens(e[4],t.push(a[s]),n,i);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)r+=this.renderTokens(e[4],t.push(a),n,i);else if(c(a)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,i.slice(e[3],e[5]),function(e){return o.render(e,t,n)}))&&(r+=a)}else r+=this.renderTokens(e[4],t,n,i);return r}},e.prototype.renderInverted=function(e,t,n,i){var o=t.lookup(e[1]);if(!o||E(o)&&0===o.length)return this.renderTokens(e[4],t,n,i)},e.prototype.renderPartial=function(e,t,n){if(n){var i=c(n)?n(e[1]):n[e[1]];return null!=i?this.renderTokens(this.parse(i),t,n,i):void 0}},e.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},e.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return x.escape(n)},e.prototype.rawValue=function(e){return e[1]},x.name="mustache.js",x.version="2.3.0",x.tags=["{{","}}"];var a=new e;return x.clearCache=function(){return a.clearCache()},x.parse=function(e,t){return a.parse(e,t)},x.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(E(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return a.render(e,t,n)},x.to_html=function(e,t,n,i){var o=x.render(e,t,n);if(!c(i))return o;i(o)},x.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return n[e]})},x.Scanner=C,x.Context=r,x.Writer=e,x}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&((o=str(i=rep[n],l))&&a.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&((o=str(i,l))&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(indent=gap="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(!(rep=t)||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(i=walk(o,n))?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},i=e.jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,t,n){return t&&t.originalEvent&&t.originalEvent[e]||n&&n[e]||void 0},onDomLoad:function(e){i(e)}},void 0!==n.init&&n.init()}(window),function(u,e){"use strict";var t=u.document,n=u.setTimeout||n,i=u.clearTimeout||i,s=u.setInterval||s,d=u.History=u.History||{};if(void 0!==d.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");d.initHtml4=function(){if(void 0!==d.initHtml4.initialized)return!1;d.initHtml4.initialized=!0,d.enabled=!0,d.savedHashes=[],d.isLastHash=function(e){return e===d.getHashByIndex()},d.isHashEqual=function(e,t){return(e=encodeURIComponent(e).replace(/%25/g,"%"))===(t=encodeURIComponent(t).replace(/%25/g,"%"))},d.saveHash=function(e){return!d.isLastHash(e)&&(d.savedHashes.push(e),!0)},d.getHashByIndex=function(e){return void 0===e?d.savedHashes[d.savedHashes.length-1]:e<0?d.savedHashes[d.savedHashes.length+e]:d.savedHashes[e]},d.discardedHashes={},d.discardedStates={},d.discardState=function(e,t,n){var i,o=d.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},d.discardedStates[o]=i,!0},d.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return d.discardedHashes[e]=i,!0},d.discardedState=function(e){var t=d.getHashByState(e);return d.discardedStates[t]||!1},d.discardedHash=function(e){return d.discardedHashes[e]||!1},d.recycleState=function(e){var t=d.getHashByState(e);return d.discardedState(e)&&delete d.discardedStates[t],!0},d.emulated.hashChange&&(d.hashChangeInit=function(){d.checkerFunction=null;var n,i,o,r="",a=Boolean(d.getHash());return d.isInternetExplorer()?("historyjs-iframe",(n=t.createElement("iframe")).setAttribute("id","historyjs-iframe"),n.setAttribute("src","#"),n.style.display="none",t.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),i="",o=!1,d.checkerFunction=function(){if(o)return!1;o=!0;var e=d.getHash(),t=d.getHash(n.contentWindow.document);return e!==r?(t!==(r=e)&&(i=t=e,n.contentWindow.document.open(),n.contentWindow.document.close(),n.contentWindow.document.location.hash=d.escapeHash(e)),d.Adapter.trigger(u,"hashchange")):t!==i&&(i=t,a&&""===t?d.back():d.setHash(t,!1)),!(o=!1)}):d.checkerFunction=function(){var e=d.getHash()||"";return e!==r&&(r=e,d.Adapter.trigger(u,"hashchange")),!0},d.intervalList.push(s(d.checkerFunction,d.options.hashChangeInterval)),!0},d.Adapter.onDomLoad(d.hashChangeInit)),d.emulated.pushState&&(d.onHashChange=function(e){var t,n=e&&e.newURL||d.getLocationHref(),i=d.getHashByUrl(n),o=null;return d.isLastHash(i)?(d.busy(!1),!1):(d.doubleCheckComplete(),d.saveHash(i),i&&d.isTraditionalAnchor(i)?(d.Adapter.trigger(u,"anchorchange"),d.busy(!1),!1):(o=d.extractState(d.getFullUrl(i||d.getLocationHref()),!0),d.isLastSavedState(o)?(d.busy(!1),!1):(d.getHashByState(o),(t=d.discardedState(o))?(d.getHashByIndex(-2)===d.getHashByState(t.forwardState)?d.back(!1):d.forward(!1),!1):(d.pushState(o.data,o.title,encodeURI(o.url),!1),!0))))},d.Adapter.bind(u,"hashchange",d.onHashChange),d.pushState=function(e,t,n,i){if(n=encodeURI(n).replace(/%25/g,"%"),d.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:i}),!1;d.busy(!0);var o=d.createStateObject(e,t,n),r=d.getHashByState(o),a=d.getState(!1),s=d.getHashByState(a),l=d.getHash(),c=d.expectedStateId==o.id;return d.storeState(o),d.expectedStateId=o.id,d.recycleState(o),d.setTitle(o),r===s?(d.busy(!1),!1):(d.saveState(o),c||d.Adapter.trigger(u,"statechange"),!d.isHashEqual(r,l)&&!d.isHashEqual(r,d.getShortUrl(d.getLocationHref()))&&d.setHash(r,!1),d.busy(!1),!0)},d.replaceState=function(e,t,n,i){if(n=encodeURI(n).replace(/%25/g,"%"),d.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:i}),!1;d.busy(!0);var o=d.createStateObject(e,t,n),r=d.getHashByState(o),a=d.getState(!1),s=d.getHashByState(a),l=d.getStateByIndex(-2);return d.discardState(a,o,l),r===s?(d.storeState(o),d.expectedStateId=o.id,d.recycleState(o),d.setTitle(o),d.saveState(o),d.Adapter.trigger(u,"statechange"),d.busy(!1)):d.pushState(o.data,o.title,o.url,!1),!0}),d.emulated.pushState&&d.getHash()&&!d.emulated.hashChange&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(u,"hashchange")})},void 0!==d.init&&d.init()}(window),function(a,n){"use strict";var s=a.console||n,l=a.document,i=a.navigator,o=!1,r=a.setTimeout,c=a.clearTimeout,u=a.setInterval,d=a.clearInterval,p=a.JSON,f=a.alert,h=a.History=a.History||{},m=a.history;try{(o=a.sessionStorage).setItem("TEST","1"),o.removeItem("TEST")}catch(e){o=!1}if(p.stringify=p.stringify||p.encode,p.parse=p.parse||p.decode,void 0!==h.init)throw new Error("History.js Core has already been loaded...");h.init=function(e){return void 0!==h.Adapter&&(void 0!==h.initCore&&h.initCore(),void 0!==h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(e){if(void 0!==h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||l.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(null!=t){for(e=0;e<t.length;e++)d(t[e]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var e,t,n,i,o,r=void 0!==s&&void 0!==s.log&&void 0!==s.log.apply,a=l.getElementById("log");for(r?(e=(i=Array.prototype.slice.call(arguments)).shift(),void 0!==s.debug?s.debug.apply(s,[e,i]):s.log.apply(s,[e,i])):e="\n"+arguments[0]+"\n",t=1,n=arguments.length;t<n;++t){if("object"==typeof(o=arguments[t])&&void 0!==p)try{o=p.stringify(o)}catch(e){}e+="\n"+o+"\n"}return a?(a.value+=e+"\n-----\n",a.scrollTop=a.scrollHeight-a.clientHeight):r||f(e),!0},h.getInternetExplorerMajorVersion=function(){return h.getInternetExplorerMajorVersion.cached=void 0!==h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=l.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return 4<e&&e}()},h.isInternetExplorer=function(){return h.isInternetExplorer.cached=void 0!==h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in l)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=p.stringify(e),n=p.parse(t)):n={},n},h.getRootUrl=function(){var e=l.location.protocol+"//"+(l.location.hostname||l.location.host);return l.location.port&&(e+=":"+l.location.port),e+="/"},h.getBaseHref=function(){var e=l.getElementsByTagName("base"),t="";return 1===e.length&&(t=e[0].href.replace(/[^\/]+$/,"")),(t=t.replace(/\/+$/,""))&&(t+="/"),t},h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()},h.getPageUrl=function(){return((h.getState(!1,!1)||{}).url||h.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){return h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},h.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===i?h.getRootUrl()+e.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+e:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.getLocationHref=function(e){return(e=e||l).URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&((n=h.cloneObject(n)).url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t,n=h.extractId(e.url);if(!n)if(t=h.getStateString(e),void 0!==h.stateToId[t])n=h.stateToId[t];else if(void 0!==h.store.stateToId[t])n=h.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==h.idToState[n]||void 0!==h.store.idToState[n];);h.stateToId[t]=n,h.idToState[n]=e}return n},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),(t={}).normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&!0!==h.options.disableSuid&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=h.normalizeState(i)},h.getStateById=function(e){return e=String(e),h.idToState[e]||h.store.idToState[e]||n},h.getStateString=function(e){var t;return t={data:h.normalizeState(e).data,title:e.title,url:e.url},p.stringify(t)},h.getStateId=function(e){return h.normalizeState(e).id},h.getHashByState=function(e){return h.normalizeState(e).hash},h.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,(t=/(.*)\&_suid=([0-9]+)$/.exec(n))&&t[1]||e,(t?String(t[2]||""):"")||!1},h.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},h.extractState=function(e,t){var n,i,o=null;return t=t||!1,(n=h.extractId(e))&&(o=h.getStateById(n)),o||(i=h.getFullUrl(e),(n=h.getIdByUrl(i)||!1)&&(o=h.getStateById(n)),!o&&t&&!h.isTraditionalAnchor(e)&&(o=h.createStateObject(null,null,i))),o},h.getIdByUrl=function(e){return h.urlToId[e]||h.store.urlToId[e]||n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||n},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||n},h.hasUrlDuplicate=function(e){var t;return(t=h.extractState(e.url))&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t=!1;return h.savedStates.length&&(t=e.id===h.getLastSavedState().id),t},h.saveState=function(e){return!h.isLastSavedState(e)&&(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){return void 0===e?h.savedStates[h.savedStates.length-1]:e<0?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){return h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t=h.getLocationHref(e);return h.getHashByUrl(t)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t)},h.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},h.setHash=function(e,t){var n,i;return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),(n=h.extractState(e,!0))&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+"#"+e,!1)):l.location.hash=e),h)},h.escapeHash=function(e){var t=h.normalizeHash(e);return t=a.encodeURIComponent(t),h.bugs.hashEscape||(t=t.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),t},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,n=e.title;n||(t=h.getStateByIndex(0))&&t.url===e.url&&(n=t.title||h.options.initialTitle);try{l.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return l.title=n,h},h.queues=[],h.busy=function(e){if(void 0!==e?h.busy.flag=e:void 0===h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){c(h.busy.timeout);var i=function(){var e,t,n;if(!h.busy.flag)for(e=h.queues.length-1;0<=e;--e)0!==(t=h.queues[e]).length&&(n=t.shift(),h.fireQueueItem(n),h.busy.timeout=r(i,h.options.busyDelay))};h.busy.timeout=r(i,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(c(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=r(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var e=h.extractState(h.getLocationHref());if(!h.isLastSavedState(e))return e||h.createStateObject(),h.Adapter.trigger(a,"popstate"),h},h.back=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),m.go(-1),!0)},h.forward=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),m.go(1),!0)},h.go=function(e,t){var n;if(0<e)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;e<=n;--n)h.back(t)}return h},h.emulated.pushState){var t=function(){};h.pushState=h.pushState||t,h.replaceState=h.replaceState||t}else h.onPopState=function(e,t){var n,i,o=!1,r=!1;return h.doubleCheckComplete(),(n=h.getHash())?((i=h.extractState(n||h.getLocationHref(),!0))?h.replaceState(i.data,i.title,i.url,!1):(h.Adapter.trigger(a,"anchorchange"),h.busy(!1)),h.expectedStateId=!1):((r=(o=h.Adapter.extractEventData("state",e,t)||!1)?h.getStateById(o):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()))||(r=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(r)?(h.busy(!1),!1):(h.storeState(r),h.saveState(r),h.setTitle(r),h.Adapter.trigger(a,"statechange"),h.busy(!1),!0))},h.Adapter.bind(a,"popstate",h.onPopState),h.pushState=function(e,t,n,i){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var o=h.createStateObject(e,t,n);return h.isLastSavedState(o)?h.busy(!1):(h.storeState(o),h.expectedStateId=o.id,m.pushState(o.id,o.title,o.url),h.Adapter.trigger(a,"popstate")),!0},h.replaceState=function(e,t,n,i){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var o=h.createStateObject(e,t,n);return h.isLastSavedState(o)?h.busy(!1):(h.storeState(o),h.expectedStateId=o.id,m.replaceState(o.id,o.title,o.url),h.Adapter.trigger(a,"popstate")),!0};if(o){try{h.store=p.parse(o.getItem("History.store"))||{}}catch(e){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(a,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),o&&(h.onUnload=function(){var t,e,n;try{t=p.parse(o.getItem("History.store"))||{}}catch(e){t={}}for(e in t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{},h.idToState)h.idToState.hasOwnProperty(e)&&(t.idToState[e]=h.idToState[e]);for(e in h.urlToId)h.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=h.urlToId[e]);for(e in h.stateToId)h.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=h.stateToId[e]);h.store=t,h.normalizeStore(),n=p.stringify(t);try{o.setItem("History.store",n)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;o.length&&(o.removeItem("History.store"),o.setItem("History.store",n))}},h.intervalList.push(u(h.onUnload,h.options.storeInterval)),h.Adapter.bind(a,"beforeunload",h.onUnload),h.Adapter.bind(a,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(u(h.safariStatePoll,h.options.safariPollInterval)),"Apple Computer, Inc."!==i.vendor&&"Mozilla"!==(i.appCodeName||"")||(h.Adapter.bind(a,"hashchange",function(){h.Adapter.trigger(a,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(a,"hashchange")})))},(!h.options||!h.options.delayInit)&&h.init()}(window),function(){var e=function(){function o(e,t){var n=e.charAt(0),i=t.split(n);return n===e?i:i[(e=parseInt(e.substring(1),10))<0?i.length+e:e-1]}function r(e,t){for(var n=e.charAt(0),i=t.split("&"),o=[],r={},a=[],s=e.substring(1),l=0,c=i.length;l<c;l++)if((o=i[l].match(/(.*?)=(.*)/))||(o=[i[l],i[l],""]),""!==o[1].replace(/\s/g,"")){if(o[2]=(u=o[2]||"",decodeURIComponent(u.replace(/\+/g," "))),s===o[1])return o[2];(a=o[1].match(/(.*)\[([0-9]+)\]/))?(r[a[1]]=r[a[1]]||[],r[a[1]][a[2]]=o[2]):r[o[1]]=o[2]}var u;return n===e?r:r[s]}return function(e,t){var n,i={};if("tld?"!==e){if(t=t||window.location.toString(),!e)return t;if(e=e.toString(),n=t.match(/^mailto:([^\/].+)/))i.protocol="mailto",i.email=n[1];else{if((n=t.match(/(.*?)\/#\!(.*)/))&&(t=n[1]+n[2]),(n=t.match(/(.*?)#(.*)/))&&(i.hash=n[2],t=n[1]),i.hash&&e.match(/^#/))return r(e,i.hash);if((n=t.match(/(.*?)\?(.*)/))&&(i.query=n[2],t=n[1]),i.query&&e.match(/^\?/))return r(e,i.query);if((n=t.match(/(.*?)\:?\/\/(.*)/))&&(i.protocol=n[1].toLowerCase(),t=n[2]),(n=t.match(/(.*?)(\/.*)/))&&(i.path=n[2],t=n[1]),i.path=(i.path||"").replace(/^([^\/])/,"/$1"),e.match(/^[\-0-9]+$/)&&(e=e.replace(/^([^\/])/,"/$1")),e.match(/^\//))return o(e,i.path.substring(1));if((n=o("/-1",i.path.substring(1)))&&(n=n.match(/(.*?)\.(.*)/))&&(i.file=n[0],i.filename=n[1],i.fileext=n[2]),(n=t.match(/(.*)\:([0-9]+)$/))&&(i.port=n[2],t=n[1]),(n=t.match(/(.*?)@(.*)/))&&(i.auth=n[1],t=n[2]),i.auth&&(n=i.auth.match(/(.*)\:(.*)/),i.user=n?n[1]:i.auth,i.pass=n?n[2]:void 0),i.hostname=t.toLowerCase(),"."===e.charAt(0))return o(e,i.hostname);i.port=i.port||("https"===i.protocol?"443":"80"),i.protocol=i.protocol||("443"===i.port?"https":"http")}return e in i?i[e]:"{}"===e?i:void 0}}}();"function"==typeof window.define&&window.define.amd?window.define("js-url",[],function(){return e}):(void 0!==window.jQuery&&window.jQuery.extend({url:function(e,t){return window.url(e,t)}}),window.url=e)}(),function(t,n){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(e){return t.Bloodhound=n(e)}):"object"==typeof exports?module.exports=n(require("jquery")):t.Bloodhound=n(jQuery)}(this,function(u){var d=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:u.isArray,isFunction:u.isFunction,isObject:u.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof u},toStr:function(e){return d.isUndefined(e)||null===e?"":e+""},bind:u.proxy,each:function(e,n){u.each(e,function(e,t){return n(t,e)})},map:u.map,filter:u.grep,every:function(n,i){var o=!0;return n?(u.each(n,function(e,t){if(!(o=i.call(null,t,e,n)))return!1}),!!o):o},some:function(n,i){var o=!1;return n?(u.each(n,function(e,t){if(o=i.call(null,t,e,n))return!1}),!!o):o},mixin:u.extend,identity:function(e){return e},clone:function(e){return u.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(e){return u.isFunction(e)?e:function(){return String(e)}},defer:function(e){setTimeout(e,0)},debounce:function(o,r,a){var s,l;return function(){var e,t,n=this,i=arguments;return e=function(){s=null,a||(l=o.apply(n,i))},t=a&&!s,clearTimeout(s),s=setTimeout(e,r),t&&(l=o.apply(n,i)),l}},throttle:function(n,i){var o,r,a,s,l,c;return l=0,c=function(){l=new Date,a=null,s=n.apply(o,r)},function(){var e=new Date,t=i-(e-l);return o=this,r=arguments,t<=0?(clearTimeout(a),a=null,l=e,s=n.apply(o,r)):a||(a=setTimeout(c,t)),s}},stringify:function(e){return d.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),s="0.11.1",n=function(){"use strict";function e(e){return(e=d.toStr(e))?e.split(/\s+/):[]}function t(e){return(e=d.toStr(e))?e.split(/\W+/):[]}function n(i){return function(e){return e=d.isArray(e)?e:[].slice.call(arguments,0),function(t){var n=[];return d.each(e,function(e){n=n.concat(i(d.toStr(t[e])))}),n}}}return{nonword:t,whitespace:e,obj:{nonword:n(t),whitespace:n(e)}}}(),i=function(){"use strict";function e(e){this.maxSize=d.isNumber(e)?e:100,this.reset(),this.maxSize<=0&&(this.set=this.get=u.noop)}function t(){this.head=this.tail=null}return d.mixin(e.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new function(e,t){this.key=e,this.val=t,this.prev=this.next=null}(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new t}}),d.mixin(t.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),e}(),t=function(){"use strict";function e(e,t){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+d.escapeRegExChars(this.prefix)),this.ls=t||r,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function o(e){return JSON.stringify(d.isUndefined(e)?null:e)}function n(e){return u.parseJSON(e)}var r;try{(r=window.localStorage).setItem("~~~","!"),r.removeItem("~~~")}catch(e){r=null}return d.mixin(e.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=d.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(e){"QuotaExceededError"===e.name&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),n(this.ls.getItem(this._prefix(e)))},set:function(e,t,n){return d.isNumber(n)?this._safeSet(this._ttlKey(e),o(i()+n)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),o(t))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=function(e){var t,n,i=[],o=r.length;for(t=0;t<o;t++)(n=r.key(t)).match(e)&&i.push(n.replace(e,""));return i}(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var t=n(this.ls.getItem(this._ttlKey(e)));return!!(d.isNumber(t)&&i()>t)}}),e}(),o=function(){"use strict";function e(e){e=e||{},this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=!1===e.cache?new i(0):t}var s=0,l={},c=6,t=new i(10);return e.setMaxPendingRequests=function(e){c=e},e.resetCache=function(){t.reset()},d.mixin(e.prototype,{_fingerprint:function(e){return(e=e||{}).url+e.type+u.param(e.data||{})},_get:function(e,t){function n(e){t(null,e),a._cache.set(o,e)}function i(){t(!0)}var o,r,a=this;o=this._fingerprint(e),this.cancelled||o!==this.lastReq||((r=l[o])?r.done(n).fail(i):s<c?(s++,l[o]=this._send(e).done(n).fail(i).always(function(){s--,delete l[o],a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)})):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,t){var n,i;t=t||u.noop,e=d.isString(e)?{url:e}:e||{},i=this._fingerprint(e),this.cancelled=!1,this.lastReq=i,(n=this._cache.get(i))?t(null,n):this._get(e,t)},cancel:function(){this.cancelled=!0}}),e}(),r=window.SearchIndex=function(){"use strict";function e(e){(e=e||{}).datumTokenizer&&e.queryTokenizer||u.error("datumTokenizer and queryTokenizer are both required"),this.identify=e.identify||d.stringify,this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function n(e){return e=d.filter(e,function(e){return!!e}),e=d.map(e,function(e){return e.toLowerCase()})}function a(){var e={};return e[l]=[],e[s]={},e}var s="c",l="i";return d.mixin(e.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var r=this;e=d.isArray(e)?e:[e],d.each(e,function(e){var o,t;r.datums[o=r.identify(e)]=e,t=n(r.datumTokenizer(e)),d.each(t,function(e){var t,n,i;for(t=r.trie,n=e.split("");i=n.shift();)(t=t[s][i]||(t[s][i]=a()))[l].push(o)})})},get:function(e){var t=this;return d.map(e,function(e){return t.datums[e]})},search:function(e){var t,r,a=this;return t=n(this.queryTokenizer(e)),d.each(t,function(e){var t,n,i,o;if(r&&0===r.length)return!1;for(t=a.trie,n=e.split("");t&&(i=n.shift());)t=t[s][i];if(!t||0!==n.length)return!(r=[]);o=t[l].slice(0),r=r?function(e,t){var n=0,i=0,o=[];e=e.sort(),t=t.sort();for(var r=e.length,a=t.length;n<r&&i<a;)e[n]<t[i]?n++:(e[n]>t[i]||(o.push(e[n]),n++),i++);return o}(r,o):o}),r?d.map(function(e){for(var t={},n=[],i=0,o=e.length;i<o;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}(r),function(e){return a.datums[e]}):[]},all:function(){var e=[];for(var t in this.datums)e.push(this.datums[t]);return e},reset:function(){this.datums={},this.trie=a()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),e}(),a=function(){"use strict";function e(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new t(e.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},d.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(e){this.cache&&(this.storage.set(n.data,e,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var e,t={};return this.cache?(t.data=this.storage.get(n.data),t.protocol=this.storage.get(n.protocol),t.thumbprint=this.storage.get(n.thumbprint),e=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol,t.data&&!e?t.data:null):null},fromNetwork:function(t){var e,n=this;t&&(e=this.prepare(this._settings()),this.transport(e).fail(function(){t(!0)}).done(function(e){t(null,n.transform(e))}))},clear:function(){return this.storage.clear(),this}}),e}(),l=function(){"use strict";function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.transport=new o({cache:e.cache,limiter:e.limiter,transport:e.transport})}return d.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(e,n){var t,i=this;if(n)return e=e||"",t=this.prepare(e,this._settings()),this.transport.get(t,function(e,t){n(e?[]:i.transform(t))})},cancelLastRequest:function(){this.transport.cancel()}}),e}(),c=function(){"use strict";function r(e){var t;if(e)return t={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:d.identity,transport:null},e=d.isString(e)?{url:e}:e,!(e=d.mixin(t,e)).url&&u.error("remote requires url to be set"),e.transform=e.filter||e.transform,e.prepare=function(e){var t,n,i;if(t=e.prepare,n=e.replace,i=e.wildcard,t)return t;t=n?function(e,t){return t.url=n(t.url,e),t}:e.wildcard?function(e,t){return t.url=t.url.replace(i,encodeURIComponent(e)),t}:function(e,t){return t};return t}(e),e.limiter=function(e){var t,n,i;t=e.limiter,n=e.rateLimitBy,i=e.rateLimitWait,t||(t=/^throttle$/i.test(n)?(r=i,function(e){return d.throttle(e,r)}):(o=i,function(e){return d.debounce(e,o)}));var o;var r;return t}(e),e.transport=e.transport?a(e.transport):u.ajax,delete e.replace,delete e.wildcard,delete e.rateLimitBy,delete e.rateLimitWait,e}function a(n){return function(e){var t=u.Deferred();return n(e,function(e){d.defer(function(){t.resolve(e)})},function(e){d.defer(function(){t.reject(e)})}),t}}return function(e){var t,n,i,o;return t={initialize:!0,identify:d.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},!(e=d.mixin(t,e||{})).datumTokenizer&&u.error("datumTokenizer is required"),!e.queryTokenizer&&u.error("queryTokenizer is required"),n=e.sorter,e.sorter=n?function(e){return e.sort(n)}:d.identity,e.local=d.isFunction(e.local)?e.local():e.local,e.prefetch=(i=e.prefetch)?(o={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:d.identity,transform:d.identity,transport:null},i=d.isString(i)?{url:i}:i,!(i=d.mixin(o,i)).url&&u.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=s+i.thumbprint,i.transport=i.transport?a(i.transport):u.ajax,i):null,e.remote=r(e.remote),e}}();return function(){"use strict";function e(e){e=c(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.local=e.local,this.remote=e.remote?new l(e.remote):null,this.prefetch=e.prefetch?new a(e.prefetch):null,this.index=new r({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),!1!==e.initialize&&this.initialize()}var t;return t=window&&window.Bloodhound,e.noConflict=function(){return window&&(window.Bloodhound=t),e},e.tokenizers=n,d.mixin(e.prototype,{__ttAdapter:function(){var i=this;return this.remote?function(e,t,n){return i.search(e,t,n)}:function(e,t){return i.search(e,t)}},_loadPrefetch:function(){var n,e,i=this;return n=u.Deferred(),this.prefetch?(e=this.prefetch.fromCache())?(this.index.bootstrap(e),n.resolve()):this.prefetch.fromNetwork(function(e,t){if(e)return n.reject();i.add(t),i.prefetch.store(i.index.serialize()),n.resolve()}):n.resolve(),n.promise()},_initialize:function(){var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){e.add(e.local)}),this.initPromise},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){return this.index.add(e),this},get:function(e){return e=d.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function(e,t,i){var o,r=this;return o=this.sorter(this.index.search(e)),t(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(e,function(e){var n=[];d.each(e,function(t){!d.some(o,function(e){return r.identify(t)===r.identify(e)})&&n.push(t)}),i&&i(n)}):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),e}()}),function(e,t){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(b){var w=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof b},toStr:function(e){return w.isUndefined(e)||null===e?"":e+""},bind:b.proxy,each:function(e,n){b.each(e,function(e,t){return n(t,e)})},map:b.map,filter:b.grep,every:function(n,i){var o=!0;return n?(b.each(n,function(e,t){if(!(o=i.call(null,t,e,n)))return!1}),!!o):o},some:function(n,i){var o=!1;return n?(b.each(n,function(e,t){if(o=i.call(null,t,e,n))return!1}),!!o):o},mixin:b.extend,identity:function(e){return e},clone:function(e){return b.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(e){return b.isFunction(e)?e:function(){return String(e)}},defer:function(e){setTimeout(e,0)},debounce:function(o,r,a){var s,l;return function(){var e,t,n=this,i=arguments;return e=function(){s=null,a||(l=o.apply(n,i))},t=a&&!s,clearTimeout(s),s=setTimeout(e,r),t&&(l=o.apply(n,i)),l}},throttle:function(n,i){var o,r,a,s,l,c;return l=0,c=function(){l=new Date,a=null,s=n.apply(o,r)},function(){var e=new Date,t=i-(e-l);return o=this,r=arguments,t<=0?(clearTimeout(a),a=null,l=e,s=n.apply(o,r)):a||(a=setTimeout(c,t)),s}},stringify:function(e){return w.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n=function(){"use strict";var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(e){var t,n,i,o,r;return n=w.mixin({},s,e),{css:(t={css:(a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}},w.isMsie()&&w.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),a),classes:n,html:(r=n,{wrapper:'<span class="'+r.wrapper+'"></span>',menu:'<div class="'+r.menu+'"></div>'}),selectors:(i=n,o={},w.each(i,function(e,t){o[t]="."+e}),o)}).css,html:t.html,classes:t.classes,selectors:t.selectors,mixin:function(e){w.mixin(e,t)}};var a}}(),x=function(){"use strict";function e(e){e&&e.el||b.error("EventBus initialized without el"),this.$el=b(e.el)}var n;return"typeahead:",n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},w.mixin(e.prototype,{_trigger:function(e,t){var n;return n=b.Event("typeahead:"+e),(t=t||[]).unshift(n),this.$el.trigger.apply(this.$el,t),n},before:function(e){var t;return t=[].slice.call(arguments,1),this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=n[e])&&this._trigger(t,[].slice.call(arguments,1))}}),e}(),t=function(){"use strict";function i(e,t,n,i){var o,r,a;if(!n)return this;for(t=t.split(s),n=i?(a=i,(r=n).bind?r.bind(a):function(){r.apply(a,[].slice.call(arguments,0))}):n,this._callbacks=this._callbacks||{};o=t.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][e].push(n);return this}function a(i,o,r){return function(){for(var e,t=0,n=i.length;!e&&t<n;t+=1)e=!1===i[t].apply(o,r);return!e}}var s=/\s+/,l=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)};return{onSync:function(e,t,n){return i.call(this,"sync",e,t,n)},onAsync:function(e,t,n){return i.call(this,"async",e,t,n)},off:function(e){var t;if(!this._callbacks)return this;for(e=e.split(s);t=e.shift();)delete this._callbacks[t];return this},trigger:function(e){var t,n,i,o,r;if(!this._callbacks)return this;for(e=e.split(s),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)o=a(n.sync,this,[t].concat(i)),r=a(n.async,this,[t].concat(i)),o()&&l(r);return this}}}(),l=function(a){"use strict";var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){var r;(o=w.mixin({},e,o)).node&&o.pattern&&(o.pattern=w.isArray(o.pattern)?o.pattern:[o.pattern],r=function(e,t,n){for(var i,o=[],r=0,a=e.length;r<a;r++)o.push(w.escapeRegExChars(e[r]));return i=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",t?new RegExp(i):new RegExp(i,"i")}(o.pattern,o.caseSensitive,o.wordsOnly),function e(t,n){for(var i,o=0;o<t.childNodes.length;o++)3===(i=t.childNodes[o]).nodeType?o+=n(i)?1:0:e(i,n)}(o.node,function(e){var t,n,i;return(t=r.exec(e.data))&&(i=a.createElement(o.tagName),o.className&&(i.className=o.className),(n=e.splitText(t.index)).splitText(t[0].length),i.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(i,n)),!!t}))}}(window.document),_=function(){"use strict";function a(e,t){var n;(e=e||{}).input||b.error("input is missing"),t.mixin(this),this.$hint=b(e.hint),this.$input=b(e.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=(n=this.$input,b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:n.css("font-family"),fontSize:n.css("font-size"),fontStyle:n.css("font-style"),fontVariant:n.css("font-variant"),fontWeight:n.css("font-weight"),wordSpacing:n.css("word-spacing"),letterSpacing:n.css("letter-spacing"),textIndent:n.css("text-indent"),textRendering:n.css("text-rendering"),textTransform:n.css("text-transform")}).insertAfter(n)),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=w.noop)}function i(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var r;return r={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},a.normalizeQuery=function(e){return w.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},w.mixin(a.prototype,t,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=r[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!i(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!i(t);break;default:n=!0}return n},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i,o,r;o=e,r=this.query,i=!!(n=a.normalizeQuery(o)===a.normalizeQuery(r))&&this.query.length!==e.length,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e,t,n,i,o=this;return e=w.bind(this._onBlur,this),t=w.bind(this._onFocus,this),n=w.bind(this._onKeydown,this),i=w.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",t).on("keydown.tt",n),!w.isMsie()||9<w.isMsie()?this.$input.on("input.tt",i):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){r[e.which||e.keyCode]||w.defer(w.bind(o._onInput,o,e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),!(""!==e&&n&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,t,n;return e=this.$input.val().length,t=this.$input[0].selectionStart,w.isNumber(t)?t===e:!document.selection||((n=document.selection.createRange()).moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=b("<div>")}}),a}(),o=function(){"use strict";function e(e,t){var n,i,o,r;(e=e||{}).templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||b.error("missing source"),e.node||b.error("missing node"),e.name&&(n=e.name,!/^[_a-zA-Z0-9-]+$/.test(n))&&b.error("invalid dataset name: "+e.name),t.mixin(this),this.highlight=!!e.highlight,this.name=e.name||s(),this.limit=e.limit||5,this.displayFn=(i=(i=e.display||e.displayKey)||w.stringify,w.isFunction(i)?i:function(e){return e[i]}),this.templates=(o=e.templates,r=this.displayFn,{notFound:o.notFound&&w.templatify(o.notFound),pending:o.pending&&w.templatify(o.pending),header:o.header&&w.templatify(o.header),footer:o.footer&&w.templatify(o.footer),suggestion:o.suggestion||function(e){return b("<div>").text(r(e))}}),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=w.isUndefined(e.async)?2<this.source.length:!!e.async,this._resetLastSuggestion(),this.$el=b(e.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}var a,s;return a={val:"tt-selectable-display",obj:"tt-selectable-object"},s=w.getIdGenerator(),e.extractData=function(e){var t=b(e);return t.data(a.obj)?{val:t.data(a.val)||"",obj:t.data(a.obj)||null}:null},w.mixin(e.prototype,t,{_overwrite:function(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var n;n=this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;i=(n=this._getSuggestionsFragment(e,t)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,e){var o,r=this;return o=document.createDocumentFragment(),w.each(e,function(e){var t,n;n=r._injectQuery(i,e),t=b(r.templates.suggestion(n)).data(a.obj,e).data(a.val,r.displayFn(e)).addClass(r.classes.suggestion+" "+r.classes.selectable),o.appendChild(t[0]),o.append(" ")}),this.highlight&&l({className:this.classes.highlight,node:o,pattern:i}),b(o)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=b()},_injectQuery:function(e,t){return w.isObject(t)?w.mixin({_query:e},t):t},update:function(t){function e(e){o||(o=!0,e=(e||[]).slice(0,n.limit),r=e.length,n._overwrite(t,e),r<n.limit&&n.async&&n.trigger("asyncRequested",t))}var n=this,i=!1,o=!1,r=0;this.cancel(),this.cancel=function(){i=!0,n.cancel=b.noop,n.async&&n.trigger("asyncCanceled",t)},this.source(t,e,function(e){e=e||[],!i&&r<n.limit&&(n.cancel=b.noop,r+=e.length,n._append(t,e.slice(0,n.limit-r)),n.async&&n.trigger("asyncReceived",t))}),!o&&e([])},cancel:b.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=b("<div>")}}),e}(),k=function(){"use strict";function e(e,n){var i=this;(e=e||{}).node||b.error("node is required"),n.mixin(this),this.$node=b(e.node),this.query=null,this.datasets=w.map(e.datasets,function(e){var t=i.$node.find(e.node).first();return e.node=t.length?t:b("<div>").appendTo(i.$node),new o(e,n)})}return w.mixin(e.prototype,t,{_onSelectableClick:function(e){this.trigger("selectableClicked",b(e.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return w.every(this.datasets,function(e){return e.isEmpty()})},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,o;n=(t=e.position().top)+e.outerHeight(!0),i=this.$node.scrollTop(),o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(i+t):o<n&&this.$node.scrollTop(i+(n-o))},bind:function(){var e,t=this;return e=w.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),w.each(this.datasets,function(e){e.onSync("asyncRequested",t._propagate,t).onSync("asyncCanceled",t._propagate,t).onSync("asyncReceived",t._propagate,t).onSync("rendered",t._onRendered,t).onSync("cleared",t._onCleared,t)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i;return n=this.getActiveSelectable(),t=this._getSelectables(),-1===(i=(i=((i=(n?t.index(n):-1)+e)+1)%(t.length+1)-1)<-1?t.length-1:i)?null:t.eq(i)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?o.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(t){var e=t!==this.query;return e&&(this.query=t,w.each(this.datasets,function(e){e.update(t)})),e},empty:function(){w.each(this.datasets,function(e){e.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=b("<div>"),w.each(this.datasets,function(e){e.destroy()})}}),e}(),C=function(){"use strict";function e(){k.apply(this,[].slice.call(arguments,0))}var t=k.prototype;return w.mixin(e.prototype,k.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),t.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e}(),E=function(){"use strict";function e(e,t){var n,i,o,r,a,s,l,c,u,d,p;(e=e||{}).input||b.error("missing input"),e.menu||b.error("missing menu"),e.eventBus||b.error("missing event bus"),t.mixin(this),this.eventBus=e.eventBus,this.minLength=w.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),n=f(this,"activate","open","_onFocused"),i=f(this,"deactivate","_onBlurred"),o=f(this,"isActive","isOpen","_onEnterKeyed"),r=f(this,"isActive","isOpen","_onTabKeyed"),a=f(this,"isActive","_onEscKeyed"),s=f(this,"isActive","open","_onUpKeyed"),l=f(this,"isActive","open","_onDownKeyed"),c=f(this,"isActive","isOpen","_onLeftKeyed"),u=f(this,"isActive","isOpen","_onRightKeyed"),d=f(this,"_openIfActive","_onQueryChanged"),p=f(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",n,this).onSync("blurred",i,this).onSync("enterKeyed",o,this).onSync("tabKeyed",r,this).onSync("escKeyed",a,this).onSync("upKeyed",s,this).onSync("downKeyed",l,this).onSync("leftKeyed",c,this).onSync("rightKeyed",u,this).onSync("queryChanged",d,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function f(n){var e=[].slice.call(arguments,1);return function(){var t=[].slice.call(arguments);w.each(e,function(e){return n[e].apply(n,t)})}}return w.mixin(e.prototype,{_hacks:function(){var o,r;o=this.input.$input||b("<div>"),r=this.menu.$node||b("<div>"),o.on("blur.tt",function(e){var t,n,i;t=document.activeElement,n=r.is(t),i=0<r.has(t).length,w.isMsie()&&(n||i)&&(e.preventDefault(),e.stopImmediatePropagation(),w.defer(function(){o.focus()}))}),r.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,t)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&t.preventDefault()},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():n=this.menu.getTopSelectable()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return(e=w.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var e,t,n,i,o,r;e=this.menu.getTopSelectable(),t=this.menu.getSelectableData(e),n=this.input.getInputValue(),!t||w.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(i=_.normalizeQuery(n),o=w.escapeRegExChars(i),(r=new RegExp("^(?:"+o+")(.+$)","i").exec(t.val))&&this.input.setHint(n+r[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(w.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj))&&(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),!0)},autocomplete:function(e){var t,n;return t=this.input.getQuery(),!(!((n=this.menu.getSelectableData(e))&&t!==n.val)||this.eventBus.before("autocomplete",n.obj))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0)},moveCursor:function(e){var t,n,i,o;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),o=(i=this.menu.getSelectableData(n))?i.obj:null,!(this._minLengthMet()&&this.menu.update(t))&&!this.eventBus.before("cursorchange",o)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",o),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),e}();!function(){"use strict";function i(e,n){e.each(function(){var e,t=b(this);(e=t.data(y.typeahead))&&n(e,t)})}function v(e){var t;return(t=w.isJQuery(e)||w.isElement(e)?b(e).first():[]).length?t:null}var e,y,t;e=b.fn.typeahead,y={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},t={initialize:function(h,m){var g;return m=w.isArray(m)?m:[].slice.call(arguments,1),g=n((h=h||{}).classNames),this.each(function(){var e,t,n,i,o,r,a,s,l,c,u,d,p,f;w.each(m,function(e){e.highlight=!!h.highlight}),e=b(this),t=b(g.html.wrapper),n=v(h.hint),i=v(h.menu),o=!1!==h.hint&&!n,r=!1!==h.menu&&!i,o&&(p=g,n=(d=e).clone().addClass(p.classes.hint).removeData().css(p.css.hint).css((f=d,{backgroundAttachment:f.css("background-attachment"),backgroundClip:f.css("background-clip"),backgroundColor:f.css("background-color"),backgroundImage:f.css("background-image"),backgroundOrigin:f.css("background-origin"),backgroundPosition:f.css("background-position"),backgroundRepeat:f.css("background-repeat"),backgroundSize:f.css("background-size")})).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})),r&&(i=b(g.html.menu).css(g.css.menu)),n&&n.val(""),e=function(e,t){e.data(y.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(e){}return e}(e,g),(o||r)&&(t.css(g.css.wrapper),e.css(o?g.css.input:g.css.inputWithNoHint),e.wrap(t).parent().prepend(o?n:null).append(r?i:null)),u=r?C:k,a=new x({el:e}),s=new _({hint:n,input:e},g),l=new u({node:i,datasets:m},g),c=new E({input:s,menu:l,eventBus:a,minLength:h.minLength},g),e.data(y.www,g),e.data(y.typeahead,c)})},isEnabled:function(){var t;return i(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return i(this,function(e){e.enable()}),this},disable:function(){return i(this,function(e){e.disable()}),this},isActive:function(){var t;return i(this.first(),function(e){t=e.isActive()}),t},activate:function(){return i(this,function(e){e.activate()}),this},deactivate:function(){return i(this,function(e){e.deactivate()}),this},isOpen:function(){var t;return i(this.first(),function(e){t=e.isOpen()}),t},open:function(){return i(this,function(e){e.open()}),this},close:function(){return i(this,function(e){e.close()}),this},select:function(e){var t=!1,n=b(e);return i(this.first(),function(e){t=e.select(n)}),t},autocomplete:function(e){var t=!1,n=b(e);return i(this.first(),function(e){t=e.autocomplete(n)}),t},moveCursor:function(t){var n=!1;return i(this.first(),function(e){n=e.moveCursor(t)}),n},val:function(t){var n;return arguments.length?(i(this,function(e){e.setVal(t)}),this):(i(this.first(),function(e){n=e.getVal()}),n)},destroy:function(){return i(this,function(e,t){var n,i,o;i=(n=t).data(y.www),o=n.parent().filter(i.selectors.wrapper),w.each(n.data(y.attrs),function(e,t){w.isUndefined(e)?n.removeAttr(t):n.attr(t,e)}),n.removeData(y.typeahead).removeData(y.www).removeData(y.attr).removeClass(i.classes.input),o.length&&(n.detach().insertAfter(o),o.remove()),e.destroy()}),this}},b.fn.typeahead=function(e){return t[e]?t[e].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)},b.fn.typeahead.noConflict=function(){return b.fn.typeahead=e,this}}()}),function(g){"use strict";function a(e,t){this.itemsArray=[],this.$element=g(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=t&&t.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=g('<div class="bootstrap-tagsinput"></div>'),this.$input=g('<input type="text" placeholder="'+this.placeholderText+'" size="'+this.inputSize+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(t)}function r(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}function s(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}function v(e){return e?t.text(e).html():""}var c={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},itemTitle:function(e){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};a.prototype={constructor:a,add:function(e,t,n){var i=this;if(!(i.options.maxTags&&i.itemsArray.length>=i.options.maxTags)&&(!1===e||e)){if("string"==typeof e&&i.options.trimValue&&(e=g.trim(e)),"object"==typeof e&&!i.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(i.isSelect&&!i.multiple&&0<i.itemsArray.length&&i.remove(i.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var o=i.options.delimiterRegex?i.options.delimiterRegex:i.options.delimiter,r=e.split(o);if(1<r.length){for(var a=0;a<r.length;a++)this.add(r[a],!0);return void(t||i.pushVal())}}var s=i.options.itemValue(e),l=i.options.itemText(e),c=i.options.tagClass(e),u=i.options.itemTitle(e),d=g.grep(i.itemsArray,function(e){return i.options.itemValue(e)===s})[0];if(!d||i.options.allowDuplicates){if(!(i.items().toString().length+e.length+1>i.options.maxInputLength)){var p=g.Event("beforeItemAdd",{item:e,cancel:!1,options:n});if(i.$element.trigger(p),!p.cancel){i.itemsArray.push(e);var f=g('<span class="tag '+v(c)+(null!==u?'" title="'+u:"")+'">'+v(l)+'<span data-role="remove"></span></span>');if(f.data("item",e),i.findInputWrapper().before(f),f.after(" "),i.isSelect&&!g('option[value="'+encodeURIComponent(s)+'"]',i.$element)[0]){var h=g("<option selected>"+v(l)+"</option>");h.data("item",e),h.attr("value",s),i.$element.append(h)}t||i.pushVal(),i.options.maxTags!==i.itemsArray.length&&i.items().toString().length!==i.options.maxInputLength||i.$container.addClass("bootstrap-tagsinput-max"),i.$element.trigger(g.Event("itemAdded",{item:e,options:n}))}}}else if(i.options.onTagExists){var m=g(".tag",i.$container).filter(function(){return g(this).data("item")===d});i.options.onTagExists(e,m)}}}},contains:function(e){var t=this;if(!1!==e&&!e)return!1;if("string"==typeof e&&t.options.trimValue&&(e=g.trim(e)),e.toString().match(/^\s*$/))return!1;var n=t.options.itemValue(e),i=g.grep(t.itemsArray,function(e){return t.options.itemValue(e)===n})[0];if(i){if(t.options.onTagExists){var o=g(".tag",t.$container).filter(function(){return g(this).data("item")===i});t.options.onTagExists(e,o)}return!0}return!1},remove:function(t,e,n){var i=this;if(i.objectItems&&(t=(t="object"==typeof t?g.grep(i.itemsArray,function(e){return i.options.itemValue(e)==i.options.itemValue(t)}):g.grep(i.itemsArray,function(e){return i.options.itemValue(e)==t}))[t.length-1]),t){var o=g.Event("beforeItemRemove",{item:t,cancel:!1,options:n});if(i.$element.trigger(o),o.cancel)return;g(".tag",i.$container).filter(function(){return g(this).data("item")===t}).remove(),g("option",i.$element).filter(function(){return g(this).data("item")===t}).remove(),-1!==g.inArray(t,i.itemsArray)&&i.itemsArray.splice(g.inArray(t,i.itemsArray),1)}e||i.pushVal(),i.options.maxTags>i.itemsArray.length&&i.$container.removeClass("bootstrap-tagsinput-max"),i.$element.trigger(g.Event("itemRemoved",{item:t,options:n}))},removeAll:function(){for(g(".tag",this.$container).remove(),g("option",this.$element).remove();0<this.itemsArray.length;)this.itemsArray.pop();this.pushVal()},refresh:function(){var r=this;g(".tag",r.$container).each(function(){var e=g(this),t=e.data("item"),n=r.options.itemValue(t),i=r.options.itemText(t),o=r.options.tagClass(t);(e.attr("class",null),e.addClass("tag "+v(o)),e.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=v(i),r.isSelect)&&g("option",r.$element).filter(function(){return g(this).data("item")===t}).attr("value",n)})},items:function(){return this.itemsArray},pushVal:function(){var t=this,e=g.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(e,!0).trigger("change")},build:function(e){var l=this;if(l.options=g.extend({},c,e),l.objectItems&&(l.options.freeInput=!1),r(l.options,"itemValue"),r(l.options,"itemText"),s(l.options,"tagClass"),l.options.typeahead){var i=l.options.typeahead||{};s(i,"source"),l.$input.typeahead(g.extend({},i,{source:function(e,o){function t(e){for(var t=[],n=0;n<e.length;n++){var i=l.options.itemText(e[n]);r[i]=e[n],t.push(i)}o(t)}this.map={};var r=this.map,n=i.source(e);g.isFunction(n.success)?n.success(t):g.isFunction(n.then)?n.then(t):g.when(n).then(t)},updater:function(e){return l.add(this.map[e]),this.map[e]},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(l.options.typeaheadjs){var t=null,n={},o=l.options.typeaheadjs;g.isArray(o)&&(t=o[0],o.shift()),n=o,l.$input.typeahead(t,n).on("typeahead:selected",g.proxy(function(e,t){g.isArray(n)?l.add(t):n.valueKey?l.add(t[n.valueKey]):l.add(t),l.$input.typeahead("val","")},l))}l.$container.on("click",g.proxy(function(e){l.$element.attr("disabled")||l.$input.removeAttr("disabled"),l.$input.focus()},l)),l.options.addOnBlur&&l.options.freeInput&&l.$input.on("focusout",g.proxy(function(e){0===g(".typeahead, .twitter-typeahead",l.$container).length&&(l.add(l.$input.val()),l.$input.val(""))},l)),l.$container.on("keydown","input",g.proxy(function(e){var t=g(e.target);l.findInputWrapper();if(l.$element.attr("disabled"))l.$input.attr("disabled","disabled");else{e.which;var n=t.val().length;Math.ceil(n/5);t.attr("size",Math.max(this.inputSize,t.val().length))}},l)),l.$container.on("keypress","input",g.proxy(function(e){var t=g(e.target);if(l.$element.attr("disabled"))l.$input.attr("disabled","disabled");else{var r,n,a,i=t.val(),o=l.options.maxChars&&i.length>=l.options.maxChars;l.options.freeInput&&(r=e,n=l.options.confirmKeys,a=!1,g.each(n,function(e,t){if("number"==typeof t&&r.which===t)return!(a=!0);if(r.which===t.which){var n=!t.hasOwnProperty("altKey")||r.altKey===t.altKey,i=!t.hasOwnProperty("shiftKey")||r.shiftKey===t.shiftKey,o=!t.hasOwnProperty("ctrlKey")||r.ctrlKey===t.ctrlKey;if(n&&i&&o)return!(a=!0)}}),a||o)&&(0!==i.length&&(l.add(o?i.substr(0,l.options.maxChars):i),t.val("")),!1===l.options.cancelConfirmKeysOnEmpty&&e.preventDefault());var s=t.val().length;Math.ceil(s/5);t.attr("size",Math.max(this.inputSize,t.val().length))}},l)),l.$container.on("click","[data-role=remove]",g.proxy(function(e){l.$element.attr("disabled")||l.remove(g(e.target).closest(".tag").data("item"))},l)),l.options.itemValue===c.itemValue&&("INPUT"===l.$element[0].tagName?l.add(l.$element.val()):g("option",l.$element).each(function(){l.add(g(this).attr("value"),!0)}))},destroy:function(){this.$container.off("keypress","input"),this.$container.off("click","[role=remove]"),this.$container.remove(),this.$element.removeData("tagsinput"),this.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],t=this.$container[0];e&&e.parentNode!==t;)e=e.parentNode;return g(e)}},g.fn.tagsinput=function(n,i,o){var r=[];return this.each(function(){var e=g(this).data("tagsinput");if(e)if(n||i){if(void 0!==e[n]){if(3===e[n].length&&void 0!==o)var t=e[n](i,null,o);else t=e[n](i);void 0!==t&&r.push(t)}}else r.push(e);else e=new a(this,n),g(this).data("tagsinput",e),r.push(e),"SELECT"===this.tagName&&g("option",g(this)).attr("selected","selected"),g(this).val(g(this).val())}),"string"==typeof n?1<r.length?r:r[0]:r},g.fn.tagsinput.Constructor=a;var t=g("<div />");g(function(){g("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,a,s){"use strict";return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var n=r(this),i=n.length>>>0,o=s(0|t,i);if(o<0)o=a(0,i+o);else if(i<=o)return-1;if(void 0===e){for(;o!==i;++o)if(void 0===n[o]&&o in n)return o}else if(e!=e){for(;o!==i;++o)if(n[o]!=n[o])return o}else for(;o!==i;++o)if(n[o]===e)return o;return-1}}(Object,Math.max,Math.min)),Array.prototype.removeValue=function(e){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var t=this.indexOf(e);return-1<t&&this.splice(t,1),e};var isOpera=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),isFirefox="undefined"!=typeof InstallTrigger,isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,isChrome=!!window.chrome&&!!window.chrome.webstore,isBlink=(isChrome||isOpera)&&!!window.CSS;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,function(){"use strict";function c(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<x;e+=2){(0,$[e])($[e+1]),$[e]=void 0,$[e+1]=void 0}x=0}function s(e,t){var n=this,i=new this.constructor(a);void 0===i[D]&&y(i);var o=n._state;if(o){var r=arguments[o-1];C(function(){return v(o,i,r,n._result)})}else m(n,i,e,t);return i}function l(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(a);return p(t,e),t}function a(){}function u(e){try{return e.then}catch(e){return N.error=e,N}}function d(e,t,n){var i,o,r,a;t.constructor===e.constructor&&n===s&&t.constructor.resolve===l?(r=e,(a=t)._state===O?f(r,a._result):a._state===P?h(r,a._result):m(a,void 0,function(e){return p(r,e)},function(e){return h(r,e)})):n===N?(h(e,N.error),N.error=null):void 0===n?f(e,t):c(n)?(i=t,o=n,C(function(t){var n=!1,e=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(o,i,function(e){n||(n=!0,i!==e?p(t,e):f(t,e))},function(e){n||(n=!0,h(t,e))},t._label);!n&&e&&(n=!0,h(t,e))},e)):f(e,t)}function p(e,t){var n,i;e===t?h(e,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=t),null===n||"object"!==i&&"function"!==i?f(e,t):d(e,t,u(t)))}function i(e){e._onerror&&e._onerror(e._result),g(e)}function f(e,t){e._state===j&&(e._result=t,e._state=O,0!==e._subscribers.length&&C(g,e))}function h(e,t){e._state===j&&(e._state=P,e._result=t,C(i,e))}function m(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+O]=n,o[r+P]=i,0===r&&e._state&&C(g,e)}function g(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,a=0;a<t.length;a+=3)i=t[a],o=t[a+n],i?v(n,i,o,r):o(r);e._subscribers.length=0}}function v(e,t,n,i){var o=c(n),r=void 0,a=void 0,s=void 0,l=void 0;if(o){if((r=function(e,t){try{return e(t)}catch(e){return N.error=e,N}}(n,i))===N?(l=!0,a=r.error,r.error=null):s=!0,t===r)return void h(t,new TypeError("A promises callback cannot return that same promise."))}else r=i,s=!0;t._state!==j||(o&&s?p(t,r):l?h(t,a):e===O?f(t,r):e===P&&h(t,r))}function y(e){e[D]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}var e,o,r,b,w=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=0,_=void 0,k=void 0,C=function(e,t){$[x]=e,$[x+1]=t,2===(x+=2)&&(k?k(n):L())},E="undefined"!=typeof window?window:void 0,S=E||{},T=S.MutationObserver||S.WebKitMutationObserver,I="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),A="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),L=void 0;L=I?function(){return process.nextTick(n)}:T?(o=0,r=new T(n),b=document.createTextNode(""),r.observe(b,{characterData:!0}),function(){b.data=o=++o%2}):A?((e=new MessageChannel).port1.onmessage=n,function(){return e.port2.postMessage(0)}):void 0===E&&"function"==typeof require?function(){try{var e=Function("return this")().require("vertx");return void 0!==(_=e.runOnLoop||e.runOnContext)?function(){_(n)}:t()}catch(e){return t()}}():t();var D=Math.random().toString(36).substring(2),j=void 0,O=1,P=2,N={error:null},M=0,z=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(a),this.promise[D]||y(this.promise),w(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?f(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&f(this.promise,this._result))):h(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===j&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===l){var o=u(t);if(o===s&&t._state!==j)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===q){var r=new n(a);d(r,t,o),this._willSettleAt(r,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===j&&(this._remaining--,e===P?h(i,n):this._result[t]=n),0===this._remaining&&f(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;m(e,void 0,function(e){return n._settledAt(O,t,e)},function(e){return n._settledAt(P,t,e)})},e}(),q=function(){function t(e){this[D]=M++,this._result=this._state=void 0,this._subscribers=[],a!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){p(t,e)},function(e){h(t,e)})}catch(e){h(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return c(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return q.prototype.then=s,q.all=function(e){return new z(this,e).promise},q.race=function(o){var r=this;return new r(w(o)?function(e,t){for(var n=o.length,i=0;i<n;i++)r.resolve(o[i]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},q.resolve=l,q.reject=function(e){var t=new this(a);return h(t,e),t},q._setScheduler=function(e){k=e},q._setAsap=function(e){C=e},q._asap=C,q.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=q},(q.Promise=q).polyfill(),q});var EpiCookie=function(){function a(e){return d.raw?e:encodeURIComponent(e)}function s(e){return"function"==typeof e}function u(e,t){var n=d.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(i," ")),d.json?JSON.parse(e):e}catch(e){}}(e);return s(t)?t(n):n}var i=/\+/g,d={};return{get:function(e,t){for(var n,i=e?void 0:{},o=document.cookie?document.cookie.split("; "):[],r=0,a=o.length;r<a;r++){var s=o[r].split("="),l=(n=s.shift(),d.raw?n:decodeURIComponent(n)),c=s.join("=");if(e===l){i=u(c,t);break}e||void 0===(c=u(c))||(i[l]=c)}return i},set:function(e,t,n){if(1<arguments.length&&!s(t)){if("number"==typeof n.expires){var i=n.expires,o=n.expires=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*i)}return document.cookie=[a(e),"=",(r=t,a(d.json?JSON.stringify(r):String(r))),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var r},remove:function(e,t){return t.expires=-1,set(e,"",t),!get(e)}}}();CookieArray.prototype.read=function(){var e=EpiCookie.get(this.key);this.items=e?e.split(/,/):new Array},CookieArray.prototype.add=function(e){if(e&&(this.read(),e=e.toString(),-1===this.items.indexOf(e))){for(this.items.push(e);0<this.max&&this.items.length>this.max;)this.items.shift();EpiCookie.set(this.key,this.items.join(","),{expires:this.duration,path:"/",domain:this.domain})}},CookieArray.prototype.remove=function(e){if(e){this.read(),e=e.toString();var t=this.items.indexOf(e);-1!==t&&this.items.splice(t,1)}else this.items.shift();EpiCookie.set(this.key,this.items.join(","),{expires:this.duration,path:"/",domain:this.domain})},CookieArray.prototype.removeAll=function(){this.items=new Array,EpiCookie.remove(this.key,{path:"/",domain:this.domain})},CookieArray.prototype.items=function(){return this.read(),this.items};var LastRead=function(){var t=new CookieArray({key:"last_items",duration:7,domain:"baomoi.com",max:10});return{add:function(e){t.add(e)},get:function(){return t.items}}}(),EpiLib={device:null,pageType:"",apiHost:"data.baomoi.com",logHost:"log.baomoi.com",userCookieName:"EpiUser",user:null,isDebug:!1,visitorID:"",load:function(){this.device={platform:"unknown",name:"unknown",type:"unknown",browser:"unknown"};var e=navigator.userAgent.toLowerCase();-1<e.indexOf("ipad")?(this.device.platform="ios",this.device.name="ipad",this.device.type="tablet"):-1<e.indexOf("iphone")?(this.device.platform="ios",this.device.name="iphone",this.device.type="smartphone"):-1<e.indexOf("android")?(this.device.platform="android",this.device.type=-1<e.indexOf("mobile")?"smartphone":"tablet"):-1<e.indexOf("windows phone")?(this.device.platform="windows",this.device.type="smartphone"):-1<e.indexOf("mobile")?this.device.type="smartphone":this.device.type="desktop",-1<e.indexOf("zalo")?this.device.browser="zalo":-1<e.indexOf("msie")||-1<e.indexOf("edge")?this.device.browser="ie":-1<e.indexOf("chrome")?this.device.browser="chrome":-1<e.indexOf("firefox")?this.device.browser="firefox":-1<e.indexOf("safari")&&e.indexOf("chrome")<0&&(this.device.browser="safari"),void 0!==window.page_type&&(this.pageType=window.page_type),(-1<window.location.hostname.indexOf("debug")||-1<window.location.hostname.indexOf("staging"))&&(this.isDebug=!0),EpiLib.waitZA()},getVisitorID:function(){return EpiLib.visitorID||(EpiLib.visitorID=$.cookie("EpiLib.visitorID"),setTimeout(function(){"undefined"!=typeof ZA&&EpiLib.setVisitorID(ZA.getVisitorID())},1)),EpiLib.visitorID},setVisitorID:function(e){EpiLib.visitorID=e,EpiLib.visitorID&&$.cookie("EpiLib.visitorID",EpiLib.visitorID,{expires:30,path:"/",domain:"baomoi.com"})},waitZA:function(){document.addEventListener("ZA.onready",function(){EpiLib.getVisitorID()})},getUserId:function(){return EpiLib.user?EpiLib.user.userId:null},getPageType:function(){return EpiLib.pageType},loadPlugin:function(e,t,n){if($("body").hasClass(e))n&&n();else{var i=t.search("//")<0?"//baomoi-static.zadn.vn"+t:t;jQuery.ajax({url:i,dataType:"script",cache:!0}).done(function(){$("body").addClass(e),n&&n()})}},loadStyle:function(e,t){var n=t.search("//")<0?"//baomoi-static.zadn.vn"+t:t,i=$("#"+e);0<i.length||(i=$("<link>",{rel:"stylesheet",type:"text/css",href:n,media:"all",id:e}),$("head").append(i),log("Style loaded: "+n))},now:function(){return+new Date},formatTime:function(e,t){var n,i,o,r,a;a="date"===jQuery.type(e)?e:parseInt(e)<1e4?new Date(e):new Date(1e3*parseInt(e));var s=t&&t.prefix?t.prefix:"";if(t&&!0===t.friendly){if(n=EpiLib.now()-a.getTime(),n-=1e3*(i=Math.floor(n/1e3/60/60/24))*60*60*24,n-=1e3*(o=Math.floor(n/1e3/60/60))*60*60,r=Math.floor(n/1e3/60),"homepage"===EpiLib.pageType&&(0<i||12<o))return"";if(0===i)return 0<o?s+o+" giờ":s+r+" phút"}return s+" "+(i=(a.getDate()<10?"0":"")+a.getDate())+"/"+((a.getMonth()<9?"0":"")+(a.getMonth()+1))+"/"+a.getFullYear()%2e3},getUrlParam:function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return t?t[1]||0:null},getCookie:function(e){var t=document.cookie.match(new RegExp(e+"=([^;]+)"));return t?t[1]:null},setCookie:function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var o="expires="+i.toGMTString();document.cookie=e+"="+t+"; "+o},toLocation:function(e){var t=document.createElement("a");return t.href=e,t},truncateText:function(e,t,n){if(!e)return"";if(n=n||"&hellip;",e.length<t)return e;var i=e.substr(0,t).match(/([^A-Za-z0-9_]*)[A-Za-z0-9_]*$/);if(!i)return n;var o=t-i[0].length;return/[\s\(\[\{]/.test(e[o])&&o--,(o?e.substr(0,o+1):"")+n},convert2KoDau:function(e){if(!e)return"";var t=e;return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")).replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\"| |\"|\&|\#|\[|\]|~/g,"-")).replace(/-+-/g,"-")).replace(/^\-+|\-+$/g,"")},removeDiacritic:function(e){if(!e)return"";var t=e;return t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")},replaceUrlParam:function(e,t,n){var i=new RegExp("([?&])("+t+"=).*?(&|$)"),o=e;return 0<=e.search(i)?o=""!==n?e.replace(i,"$1$2"+n+"$3"):e.replace(i,""):""!==n&&(o=o+(0<o.indexOf("?")?"&":"?")+t+"="+n),o},removeUrlParam:function(e,t){var n=e.split("?");if(2<=n.length){for(var i=encodeURIComponent(t)+"=",o=n[1].split(/[&;]/g),r=o.length;0<r--;)-1!==o[r].lastIndexOf(i,0)&&o.splice(r,1);return e=n[0]+(0<o.length?"?"+o.join("&"):"")}return e},removeUrlHash:function(e,t){var n=e.split("#");if(2<=n.length){for(var i=encodeURIComponent(t)+"=",o=n[1].split(/[&;]/g),r=o.length;0<r--;)-1!==o[r].lastIndexOf(i,0)&&o.splice(r,1);return e=n[0]+(0<o.length?"#"+o.join("&"):"")}return e},popupCenter:function(e,t,n,i){var o=void 0!==window.screenLeft?window.screenLeft:screen.left,r=void 0!==window.screenTop?window.screenTop:screen.top,a=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-n/2+o,s=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/3-i/3+r,l=window.open(e,t,"scrollbars=yes, width="+n+", height="+i+", top="+s+", left="+a);return l.focus&&l.focus(),l},shuffleArray:function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e},getMetaContent:function(e){for(var t=document.getElementsByTagName("meta"),n=0;n<t.length;n++)if(t[n].getAttribute("property")===e)return t[n].getAttribute("content");return""}};EpiLib.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,o,r,a,s,l="",c=0;for(e=EpiLib.base64._utf8_encode(e);c<e.length;)o=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(n=e.charCodeAt(c++))>>4,a=(15&n)<<2|(i=e.charCodeAt(c++))>>6,s=63&i,isNaN(n)?a=s=64:isNaN(i)&&(s=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return l},decode:function(e){var t,n,i,o,r,a,s="",l=0;for(e=e.replace(/[^A-Za-z0-9+\/=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(o=this._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(r=this._keyStr.indexOf(e.charAt(l++)))>>2,i=(3&r)<<6|(a=this._keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!==r&&(s+=String.fromCharCode(n)),64!==a&&(s+=String.fromCharCode(i));return EpiLib.base64._utf8_decode(s)},_utf8_encode:function(e){var t,n;for(e=e.replace(/rn/g,"n"),t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){var t,n,i,o,r;for(i="",r=t=o=0;o<e.length;)(r=e.charCodeAt(o))<128?(i+=String.fromCharCode(r),o++):191<r&&r<224?(t=e.charCodeAt(o+1),i+=String.fromCharCode((31&r)<<6|63&t),o+=2):(t=e.charCodeAt(o+1),n=e.charCodeAt(o+2),i+=String.fromCharCode((15&r)<<12|(63&t)<<6|63&n),o+=3);return i}},EpiLib.isUndefined=function(e){return void 0===e},EpiLib.toStr=function(e){return EpiLib.isUndefined(e)||null===e?"":e+""},EpiLib.Code={SESSION_EXPIRED:-105,SESSION_MISSING:-107},EpiLib.load();var LogUrlBuilder=function(e,t){var n=EpiLib.getVisitorID();void 0!==t&&n&&(t.visitorId=n),"extlog"===e?this.retLog="//"+EpiLib.logHost+"/"+e+"?i="+t.i+"&u="+t.u+"&r="+t.r+"&t="+t.t:(this.data=EpiLib.base64.encode(JSON.stringify(t)),this.retLog="//"+EpiLib.logHost+"/"+e+"?data="+this.data),this.build=function(){return this.retLog}},EpiTemplate=function(){var i={};return{LIST_ITEM_ARTICLE_PR:"/templates/list/item_article_pr.html",LIST_ITEM_ARTICLE:"/templates/list/item_article_pr.html",MODAL_LOGIN:"/templates/modals/login-1.0.0.html",MODAL_REPORT:"/templates/modals/report_article.html",MODAL_CONFIRM:"/templates/modals/confirm.html",MODAL_INFO:"/templates/modals/info.html",LIST_ITEM_CHANNEL:"/templates/list/item_channel_2.html",LIST_ITEM_FOLLOW:"/templates/list/item_follow_2.html",BOX_RECOMMEND:"/templates/box/box_recommend.html",BOX_FOLLOW:"/templates/box/box_follow.html",BOX_CHANNEL:"/templates/box/box_channel_3.html",LIST_ITEM_FOLLOW:"/templates/list/item_follow_2.html",init:function(){EpiTemplate.load(EpiTemplate.MODAL_CONFIRM),EpiTemplate.load(EpiTemplate.MODAL_INFO)},load:function(t,n){i[t]?n&&n.onCompleted&&n.onCompleted(i[t]):$.get(t,function(e){e&&(i[t]=e,n&&n.onCompleted&&n.onCompleted(e))})}}}();EpiTemplate.init();var EpiAPI=function(){return callWithCredentials=function(e,t,n){n&&$.ajax({url:e,xhrFields:{withCredentials:!0},dataType:"json",data:t,success:function(e){0<=e.error_code?n.success&&(e.result?n.success(e.result):e.data?n.success(e.data):n.success(e)):n.error&&n.error(e.error_code)||e.error_code!==EpiLib.Code.SESSION_EXPIRED&&e.error_code!==EpiLib.Code.SESSION_MISSING||EpiAuth.renew()},error:function(){n.error&&n.error(-1)}})},call=function(e,t,n){n&&$.ajax({url:e,dataType:"json",data:t,success:function(e){0<=e.error_code?n.success&&(e.result?n.success(e.result):e.data?n.success(e.data):n.success(e)):n.error&&n.error(e.error_code)},error:function(){n.error&&n.error(-1)}})},{Usersettings:(l="//"+EpiLib.apiHost+"/setting/user",{get:function(t){t&&t.data&&callWithCredentials(l,t.data,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},bookmark:function(t){t&&callWithCredentials(l,{method:"bookmark",contentids:t.ids.join()},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},hasBookmark:function(t){t&&callWithCredentials(l,{method:"hasbookmark",contentids:t.ids.join()},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},remove:function(t){t&&callWithCredentials(l,{method:"remove"+t.type,contentids:t.ids.join()},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},clear:function(t){t&&callWithCredentials(l,{method:"clear"+t.type},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},follow:function(t){t&&callWithCredentials(l,{method:"follow",zone:t.zone},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},isfollowed:function(t){t&&callWithCredentials(l,{method:"isfollowed",zone:t.zone},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},unfollow:function(t){t&&callWithCredentials(l,{method:"unfollow",zone:t.zone},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},getfollows:function(t){if(t){var e=$.extend({},t.data,{method:"getfollows"});callWithCredentials(l,e,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}}}),WebUserCloud:(s="//"+EpiLib.apiHost+"/web/cloud/user",{getfollows:function(t){if(t){var e=$.extend({},t.data,{method:"getfollowsbyzone"});callWithCredentials(s,e,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}}}),ReportContent:(a="//"+EpiLib.apiHost+"/api/v2.0/report/content",{send:function(t){t&&callWithCredentials(a,{contentid:t.id,feedback:t.data,contenttype:t.type},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}}),Auth:(t="//"+EpiLib.apiHost+"/auth",r="//"+EpiLib.apiHost+"/web/auth",{register:function(t){t&&callWithCredentials(r+"/register",t.data,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},logout:function(e){callWithCredentials(t+"/logout","",{})}}),WebData:(o="//"+EpiLib.apiHost+"/web/content/get",{get:function(t){t&&call(o,t.data,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}}),WebFeed:(i="//"+EpiLib.apiHost+"/web/feed/user",{get:function(t){t&&callWithCredentials(i,t.data,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}}),Recommend:{get:function(t){t&&t.data&&callWithCredentials(t.data.api,t.data.query,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}},Notification:(e="//"+EpiLib.apiHost+"/notification",{subscribe:function(t){t&&callWithCredentials(e+"/subscribe",t.data,{success:function(e){return t.success(e)},error:function(e){return t.success({bmpnid:"xab.1"})}})},unsubscribe:function(t){t&&callWithCredentials(e+"/unsubscribe",t.data,{success:function(e){return t.success(e)},error:function(e){return t.success()}})}}),Channel:(n="//"+EpiLib.apiHost+"/web/channel/user",{getList:function(t){t&&callWithCredentials(n,{method:"getchannel",start:0,size:t.size?t.size:100,top:t.top?t.top:0,imgsize:t.imgsize?t.imgsize:"w200_r1x1"},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},setList:function(t){t&&callWithCredentials(n,{method:"setlistchannel",channelids:t.channelids.join(",")},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},get:function(t){t&&callWithCredentials(n,{method:"getchannel",channelids:t.channelids.join(",")},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})},set:function(t){if(t){var e=$.extend({},t.data,{method:"setchannel"});callWithCredentials(n,e,{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}},remove:function(t){t&&callWithCredentials(n,{method:"removechannel",channelids:t.channelids.join(",")},{success:function(e){return t.success(e)},error:function(e){return t.error(e)}})}})};var n,e,i,o,t,r,a,s,l}(),zalo=function(){var t=[],e=!1;return initZalo=function(){return!(e||"undefined"==typeof ZaloLoginWidget||!ZaloLoginWidget.init)&&(e=!0,ZaloLoginWidget.init({sessionName:"za_bm_sid",showName:!0,onLoad:function(e){0===e.error_code&&(e.data.logged?t&&$.each(t,function(e,t){t&&t.completed&&t.completed()}):(EpiLib.user&&(network=EpiLib.user.network,"zalo"===network&&"zalo"!==EpiLib.device.browser&&EpiAuth.logout("none")),"zalo"===EpiLib.device.browser&&zalo.login()))},onLogin:function(e){t&&$.each(t,function(e,t){t&&t.completed&&t.completed()})}}),!0)},{init:function(e){e&&e.domain&&e.domain,initZalo()},login:function(){"undefined"!=typeof ZaloLoginWidget&&ZaloLoginWidget.login&&ZaloLoginWidget.login()},logout:function(e){console.log("calling logout"),"undefined"!=typeof ZaloLoginWidget&&ZaloLoginWidget.logout&&ZaloLoginWidget.logout(),e&&e.success&&e.success()},on:function(e){e&&t.push(e)}}}(),EpiAuth=function(){var n=!1;return helloOn=function(){hello.on("auth.login",function(i){hello(i.network).api("/me").then(function(n){EpiLib.user||EpiAPI.Auth.register({data:{socialId:i.network+"_"+n.id,email:n.email,firstName:n.first_name,lastName:n.last_name,displayName:n.name,avatar:n.thumbnail,gender:n.gender,birthday:n.birthday,language:n.language?n.language:n.locate},success:function(e){var t=new EpiUser(e.userId,n.name,i.network,e.session,e.avatar);EpiLib.user=t,$.cookie(EpiLib.userCookieName,JSON.stringify(t),{expires:365,path:"/",domain:"baomoi.com"}),$(document).trigger("user:loggedin",[t,!0])},error:function(e){console.log("login "+i.network+" error: "+e)}})})})},registerZaloUser=function(t){return n?n=!1:(n=!0,EpiAPI.Auth.register({data:{socialId:"zalo"},success:function(e){var t=new EpiUser(e.userId,e.displayName,"zalo",e.session,e.avatar.replace(/^http:\/\//i,"https://"));EpiLib.user=t,$.cookie(EpiLib.userCookieName,JSON.stringify(t),{expires:365,path:"/",domain:"baomoi.com"}),n=!1,$(document).trigger("user:loggedin",[t,!0])},error:function(e){return console.log("login zalo error"),n=!1,(e===EpiLib.Code.SESSION_EXPIRED||e===EpiLib.Code.SESSION_MISSING)&&(t&&t.error&&t.error(e),!0)}}),!0)},zaloOn=function(){zalo.on({completed:function(){registerZaloUser()}})},{init:function(){void 0!==$.cookie(EpiLib.userCookieName)&&(EpiLib.user=JSON.parse($.cookie(EpiLib.userCookieName))),hello.init({facebook:"128990640458592",google:"271376364475-3e33kk4lblm2299v5entjn6oh2bss7ti.apps.googleusercontent.com"},{scope:"email",redirect_uri:"/login-redirect.html",display:"page"}),zalo.init({domain:"baomoi.com",redirect_url:"https://baomoi.com/zalo-redirect.html"}),zaloOn(),helloOn(),EpiLib.user&&(network=EpiLib.user.network,"zalo"!==network&&$(document).trigger("user:loggedin",[EpiLib.user,!1]))},login:function(e){"zalo"===e?zalo.login():hello(e).login()},logout:function(e){e||EpiLib.user&&(e=EpiLib.user.network),"zalo"===e?zalo.logout():$.removeCookie(EpiLib.userCookieName,{path:"/",domain:"baomoi.com"})&&(EpiAPI.Auth.logout(),EpiLib.user&&(EpiLib.user=null,"zalo"===e?zalo.logout():"facebook"!==e&&"google"!==e||hello(e).logout().then(function(){},function(e){console("Sign out error: "+e.error.message)})),$(document).trigger("user:loggedout"))},renew:function(){console.log("renew"),registerZaloUser({error:function(){EpiAuth.logout("none")}})}}}(),EpiPR=function(){var s="mobile",l="w300_r4x3";return buildTmplData=function(n,e){var i="w300_r4x3";e&&(i=e);var o=n.mediaurl;if(!o&&n.mediaurls){var t=n.mediaurls;o=t[0]}return{item:{title:n.title,url:{click:n.clickurl,tracking:n.trackingurl,source:n.displayUrl,tracking3rd:n.thirdPartyImpressionUrl},img:function(){var e=[];if(o){var t=o.replace("//adtima-media.zadn.vn","//photo-atm-baomoi.zadn.vn/"+i+"/adtima-media.zadn.vn");t=t.replace("//adtima-media-td.zadn.vn","//photo-atm-baomoi.zadn.vn/"+i+"/adtima-media.zadn.vn"),e.push({img_src:t,img_alt:n.title})}return e}}}},{init:function(e){e&&e.platform&&(s=e.platform?e.platform:s,l=e.preset?e.preset:l)},loadUnrendered:function(n){console.log("lupr");var i=[];$(".is-pr.wait-render").each(function(e,t){i.push($(t).attr("zone"))}),0<i.length&&EpiTemplate.load(EpiTemplate.LIST_ITEM_ARTICLE_PR,{onCompleted:function(a){var e="https://api.adtimaserver.vn/zad/zone/baomoiPR?zones="+i.join(",");window.adtimaConfig&&window.adtimaConfig.contentId&&(e=e+"&contentId="+window.adtimaConfig.contentId);var t=EpiLib.getVisitorID();t&&(e=e+"&uid="+t),"undefined"!=typeof ZA&&(e=e+"&ver=za_version%3D"+ZA.version),$.get(e,function(e,t){e?(prData="object"==typeof e?e.data:JSON.parse(e).data,$(".is-pr.wait-render").each(function(e,t){var n=$(t).attr("zone"),i=prData[n];if(Array.isArray(i)&&0<i.length){$(t).html(Mustache.render(a,buildTmplData(i[0],l))),$(t).show(),$(t).removeClass("wait-render");var o="|pr";$(this).parents("[data-track]").each(function(){o=$(this).attr("data-track")+o}),"|"===o.substring(0,1)&&(o=EpiPage.catePath()+o);var r=o.replace(/\|/g,"/");$(t).append($("<img>",{class:"lazy","data-src":"//"+EpiLib.logHost+"/imps?key="+s+"track/imps/"+r+"&rand="+Math.random()})),$(t).append($("<img>",{class:"lazy","data-src":"//"+EpiLib.logHost+"/imps?key="+s+"track/imps/pr/"+n+"&rand="+Math.random()})),$(t).find(".lazy").lazy({visibleOnly:!0,threshold:0})}}),n&&n.onCompleted&&n.onCompleted()):console.log("status = "+t)})}})},loadNewestBox:function(){console.log("lnbpr");var s=$(".newest-box .story");0<s.length&&EpiTemplate.load(EpiTemplate.LIST_ITEM_ARTICLE_PR,{onCompleted:function(a){var e="https://api.adtimaserver.vn/rdext/json?zoneId=1136489259452549284&count=3",t=EpiLib.getVisitorID();t&&(e=e+"&uid="+t),"undefined"!=typeof ZA&&(e=e+"&ver=za_version%3D"+ZA.version),$.get(e,function(e,t){if(e){prData="object"==typeof e?e.data:JSON.parse(e).data;var n=prData;if(Array.isArray(n)&&0<n.length){for(var i=2*(n.length-1)+1,o=0;o<i;o++)s[s.length-1].remove();var r=0;$($(".is-pr.nb-wait-render").get().reverse()).each(function(e,t){r<n.length&&($(t).html(Mustache.render(a,buildTmplData(n[r++],"w200_r1x1"))),$(t).show(),$(t).removeClass("nb-wait-render"))})}}})}})}}}();EpiUi.showPopup=function(e,t){var n=$(e);return 0===n.length&&($("body").append($("<div>",{id:"#"===e[0]?e.replace("#",""):"",class:"."===e[0]?e.replace(".",""):""})),n=$(e)),n.html(t),n.prepend($("<div>",{class:"blocker"})),$("body").addClass("no-scroll"),n.close=function(){$(this).remove(),$("body").removeClass("no-scroll")},$(e+" .close-modal").unbind("click"),$(e+" .close-modal").on("click",function(){n.close()}),$(".blocker").unbind("click"),$(".blocker").on("click",function(){n.close()}),n},EpiUi.showConfirmModal=function(n){n&&n.data&&EpiTemplate.load(EpiTemplate.MODAL_CONFIRM,{onCompleted:function(e){var t=EpiUi.showPopup("#"+n.data.id+"-container",Mustache.render(e,n.data));t.find(".confirm").click(function(e){e.preventDefault(),n.confirm&&n.confirm(),t.close()}),t.find(".cancel").click(function(e){e.preventDefault(),n.cancel&&n.cancel(),t.close()})}})},EpiUi.showInfoModal=function(n){n&&n.data&&EpiTemplate.load(EpiTemplate.MODAL_INFO,{onCompleted:function(e){var t=EpiUi.showPopup("#"+n.data.id+"-container",Mustache.render(e,n.data));t.find(".confirm").click(function(e){e.preventDefault(),n.confirm&&n.confirm(),t.close()})}})},EpiUi.loading=function(){var n=$("<div>",{class:"loading-popup",style:"display: none; font-size: 14px"}).appendTo($("body"));return{show:function(e,t){t&&n.addClass(t),e||(e="Đang tải ..."),n.html(e),n.show()},hide:function(){n.hide(),n.removeClass(),n.addClass("loading-popup")}}}(),EpiUi.Removable=(wrapItem=function(t,n){button=$("<button>",{class:"story__delete"}).appendTo(t).click(function(e){e.preventDefault(),n&&n(t)})},{wrapItems:function(e,n){$.each(e,function(e,t){wrapItem($(t),n)})},wrapList:function(t,n){t.addClass("removable"),button=$("<button>",{class:"delete-all"}).append($("<i>",{class:"spr spr--recycle"})).append("<span>Xóa tất cả</span>").appendTo(t).click(function(e){e.preventDefault(),n&&n(t)})}}),EpiUi.UserProfile=(hideProfile=function(){$(".login").show(),$(".logged").hide()},showProfile=function(e){var t=$(".logged"),n=$(t).find(".uName__thumb");if(n.find("img").remove(),$(t).find(".uName .text").text(e.displayName),e.avatar&&""!==e.avatar){var i=e.avatar;"zalo"===e.network&&(i=i.replace(/^http:\/\//i,"https://")),n.append($("<img/>",{id:"user-avatar",alt:"avatar",width:"24",height:"24"}).on("load",function(){n.show()}).on("error",function(){n.hide()}).attr("src",i))}else n.hide();$(".login").hide(),$(t).show(),"zalo"===EpiLib.device.browser&&$("li.log-out").hide()},{init:function(){$(document).on("user:loggedout",function(){hideProfile(),EpiUi.UserProfile.closeUserAction()}),$(document).on("user:loggedin",function(e,t){showProfile(t),EpiUi.UserProfile.closeUserAction()}),$(".uName").click(function(){EpiUi.UserProfile.toggleUserAction()})},closeUserAction:function(){var e=$(".uName");e.removeClass("has-touched"),e.next().removeClass("is-active")},toggleUserAction:function(){var e=$(".uName");e.toggleClass("has-touched"),e.next().toggleClass("is-active")}}),EpiPage.catePath=function(){var e="";return get=function(){void 0!==window.cate_path&&(e=window.cate_path),""===e&&(e=EpiLib.pageType)},function(){return""===e&&get(),e}}(),EpiPage.renderArticles=function(e,o){e.get({data:o.data,success:function(e){if(e&&o.transform&&(e=o.transform(e)),e){var n=$("<div>",{style:"display:none"}),i=0;o.parent&&n.appendTo(o.parent),$.each(e,function(e,t){0<o.size&&i>=o.size||(!o.excludedIds||o.excludedIds.indexOf(t.contentId)<0)&&(EpiUi.Article.render(t,e).appendTo(n),i++)}),EpiUi.Article.format(n);var t=n.find(".story");o.success&&o.success(t),n.remove()}},error:function(e){o.error&&o.error(e)}})},EpiPage.SoccerWidgetHolder={shouldShowWidget:function(e){if(window.page_type&&"category"===window.page_type&&window.cate_path)switch(window.cate_path){case"the-thao":case"bong-da-quoc-te":case"bong-da-viet-nam":return!0}return!1}},EpiPage.UrlCorrect=function(e,t){switch(EpiLib.pageType){case"detail":var n=$("link[rel="+t+"]").attr("href");n&&(n=encodeURI(n));var i=$('meta[property="og:url"]').attr("content"),o=window["domain_"+t];i&&o&&(i=i.replace(new RegExp("^https://"+window.domain_canonical,"i"),"https://"+o),i=encodeURI(i));var r=window.location.href;n&&0!==r.indexOf(n)&&(i&&0===r.indexOf(i)||(window.location=n))}},EpiPage.initProfileUserInfo=function(){var n=function(e){if(e){var t=$(".user-info p.name span.dplname");e.displayName&&t.text(e.displayName);var n=$(".user-info .user-info__thumb");if(n.find("img").remove(),e.avatar&&""!==e.avatar){var i=e.avatar;"zalo"===e.network&&(i=i.replace(/^http:\/\//i,"https://"));var o=$("<img/>",{id:"user-avatar",alt:"avatar"}).on("load",function(){o.fadeIn("slow")}).on("error",function(){o.hide()}).attr("src",i).attr("width",120).attr("height",120);o.hide(),n.append(o)}}};$(document).on("user:loggedin",function(e,t){n(t)}),EpiLib.user&&n(EpiLib.user)},EpiPage.loadRecommendSections=function(e,f){var t={anchor:"",size:3,apis:[]},h={name:"",params:{imgsize:e||"w300_r3x2",method:"recommend"},trackType:!1},n=window.RECOMMEND_SECTIONS||[];0<n.length&&n.forEach(function(e,a){var i=$.extend(!0,{},t,e),s=$(i.anchor);if(0<s.length){var l=[];$(".story[data-aid]").each(function(e,t){var n=parseInt($(this).attr("data-aid"));isNaN(n)||l.push(n)});var c={size:2*i.size+20},u="";0<EpiLib.getUserId()?(c.userId=EpiLib.getUserId(),u="uid"):(c.contentids=LastRead.get().join(),u="cids");var d=i.apis.length,p=function(e){var t,o,r,n;e<d&&(t=i.apis[e],o={success:function(){f&&f.success&&f.success()},error:function(){p(e+1)}},r=$.extend(!0,{},h,t),n=$.extend(!0,{},c,r.params),r.api?EpiPage.renderArticles(EpiAPI.Recommend,{data:{api:r.api,query:n},size:i.size,excludedIds:l,success:function(e){if(0<e.length){for(var t=r.name?r.name:"rsec"+a,n=t+"-item",i=0;i<e.length;i++)r.trackType?$(e[i]).attr("data-track","|"+t+"|index"+i+"|rtype_"+u):$(e[i]).attr("data-track","|"+t+"|index"+i),$(e[i]).addClass("is-recommend"),$(e[i]).addClass(n);s.after(e),EpiUi.Article.trackSelectorImps($("."+n)),o&&o.success&&o.success()}else o&&o.error&&o.error()},error:function(){o&&o.error&&o.error()}}):o&&o.error&&o.error())};p(0)}})},EpiPage.initFollowPage=function(){var c={p:"publisher",t:"cluster",gt:"cluster"},u={publisher:0,cluster:0};return function(e){var t=0,n=!1,o=$("#followed-list-"+e),i=o.closest(".my-follow__item").find(".empty-state"),r=$("#stats-"+e+" b"),a=function(){o.closest(".my-follow__item").find(".loading-more").hide(),o.find(".key").length<=0?(i.show(),u[e]=0):(i.hide(),u[e]=o.find(".key").length),r.text(u[e]),$("#stats-total b").text(u.publisher+u.cluster)},s=function(n){n&&null!==EpiLib.getUserId()&&EpiTemplate.load(EpiTemplate.LIST_ITEM_FOLLOW,{onCompleted:function(i){EpiAPI.WebUserCloud.getfollows({data:{start:n.start,size:n.size,zonetype:n.zoneType},success:function(e){var t=e[n.zoneType+"s"];t&&Array.isArray(t)?t.length<=0?n.empty&&n.empty():(t.forEach(function(e,t){var n=c[e.zoneId.split("_")[0]];e.css_class="",n&&(e.css_class+=" item-"+n),"cluster"===n&&"true"!==e.isActive&&(e.css_class+=" disable"),e.name||(e.name="Chưa đặt tên"),e.position=t+1,e.id=e.zoneId,e.url="/s/"+e.zoneId.replace("_","/")+".epi",e.alias=EpiLib.removeDiacritic(e.name),o.append(Mustache.render(i,e))}),n.success&&n.success()):n.error&&n.error()},error:function(){n.error&&n.error()}})}})};o.on("click touch",".unfollow",function(e){e.preventDefault();var t=$(e.currentTarget.closest(".key")),n=t.attr("data-id"),i=t.find(".name").text(),o="";t.hasClass("item-publisher")?o="Nguồn":t.hasClass("item-cluster")&&(o="Chủ đề "),EpiUi.showConfirmModal({data:{id:"delete-modal",title:"Bỏ theo dõi ",text:o+' "'+i+'" sẽ bị bỏ theo dõi, bạn có muốn thực hiện?',confirm:"Xóa",cancel:"Hủy"},confirm:function(){EpiAPI.Usersettings.unfollow({zone:n,success:function(){t.fadeOut(function(){t.remove(),a()})},error:function(e){}})}})}),$(document).on("user:loggedout",function(){document.location="/"}),null===EpiLib.user?document.location="/":n||(EpiUi.loading.show("Đang tải ..."),n=!0,s({start:200*t,size:200,zoneType:e,success:function(){t++,EpiUi.loading.hide(),n=!1,a()},error:function(){EpiUi.loading.hide(),n=!1,a()},empty:function(){EpiUi.loading.hide(),n=!1,a()}}));var l=$("#filter-query-"+e);l.on("keyup",function(){var n=EpiLib.removeDiacritic(l.val());o.find(".key").filter(function(){var e=$(this),t=-1<e.data("alias").indexOf(n);e.toggle(t)})})}}(),EpiPage.initProfilePage=function(){var e=function(e){var t=$(e),n=t.find("#dropdown-btn"),i=t.find(".drop-down");n.on("click touch",function(e){e.preventDefault(),t.toggleClass("is-active"),t.hasClass("is-active")?i.show():i.hide()})};e("#followed-publishers"),e("#followed-clusters"),$(".btn-create").click(function(e){$("#channel-box").data("total")>=Channel.getMax()&&(e.preventDefault(),EpiUi.showInfoModal({data:{id:"report-failed-modal",title:"Chỉ thể tạo tối đa "+Channel.getMax()+" kênh",text:"Bạn không thể tạo thêm do đã đạt đến hạn mức cho phép!",icon:"spr--cancel-big",confirm:"Đóng"}}))}),$(document).on("user:loggedout",function(){document.location="/"})},EpiPage.initFollowZone=function(t,e){var n=!1,i=!1,o=$(e),r=function(){EpiAPI.Usersettings.isfollowed({zone:t,success:function(e){EpiLib.user&&e&&Array.isArray(e)&&0<=e.indexOf(t)&&(o.addClass("is-followed"),n=!0)},error:function(e){}})};$(document).on("user:loggedin",function(){r()}),EpiLib.getUserId()&&r(),$(document).on("user:loggedout",function(){n&&(o.removeClass("is-followed"),n=!1)}),o.on("click touch",function(e){e.preventDefault(),!i&&EpiLib.user&&(i=!0,n?EpiAPI.Usersettings.unfollow({zone:t,success:function(e){o.removeClass("is-followed"),n=i=!1},error:function(e){i=!1}}):EpiAPI.Usersettings.follow({zone:t,success:function(e){EpiLib.user&&(o.addClass("is-followed"),n=!0),i=!1},error:function(e){i=!1}}))})},EpiPage.initUserPageLoadmore=function(i,e){var t=0,n=!1,o=!1,r=$(".box-content"),a=$(".empty-state"),s=$(".tools-box__delete-all"),l=$("#stats b"),c=function(){n||o||(EpiUi.loading.show("Đang tải tin ..."),n=!0,d({page:i,start:30*t,size:30,success:function(){0===t&&u(),t++,EpiUi.loading.hide(),n=!1,p(),1===t&&c()},error:function(){o=!0,EpiUi.loading.hide(),n=!1,p()},empty:function(){o=!0,EpiUi.loading.hide(),n=!1,p()}}))},u=function(){$(window).bind("scroll",function(){$(window).scrollTop()>=r.height()-$(window).height()-500&&c()})},d=function(t){t&&null!==EpiLib.getUserId()&&EpiPage.renderArticles(EpiAPI.Usersettings,{data:{method:"get"+t.page,imgsize:e,start:t.start,size:t.size},size:t.size,success:function(e){e?0===e.length?t.empty():(r.children().length<=0&&$(e[0]).addClass("is-first"),r.append(e),EpiUi.Removable.wrapItems(e,f),t.success()):t.error()},error:function(e){t.error()}})},p=function(){if($(".loading-more").hide(),r.find(".story").length<=0)a.show(),s.hide(),l.text("0");else{a.hide(),s.show();var e=""+r.find(".story").length;o||(e+="+"),l.text(e)}},f=function(t){var e=t.find(".story__heading").text(),n="";switch(i){case"bookmark":n="tin đã lưu";break;case"history":n="tin đã đọc"}EpiUi.showConfirmModal({data:{id:"delete-modal",title:"Xóa bài viết khỏi "+n,text:'Bài viết "'+e+'" sẽ bị xóa khỏi '+n+", bạn có muốn thực hiện?",confirm:"Xóa",cancel:"Hủy"},confirm:function(){EpiUi.loading.show("Đang xóa");var e=t.attr("data-aid");EpiAPI.Usersettings.remove({type:i,ids:[e],success:function(){t.slideUp("fast",function(){t.remove(),p()}),EpiUi.loading.hide()},error:function(){EpiUi.loading.hide()}})}})};s.click(function(e){e.preventDefault(),function(e){var t="";switch(i){case"bookmark":t="tin đã lưu";break;case"history":t="tin đã đọc"}EpiUi.showConfirmModal({data:{id:"delete-modal",title:"Xóa tất cả",text:"Tất cả "+t+" sẽ bị xóa, bạn có muốn thực hiện?",confirm:"Xóa",cancel:"Hủy"},confirm:function(){EpiUi.loading.show("Đang xóa"),EpiAPI.Usersettings.clear({type:i,success:function(){e.empty(),p(),EpiUi.loading.hide()},error:function(){EpiUi.loading.hide()}})}})}(r)}),$(document).on("user:loggedout",function(){document.location="/"}),null===EpiLib.user?document.location="/":c()},EpiPage.initBoxFollow=function(e,a,t){var s=$(".follow-timeline");s.length<=0?((s=$("<div>").addClass("follow-timeline")).attr({"data-track":"|follow"}),$(e).after(s)):s.empty();$(document).on("user:loggedout",function(e){s.empty(),t&&t.onChanged&&t.onChanged()}),$(document).on("user:loggedin",function(e){var r;s.empty(),r={success:function(){t&&t.onChanged&&t.onChanged()}},EpiTemplate.load(EpiTemplate.BOX_FOLLOW,{onCompleted:function(o){EpiAPI.WebFeed.get({data:{start:0,size:20,imgsize:a.preset},success:function(e){if(e&&0<e.length){for(var t=[],n=0;n<a.size&&n<e.length;n++){var i=e[n];i.dataTrack="|index"+n,t.push(EpiUi.Article.render(i).prop("outerHTML"))}s.append(Mustache.render(o,{contents:t})),EpiUi.Article.format(s),EpiUi.Article.trackImps(s)}else s.empty();r&&r.success&&r.success()},error:function(){r&&r.error&&r.error()}})}})})},EpiPage.initBoxChannel=function(e,t,n){var i=$(".channel-timeline");i.length<=0&&((i=$("<div>")).addClass("channel-timeline"),$(e).after(i)),Channel.initBox(i,t,n)},EpiPage.initFollowedContentsPage=function(e,n){if(null===EpiLib.user)document.location="/";else{var t={start:0,size:100,imgsize:e.preset};EpiPage.renderArticles(EpiAPI.WebFeed,{data:t,size:50,transform:function(e){return e&&e.result?e.result:e},success:function(e){if(0===e.length)$(".timeline").append($("<div>",{class:"no-results",text:"Không tìm thấy kết quả phù hợp!"}));else{$(e[0]).addClass("is-first");for(var t=0;t<e.length;t++)$(e[t]).attr("data-track","|index"+t);$(".timeline").append(e),n&&n.success&&n.success(),EpiUi.Article.trackImps($(".timeline"))}},error:function(e){$(".timeline").children().length<=0&&$(".timeline").append($("<div>",{class:"no-results",text:"Không tìm thấy kết quả phù hợp!"}))}})}},EpiPage.removeDuplicateClusterTopicStory=function(){var e=$(".topic-timeline").find(".story"),n=[];(e.each(function(e){var t=$(this).attr("data-aid");n.push(t)}),n.length<=0)||$(".timeline").children(".story").each(function(e){var t=$(this).attr("data-aid");n.includes(t)&&$(this).remove()})};var UserWatcher=function(){function r(e){n="active",$(document).trigger("userwatcher:active"),t&&clearTimeout(t),t=setTimeout(function(){s("TimeOut")},l)}function a(e){$(document).trigger("userwatcher:pause")}function s(e){n="inactive",$(document).trigger("userwatcher:inactive")}var t=null,l=1e4,n="inactive";return{init:function(e){var t,n,i,o;e&&(l=e),function(){function e(e){var t="visible",n="hidden",i={focus:t,focusin:t,pageshow:t,blur:n,focusout:n,pagehide:n};"visible"===((e=e||window.event).type in i?i[e.type]:this[o]?"hidden":"visible")?r():s()}var o="hidden";o in document?document.addEventListener("visibilitychange",e):(o="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(o="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(o="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,void 0!==document[o]&&e({type:document[o]?"blur":"focus"})}(),function(){function e(){s()}function t(){r()}isIE?(document.onfocusin=t,document.onfocusout=e):(window.onload=window.onfocus=t,window.onblur=e)}(),document.onmousemove=(n=function(){a()},function(){r(),clearTimeout(t),t=setTimeout(n,50)}),document.onscroll=(o=function(){a()},function(){r(),clearTimeout(i),i=setTimeout(o,50)}),document.ontouchstart=function(){r()},document.ontouchmove=function(){r()},document.ontouchend=document.ontouchcancel=function(){a()}},getState:function(){return n}}}();UserWatcher.init(15e3),window.getCookie||(window.getCookie=function(e){var t=document.cookie.match(new RegExp(e+"=([^;]+)"));return t?t[1]:null}),window.getUrlParam||(window.getUrlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return t?t[1]||0:null});var InternalAds=function(){var e=function(e){if(e){var t=e.name,n=e.templates,i=$(e.container);if(t&&window.internalAds&&window.internalAds[t]&&e.templates&&Array.isArray(e.templates)&&0<i.length){var o=Math.floor(Math.random()*n.length);EpiTemplate.load(n[o],{onCompleted:function(e){i.html(e)}})}}};return{load:e,loadZaloPC:function(){e({name:"zalo",templates:["/templates/zalo/pc/bottom_1.html","/templates/zalo/pc/bottom_2.html","/templates/zalo/pc/bottom_3.html","/templates/zalo/pc/bottom_4.html"],container:"#BaoMoi_Internal_Ads_Bottom"})}}}(),EpiTrackingInst=new EpiTracking("web");EpiTrackingInst.load();var Channel=function(){var c=20;return{initDashboardPage:function(e){var d,t,n,i,o,r,a,s,p,l,f;EpiPage.initProfileUserInfo(),$(document).on("user:loggedout",function(e){window.location="/"}),EpiLib.user?(d=$("div.my-channel__list.small-list"),t=$(".empty-state"),n=$("#stats-total b"),i=$("#stats-private b"),o=$("#stats-public b"),r=$(".btn-create-channel"),s=a=0,p=[],l=c,f=function(){var e=a-s;n.text(0<a?a:0),i.text(0<e?e:0),o.text(0<s?s:0),$(".loading-more").hide(),$(".panel__item").length<=0?t.show():(t.hide(),$(".tools-box__context-menu select").each(function(e,t){$(t).val(e+1)}),$(".tools-box__context-menu").removeClass("is-active"))},EpiTemplate.load(EpiTemplate.LIST_ITEM_CHANNEL,{onCompleted:function(u){EpiAPI.Channel.getList({top:e,success:function(l){var c=0;l.forEach(function(e,t){p.push(e.channelId);var n=[];e.articles&&e.articles.forEach(function(e){n.push(EpiUi.Article.render(e).prop("outerHTML"))});var i="",o="Mục công khai";e.isPublic?(c++,i+=" is-public",o="Mục công khai"):o="Mục riêng tư";for(var r=[],a=1;a<=l.length;a++)r.push({value:a,is_current:a==t+1});var s={id:e.channelId,name:e.name,url:"/s/ch/"+e.channelId+".epi",url_edit:"/sua-muc/"+e.channelId+".epi",css_class:i,contents:n,privacy:o,position:t+1,to_position:r};d.append(Mustache.render(u,s))}),EpiUi.Article.format(d),a=l.length,s=c,f(),$(".tools-box__delete").click(function(e){e.preventDefault();var t=$(this).closest(".panel__item"),n=$(t).attr("data-id");return EpiUi.showConfirmModal({data:{id:"remove-modal",title:"Xóa mục của bạn",text:'Bạn đang xóa mục "'+t.find("h3.box-title a").text()+'", bạn có muốn thực hiện?',confirm:"Xóa",cancel:"Trở lại"},confirm:function(){EpiAPI.Channel.remove({channelids:[n],success:function(){t.slideUp(function(){a--,t.hasClass("is-public")&&s--,p.removeValue(n),t.remove(),f()})},error:function(e){console.log("Cannot remove channel "+e)}})}}),!0}),$(".tools-box__move").click(function(e){e.preventDefault();var t=$(this).closest(".panel__item");return $(".panel__item").not(t).find(".tools-box__context-menu").removeClass("is-active"),t.find(".tools-box__context-menu").toggleClass("is-active"),!0}),$(".tools-box__context-menu select").on("change",function(){var e=$(this).closest(".panel__item"),t=$(e).attr("data-id"),n=this.value-1,i=$(".panel__item");return p.removeValue(t),p.splice(n,0,t),EpiAPI.Channel.setList({channelids:p,success:function(){n>=i.length-1?e.insertAfter(e.siblings(":eq("+(i.length-2)+")")):e.insertBefore(e.siblings(":eq("+n+")")),f()},error:function(e){location.reload()}}),!0})},error:function(){f()}})}}),r.click(function(e){l<=a&&(e.preventDefault(),EpiUi.showInfoModal({data:{id:"report-failed-modal",title:"Chỉ thể tạo tối đa "+l+" mục",text:"Bạn không thể tạo thêm do đã đạt đến hạn mức cho phép!",icon:"spr--cancel-big",confirm:"Đóng"}}))})):window.location="/"},initEditPage:function(i){function o(e,t,n){""===e?t(f.get(p)):f.search(e,t,n)}var e,r=$("#including"),a=$("#excluding"),s=$("#inp-name"),l=$("#btn-switch"),c=$("#btn-submit"),u=$("#btn-cancel"),d=$("#btn-delete"),p=window.defaultCategories?window.defaultCategories:[],f=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("text"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.id},prefetch:{url:"//"+EpiLib.apiHost+"/api/v1.0/categories",transform:function(e){var t=e.data;return t.forEach(function(e,t){e.id=parseInt(e.zoneId.replace("c_","")),isNaN(e.id)&&(e.id=e.zoneId),e.text=e.name+" "+e.parentName+" "+e.childrenNames.replace(/,/g," "),e.text=e.text.trim()}),t}},remote:{url:"//ac-data.baomoi.com/get?types=category&size=10&query=%QUERY",wildcard:"%QUERY",transform:function(e){var t=[];return e&&e.category&&(t=e.category).forEach(function(e,t){var n=parseInt(e.id);isNaN(n)||(e.id=n),e.name=e.value,e.zoneId="c_"+e.id,e.text=e.name.trim()}),t}}}),h=window.defaultPublishers?window.defaultPublishers:[],m=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.id},prefetch:{url:"//"+EpiLib.apiHost+"/api/v1.0/publishers?method=getall&start=0&size=999&platform=1",transform:function(e){var t=e.data;return t.forEach(function(e,t){e.id=parseInt(e.zoneId.replace("p_","")),isNaN(e.id)&&(e.id=e.zoneId),e.value=e.fullName+e.name}),t}},remote:{url:"//ac-data.baomoi.com/get?types=publisher&size=10&query=%QUERY",wildcard:"%QUERY",transform:function(e){var t=[];return e&&e.publisher&&(t=e.publisher).forEach(function(e,t){var n=parseInt(e.id);isNaN(n)||(e.id=n),e.name=e.ShortName,e.fullName=e.value,e.value=e.fullName+e.name,e.zoneId="p_"+e.id}),t}}}),g=function(e,t,n){""===e?t(m.get(h).slice(0,6)):m.search(e,t,n)};$(document).on("user:loggedout",function(e){window.location="/"}),EpiLib.user?(function(){var e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.id},remote:{url:"//ac-data.baomoi.com/get?types=keyword&size=10&query=%QUERY",wildcard:"%QUERY",transform:function(e){var t=[];return e&&e.keyword&&(t=e.keyword).forEach(function(e,t){e.zoneId=e.value,e.name=e.value}),t}}});r.tagsinput({tagClass:function(e){return e.zoneId.startsWith("p_")?"label label-danger":e.zoneId.startsWith("c_")?"label label-info":"label label-primary"},itemValue:"zoneId",itemText:function(e){return e.zoneId.startsWith("p_")?"Nguồn: "+e.name:e.zoneId.startsWith("c_")?"Mục: "+e.name:e.name},typeaheadjs:[{hint:!0,highlight:!0,minLength:0},{name:"publishers",displayKey:"name",source:g,templates:{header:'<h3 class="type">Nguồn báo</h3>',suggestion:function(e){return Mustache.render("<div><span>{{name}}</span></div>",e)}}},{name:"categories",displayKey:"name",source:o,templates:{header:'<h3 class="type">Chuyên mục</h3>',suggestion:function(e){return Mustache.render("<div><span>{{name}}</span></div>",e)}}},{name:"keywords",displayKey:"name",source:e,templates:{header:'<h3 class="type">Từ khóa</h3>',empty:['<div class="empty-message">',"Không tìm thấy nội dung phù hợp","</div>"].join("\n"),suggestion:function(e){return Mustache.render("<div><span>{{name}}</span></div>",e)}}}]}),a.tagsinput({tagClass:function(e){return"label label-primary"},itemValue:"zoneId",itemText:function(e){return e.zoneId.startsWith("p_")?"Nguồn: "+e.name:e.zoneId.startsWith("c_")?"Mục: "+e.name:e.name},typeaheadjs:[{hint:!0,highlight:!0,minLength:0},{name:"publishers",displayKey:"name",source:g,templates:{header:'<h3 class="type">Nguồn báo</h3>',suggestion:function(e){return Mustache.render("<div><span>{{name}}</span></div>",e)}}},{name:"categories",displayKey:"name",source:o,templates:{header:'<h3 class="type">Chuyên mục</h3>',suggestion:function(e){return Mustache.render("<div><span>{{name}}</span></div>",e)}}},{name:"keywords",displayKey:"name",source:e,templates:{header:'<h3 class="type">Từ khóa</h3>',empty:['<div class="empty-message">',"Không tìm thấy nội dung phù hợp","</div>"].join("\n"),suggestion:function(e){return Mustache.render("<div><span>{{name}}</span></div>",e)}}}]}),r.on("beforeItemAdd",function(e){a.tagsinput("contains",e.item)&&(e.cancel=!0)}),a.on("beforeItemAdd",function(e){r.tagsinput("contains",e.item)&&(e.cancel=!0)}),$(".twitter-typeahead").css({display:"inline",position:"static"}),$(".input--tag").on("typeahead:render",function(e,t,n,i){0<$(this).find(".tt-suggestion.tt-selectable").length&&($(this).find(".empty-message").hide(),$(this).find(".empty-message").remove())}),l.click(function(){l.addClass("is-active")});var t=!1;c.click(function(){if(!t)if(t=!0,function(){var e=!0,t=s.val();t&&""!==t?s.closest(".row").find(".empty-text").hide():(console.log("Name is empty"),s.closest(".row").find(".empty-text").show(),e=!1);var n=r.val();return n&&""!==n?r.closest(".row").find(".empty-text").hide():(console.log("Inculde is empty"),r.closest(".row").find(".empty-text").show(),e=!1),e}()){var n={channelid:i||"0",name:s.val(),keywords:[],excludedkeywords:[],categories:[],excludedcategories:[],publishers:[],excludedpublishers:[],public:!1};r.val()&&(r.val().split(",").forEach(function(e,t){e.startsWith("p_")?n.publishers.push(e.replace("p_","")):e.startsWith("c_")?n.categories.push(e.replace("c_","")):n.keywords.push(e)}),n.keywords=n.keywords.join(","),n.categories=n.categories.join(","),n.publishers=n.publishers.join(",")),a.val()&&(a.val().split(",").forEach(function(e,t){e.startsWith("p_")?n.excludedpublishers.push(e.replace("p_","")):e.startsWith("c_")?n.excludedcategories.push(e.replace("c_","")):n.excludedkeywords.push(e)}),n.excludedkeywords=n.excludedkeywords.join(","),n.excludedcategories=n.excludedcategories.join(","),n.excludedpublishers=n.excludedpublishers.join(",")),EpiAPI.Channel.set({data:n,success:function(){"referrer"in document&&window.location.href!==document.referrer?window.location=document.referrer:window.location="/muc-cua-ban.epi",t=!1},error:function(){console.log("submit failed"),t=!1,i&&0<i?EpiUi.showInfoModal({data:{id:"report-failed-modal",title:"Không thể cập nhật mục của bạn",text:"Quá trình cập nhật không thể thực hiện!",icon:"spr--cancel-big",confirm:"Đóng"}}):EpiUi.showInfoModal({data:{id:"report-failed-modal",title:"Không thể tạo thêm mục",text:"Quá trình tạo không thể thực hiện!",icon:"spr--cancel-big",confirm:"Đóng"}})}})}else t=!1}),u.click(function(){EpiUi.showConfirmModal({data:{id:"cancel-modal",title:"Bỏ qua các nội dung đã nhập",text:"Các nội dung đã nhập sẽ không có hiệu lực, bạn có muốn thực hiện?",confirm:"Hủy",cancel:"Trở lại"},confirm:function(){window.history.back()}})}),d.click(function(e){if(0<i){var t=i,n=s.val();EpiUi.showConfirmModal({data:{id:"remove-modal",title:"Xóa mục của bạn",text:'Bạn đang xóa mục "'+n+'", bạn có muốn thực hiện?',confirm:"Xóa",cancel:"Trở lại"},confirm:function(){EpiAPI.Channel.remove({channelids:[t],success:function(){"referrer"in document&&window.location.href!==document.referrer?window.location=document.referrer:window.location="/muc-cua-ban.epi"},error:function(e){console.log("Cannot remove channel "+e)}})}})}return!0});var n=$("<span>",{class:"tt-close",text:"×"});n.click(function(e){return e.preventDefault(),a.tagsinput("input").typeahead("close"),r.tagsinput("input").typeahead("close"),e.stopPropagation(),!0}),$(".tt-menu").append(n),$(".box--include").click(function(){r.tagsinput("focus")}),$(".box--exclude").click(function(){a.tagsinput("focus")}),$(".box--name").click(function(){s.focus()})}(),i&&""!==i&&"0"!==i&&(e=i,EpiAPI.Channel.get({channelids:[e],success:function(e){if(e){var t=e[0];s.val(t.name),t.isPublic?l.removeClass("is-active"):l.addClass("is-active"),t.categories&&f.get(t.categories).forEach(function(e,t){r.tagsinput("add",e)}),t.publishers&&m.get(t.publishers).forEach(function(e,t){r.tagsinput("add",e)}),t.keywords&&t.keywords.forEach(function(e,t){r.tagsinput("add",{zoneId:e,name:e})}),t.excludedCategories&&f.get(t.excludedCategories).forEach(function(e,t){a.tagsinput("add",e)}),t.excludedPublishers&&m.get(t.excludedPublishers).forEach(function(e,t){a.tagsinput("add",e)}),t.excludedKeywords&&t.excludedKeywords.forEach(function(e,t){a.tagsinput("add",{zoneId:e,name:e})})}else window.location="/muc-cua-ban.epi"},error:function(){window.location="/muc-cua-ban.epi"}}))):window.location="/"},initBox:function(m,e,t){var n=e.preset?e.preset:"w300_r5x3",g=e.size?e.size:3,v=e.top?e.top:2;$(document).on("user:loggedout",function(e){m.empty(),t&&t.onChanged&&t.onChanged()}),$(document).on("user:loggedin",function(e){var h;m.empty(),h={success:function(){t&&t.onChanged&&t.onChanged()}},EpiTemplate.load(EpiTemplate.BOX_CHANNEL,{onCompleted:function(f){EpiAPI.Channel.getList({size:g+10,top:v+10,imgsize:n,success:function(e){for(var t=0,n=[];t<e.length&&!(n.length>=g);t++){var i=e[t];if(i.articles&&i.articles.length>=v){var o="",r="Mục công khai";i.isPublic?(o+=" is-public",r="Mục công khai"):r="Mục riêng tư";for(var a=[],s=0;s<i.articles.length&&s<v;s++){var l=i.articles[s];l.avatarUrl=l.avatarUrl.replace("http://","https://"),l.title=EpiLib.truncateText(l.title,75,"..."),l.dataTrack="|index"+s,a.push(EpiUi.Article.render(l).prop("outerHTML"))}var c={id:i.channelId,name:EpiLib.truncateText(i.name,20,"..."),url:"/s/ch/"+i.channelId+".epi",url_edit:"/sua-muc/"+i.channelId+".epi",css_class:o,contents:a,privacy:r,position:t+1,data_track:"|channel"+t};n.push(c)}}if(n&&0<n.length){n[Math.floor(Math.random()*n.length)].css_class+=" is-shown",m.append(Mustache.render(f,{channels:n})),EpiUi.Article.format(m),EpiUi.Article.trackImps(m);var u=m.find(".btn-channel-expand"),d=u.find("span.btn-title");u.click(function(){var e;m.toggleClass("is-active"),e=m.hasClass("is-active")?"Thu gọn":"Mở rộng",d.text(e)});var p=m.find(".box-tabs");m.find(".box-heading .more").click(function(){$(this).toggleClass("has-touched"),$(this).hasClass("has-touched")?p.addClass("has-expand"):p.removeClass("has-expand")})}h&&h.success&&h.success()},error:function(){h&&h.error&&h.error()}})}})})},getMax:function(){return c}}}(),PLAYER="undefined"==typeof zPlayer?{}:function(){var x=[],e=zPlayer.Constant.MediaControlConst.BG_TYPE_GRADIENT,t=zPlayer.Constant.MediaControlConst.THEME.BAO_MOI,_=window.PLAYER_OPTIONS||{},i=_.pluginsOptions||{},k={product:"baomoi",pauseOnClick:!0,mute:!1,loop:!1,volume:100,playInline:"playsinline",controls:{alwaysShowControl:!1,theme:t,seekBar:{foregroundColor:"#49AEBF"},volumeBar:{foregroundColor:"#49AEBF"},type:{fullWidth:{backgoundType:e,paddingTop:10,backgroundImage:"linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.6))"}}}},C=function(e){var t,n;return e.indexOf("desktop"),t="60px",n="40px",Object.assign({BigPlayButtonPlugin:{disable:!1,buttonStyles:{width:t,height:t,borderRadius:"10px",backgroundColor:"rgba(22, 161, 177, .6)",border:0},iconStyles:{fontSize:n}},PlayPauseFaceoutPlugin:{disable:!1,buttonStyles:{width:t,height:t,borderRadius:"10px",backgroundColor:"rgba(22, 161, 177, .6)",border:0},iconStyles:{fontSize:n}},LoadingSpinnerPlugin:{showLabel:!1}},i)};return{ls:x,load:function(e,t,n,i,o,r){var a,s,l,c,u,d,p,f=!!t.getAttribute("auto_play"),h=t.clientWidth,m=t.clientHeight;0<=n.indexOf("youtube")?(t.innerHTML="",a="youtube-"+e,s="YT",l=t.getAttribute("data-src"),c=(p=(d=l.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/))&&11===d[2].length?d[2]:"")?"https://img.youtube.com/vi/"+p+"/mqdefault.jpg":"",u=C(n)):(a="zplayer-"+e,s="video/mp4",l=t.getElementsByTagName("source")[0].getAttribute("data-src"),c=t.getAttribute("poster"),u=Object.assign(C(n),{ads:function(e,t,n,i){if(window.noads)return{};var o=0<=e.indexOf("desktop")?"2097601063673086425":"2072971960261246969";window.zplayer_zoneid&&(o=window.zplayer_zoneid);var r=url("?zoneid");r&&EpiLib.isDebug&&(o=r);var a="";a=0<=e.indexOf("desktop")?"videoinstream-web_p_"+i+"_"+n:0<=e.indexOf("znews")?"videoinstream-znews_p_"+i+"_"+n:"videoinstream-mobile_p_"+i+"_"+n;var s="https://api.adtimaserver.vn/zad/videoad?vast=4&zid="+o+"&vs="+encodeURIComponent("type=article;cate="+t+";postid="+n)+"&contentId="+a,l=EpiLib.getVisitorID();return l&&(s=s+"&uid="+l),{poster:!0,source:s,loadTimeout:3e3,startTimeout:5e3,skipTimeout:5e3}}(n,i,o,r)}));var g=Object.assign(k,_,{mimeType:s,source:l,height:m,width:h,autoPlay:f,poster:c||"",pluginsOptions:u});EpiLib.isDebug&&console.log(g);var v,y,b,w=new zPlayer.Player(g);return t.outerHTML='<div id="'+a+'" class="player"></div>',y=n,b=o,(v=w).on(zPlayer.Events.PLAYER_PLAY,function(){if(""!==b&&v.getCurrentTime()<=0){var e={rand:Math.random(),value:b,key:0<=y.indexOf("desktop")?"web_article_video":"mobile_article_video"},t=EpiLib.getUserId();t&&(e.uid=t);var n=document.createElement("img");n.src=new LogUrlBuilder("log",e).build(),n.setAttribute("style","width:1px; height:1px;position:absolute;display:none;top:-100px;"),document.body.appendChild(n)}var i;for(i=0;i<x.length;i++)v.wid!==x[i].wid&&x[i].pause()}),w.attachTo(document.getElementById(a)),w.wid=a,x.push(w),w}}}();EpiUi.UserProfile.init(),EpiUi.showWidget=function(e,t){var n=$("#utilities__info"),i='<div id="widget-modal" class="modal"><h4>'+e+'</h4><p class="content-modal">'+t+'</p><a href="javascript:void(0)" class="close-reveal-modal">Close</a></div>';0===n.length?($("body").append($("<div>",{id:"utilities__info",class:"blocker"})),(n=$("#utilities__info")).html(i)):n.html(i),$(".close-modal").unbind("click"),$(".close-modal").on("click",function(){n.remove()}),$(".blocker").unbind("click"),$(".blocker").on("click",function(){n.remove()})},EpiUi.Article={trackImps:function(e){e.find(".story").each(function(e,t){EpiUi.Article.trackElementImps(t)})},trackSelectorImps:function(e){e.each(function(e,t){EpiUi.Article.trackElementImps(t)})},trackElementImps:function(e){var t=$(e).attr("data-aid");if(t){var n={key:"imps/webtrack/article",value:t,rand:Math.random()};if(0<EpiLib.getUserId()&&(n.uid=EpiLib.getUserId()),$(e).attr("data-track")){var i=$(e).attr("data-track");$(e).parents("[data-track]").each(function(e,t){i=$(t).attr("data-track")+i}),"|"===i.substring(0,1)&&(i=EpiPage.catePath()+i),n.source=i}$(e).append($("<img>",{class:"lazy","data-src":new LogUrlBuilder("imps",n).build()})),$(e).find("img.lazy").each(function(e,t){$(t).lazy({visibleOnly:!0,threshold:0})})}},format:function(e){if(e.find("time.friendly").each(function(e,t){var n=$(t),i=n.html()+EpiLib.formatTime(n.attr("datetime"),{friendly:!0});n.html(i)}),"zalo"===EpiLib.getUrlParam("utm_source")){var t=EpiLib.getUrlParam("utm_medium"),n=EpiLib.getUrlParam("utm_campaign");e.find("a").each(function(){var e=this.href;(e.startsWith("/")||0<e.indexOf("baomoi.com"))&&e.indexOf("utm_source")<0&&(this.href=e+(e.indexOf("?")<0?"?":"&")+"utm_source=zalo&utm_medium="+t+"&utm_campaign="+n)})}},render:function(e){var t=e.contentId,n=e.title,i=e.url.replace(/^https?:\/\/.*?\//gi,"/").replace("/r/","/c/"),o=e.url.replace(/^https?:\/\/.*?\//gi,"/").replace("/c/","/r/"),r=e.date,a=e.avatarUrl,s=isNaN(e.publisherId)?e.publisherId.replace("p_",""):e.publisherId.toString(),l=$("<div>",{"data-aid":t,class:"story"+(a?"":" no-fig")}),c=$("<div>",{class:"story__thumb"}).appendTo(l),u=$("<a>",{target:"_blank",href:o}).appendTo(c);if(a){a=a.replace("http://","https://");var d=e.avatarWidth,p=e.avatarHeight;if(0<d&&0<p){var f=Math.round(200*p/d),h=$("<img>",{"data-src":a,src:a});h.attr("width",200),h.attr("height",f),u.append(h)}}l.append($("<h4>",{class:"story__heading"}).append($("<a>",{target:"_blank",text:n,href:o})));var m=$("<p>",{class:"story__meta"});return m.append($("<a>",{text:e.publisherName,class:"source",href:"/s/p/"+s+".epi"}).append($("<i>",{class:"plsh plsh--"+s}))),m.append($("<time>",{class:"friendly",datetime:r})),m.append($("<a>",{class:"cache",target:"_blank",href:i}).append($("<i>",{class:"spr spr--baomoi"}))),m.appendTo(l),e.source&&l.attr("data-source",e.source),e.dataTrack&&l.attr("data-track",e.dataTrack),l}},(new EpiUi).load();var SoccerMatch=function(){callAPI=function(e,t,n){n&&$.ajax({url:e,xhrFields:{withCredentials:!0},dataType:"json",data:t,success:function(e){e?n.success&&n.success(e):n.error()},error:function(){n.error&&n.error()}})};return{load:function(e,n){var i=$(e);n&&0<i.length&&EpiTemplate.load(n.template,{onCompleted:function(t){callAPI("//baomoi.com/soccer/api/v2/matchlist",n.query,{success:function(e){e.matchList&&(matchList=e.matchList.slice(0,n.query.limit),matchList.forEach(function(e){e.startedMatch="match-waiting"!==e.matchStatus,e.homeScored="?"===e.homeScored?"0":e.homeScored,e.awayScored="?"===e.awayScored?"0":e.awayScored}),i.append(Mustache.render(t,{matchList:matchList,seasonId:n.query.seasonid})))}})}})}}}();SoccerMatch.AFF_PARAMS={query:{type:"event",seasonid:192,limit:2},template:"/templates/soccermatch/aff_match.html"},SoccerMatch.AFC_ASIAN_PARAMS={query:{type:"banner",seasonid:193},template:"/templates/soccermatch/afc_asian_match_1.html"},EpiPage.SoccerWidgetHolder.init=function(){EpiPage.SoccerWidgetHolder.shouldShowWidget()&&$(".l-grid__main").before('<div id="soccer-widget-holder"></div>')},EpiPage.SoccerWidgetHolder.init(),EpiPage.Region=function(){var r,a,o,n;return initBox=function(){var i,o=$.cookie("current_region");if(o&&(i=a.find('option[value="'+o+'"]')),i&&i.length){a.val(o);var e=i.attr("data-url");r.find(".more").attr("href",e)}var t="//"+EpiLib.apiHost+"/api/v1.0/regions?method=getbyip";$.getJSON(t).done(function(e){if(!e.error&&e.data&&Array.isArray(e.data)&&0<e.data.length){var t=a.find('option[value="'+e.data[0].shortName+'"]');if(t.length){if($.cookie("detected_region",e.data[0].shortName,{expires:30,path:"/",domain:"baomoi.com"}),!i||!i.length){o=e.data[0].shortName,i=t,a.val(o);var n=i.attr("data-url");r.find(".more").attr("href",n)}loadArticle(o)}}})},loadArticle=function(e){o&&0<o.length&&EpiPage.renderArticles(EpiAPI.WebData,{data:{method:"regionnews",region:e,imgsize:"w200_r1x1",start:0,size:10},size:5,success:function(e){if(e)if(0===e.length);else{o.empty(),o.children().length<=0&&$(e[0]).addClass("is-first");for(var t=0;t<e.length;t++){var n="",i=$(e[t]).attr("data-source");i&&(n=";"+i),$(e[t]).attr("data-track","|index"+t+n),EpiUi.Article.trackElementImps(e[t])}o.append(e)}},error:function(e){}})},{load:function(e,t){n=t,r=$(e),a=r.find("select#region-select"),o=r.find(".small-list"),a&&0<a.length&&(a.change(function(){var e=a.val();if("#"!==e&&(selected=a.find('option[value="'+e+'"]'),selected.length)){var t=selected.attr("data-url");n?($.cookie("current_region",e,{expires:1,path:"/",domain:"baomoi.com"}),loadArticle(e),r.find(".more").attr("href",t)):window.location.href=t}}),$(document).on("user:loggedout",function(){$.removeCookie("current_region",{path:"/",domain:"baomoi.com"})}),n&&initBox())}}}(),EpiPage.initBoxRecommend=function(t){EpiTemplate.load(EpiTemplate.BOX_RECOMMEND,{onCompleted:function(e){$(t).after(e)}})},(new EpiPage).load();var InfoLib={url_ServiceApi:"//service.baomoi.com/",FormattedDate:function(e,t){var n=e.getFullYear(),i=(1+e.getMonth()).toString();i=1<i.length?i:"0"+i;var o=e.getDate().toString();return o=1<o.length?o:"0"+o,t?o+"/"+i+"/"+n:o+"/"+i},viewWeather:function(){$.get(InfoLib.url_ServiceApi+"weatherlist.json",function(e){var t=$("#weather__today");null!=t&&null!=t&&0<t.length&&t.remove(),$("#weather-home").append('<div id="weather__today" class="weather__today"></div>'),(t=$("#weather__today")).append('<div class="weather__info"></div>'),t.append('<div class="wrap-select"><select id="weather-location" class="weather__location" onchange="InfoLib.loadDataWeather()"></select></div>'),objWeatherSelect=$("#weather-location");for(var n=0;n<e.length;n++)objWeatherSelect.append("<option value='"+e[n].ShortName+"'>"+e[n].CityName+"</option>");InfoLib.loadDataWeather()})},loadDataWeather:function(){var o=$(".weather__info");null!=o&&null!=o&&0<o.length&&o.remove();var r=$("#weather__listing");null!=r&&null!=r&&0<r.length&&r.remove();var e=$("#weather-location").val();e+""!=""&&null!=e&&$.get(InfoLib.url_ServiceApi+"weather-"+e+"-4.json",function(e){if(null!=(o=$(".weather__info"))&&null!=o&&0<o.length&&o.remove(),null!=(r=$("#weather__listing"))&&null!=r&&0<r.length&&r.remove(),null!=e&&null!=e&&0<e.length){$(".wrap-select").before('<div class="weather__info"></div>'),(o=$(".weather__info")).append('<img src="'+e[0].CA+'">'),o.append('<div class="main-info"></div>');var t=$(".main-info");t.append('<span class="dc">'+e[0].CT+"&deg;</span>"),t.append('<span class="temp">'+e[0].MinT+"&deg; - "+e[0].MaxT+"&deg;</span>"),o.append('<div class="more-info"></div>');var n=$(".more-info");n.append("<span>"+e[0].CI+"</span>"),n.append("<span>Độ ẩm: "+e[0].CH+"%</span>"),n.append("<span>Gió: "+e[0].CW+"km/h</span>"),n.append("<span>Khả năng mưa: "+e[0].CP+"%</span>"),$(".weather").append('<ul id="weather__listing" class="weather__listing"></ul>'),r=$("#weather__listing");var i=new Date;i.setDate(i.getDate()+1),r.append('<li class="is-first"><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="thumb"><img src="'+e[0].A1+'"></p><p class="temp">'+e[0].MinT1+"&deg; - "+e[0].MaxT1+'&deg;</p><p class="stt">'+e[0].I1+"</p></li>"),i.setDate(i.getDate()+1),r.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="thumb"><img src="'+e[0].A2+'"></p><p class="temp">'+e[0].MinT2+"&deg; - "+e[0].MaxT2+'&deg;</p><p class="stt">'+e[0].I2+"</p></li>"),i.setDate(i.getDate()+1),r.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="thumb"><img src="'+e[0].A3+'"></p><p class="temp">'+e[0].MinT3+"&deg; - "+e[0].MaxT3+'&deg;</p><p class="stt">'+e[0].I3+"</p></li>"),i.setDate(i.getDate()+1),r.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="thumb"><img src="'+e[0].A4+'"></p><p class="temp">'+e[0].MinT4+"&deg; - "+e[0].MaxT4+'&deg;</p><p class="stt">'+e[0].I4+"</p></li>")}})},loadWeatherInfo:function(){$.get(InfoLib.url_ServiceApi+"weatherlist.json",function(e){var t=$("#panel-weather");if(null!=t&&null!=t&&0<t.length){var n=$("#sub-panel-weather");null!=n&&null!=n&&0<n.length&&n.remove(),t.append(' <div class="weather" id="sub-panel-weather"></div>'),n=$("#sub-panel-weather");var i=$(".weather__today");null!=i&&null!=i&&0<i.length&&i.remove(),n.append('<div class="weather__today"></div>'),(i=$(".weather__today")).append('<select class="weather__location" id="weather__location" onchange="InfoLib.loadWeatherInLocation()"></select>');for(var o=$("#weather__location"),r=0;r<e.length;r++)o.append("<option value='"+e[r].ShortName+"'>"+e[r].CityName+"</option>");InfoLib.loadWeatherInLocation()}})},loadWeatherInLocation:function(){var e=$("#weather__location").val();if(e+""!=""&&null!=e)$.get(InfoLib.url_ServiceApi+"weather-"+e+"-7.json",function(e){if(null!=(t=$(".weather__info"))&&null!=t&&0<t.length&&t.remove(),null!=(n=$(".weather__listing"))&&null!=n&&0<n.length&&n.remove(),0<e.length){var t;$(".weather__today").append('<div class="weather__info"></div>'),(t=$(".weather__info")).append('<i class="spr spr--w-'+e[0].CA+'"></i>'),t.append('<img src="'+e[0].CA+'">'),t.append('<span class="dc">'+e[0].CT+"&deg;</span>"),t.append('<span class="temp">'+e[0].MinT+"&deg; - "+e[0].MaxT+"&deg;</span>"),t.append('<span class="info">'+e[0].I+"</span>"),$(".weather").append('<ul class="weather__listing"></ul>');var n=$(".weather__listing"),i=new Date;i.setDate(i.getDate()+1),n.append('<li class="is-first"><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="icon"><img src="'+e[0].A1+'"><i class="spr spr--w-'+e[0].A1+'-mini"></i></p><p class="temp">'+e[0].MinT1+"&deg; - "+e[0].MaxT1+"&deg;</p></li>"),i.setDate(i.getDate()+1),n.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="icon"><img src="'+e[0].A2+'"><i class="spr spr--w-'+e[0].A2+'-mini"></i></p><p class="temp">'+e[0].MinT2+"&deg; - "+e[0].MaxT2+"&deg;</p></li>"),i.setDate(i.getDate()+1),n.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="icon"><img src="'+e[0].A3+'"><i class="spr spr--w-'+e[0].A3+'-mini"></i></p><p class="temp">'+e[0].MinT3+"&deg; - "+e[0].MaxT3+"&deg;</p></li>"),i.setDate(i.getDate()+1),n.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="icon"><img src="'+e[0].A4+'"><i class="spr spr--w-'+e[0].A4+'-mini"></i></p><p class="temp">'+e[0].MinT4+"&deg; - "+e[0].MaxT4+"&deg;</p></li>"),i.setDate(i.getDate()+1),n.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="icon"><img src="'+e[0].A5+'"><i class="spr spr--w-'+e[0].A5+'-mini"></i></p><p class="temp">'+e[0].MinT5+"&deg; - "+e[0].MaxT5+"&deg;</p></li>"),i.setDate(i.getDate()+1),n.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="icon"><img src="'+e[0].A6+'"><i class="spr spr--w-'+e[0].A6+'-mini"></i></p><p class="temp">'+e[0].MinT6+"&deg; - "+e[0].MaxT6+"&deg;</p></li>"),i.setDate(i.getDate()+1),n.append('<li><p class="day">'+InfoLib.FormattedDate(i,!1)+'</p><p class="icon"><img src="'+e[0].A7+'"><i class="spr spr--w-'+e[0].A7+'-mini"></i></p><p class="temp">'+e[0].MinT7+"&deg; - "+e[0].MaxT7+"&deg;</p></li>")}});else{var t=$(".weather__info");null!=t&&null!=t&&0<t.length&&t.remove();var n=$(".weather__listing");null!=n&&null!=n&&0<n.length&&n.remove()}},loadExchange:function(){$.get(InfoLib.url_ServiceApi+"exchange.json",function(e){if(0<e.length){var t=$("#panel-exchange");if(null!=t&&null!=t&&0<t.length){var n=$("#tbl-exchange");null!=n&&null!=n&&0<n.length&&n.remove(),t.append('<table id="tbl-exchange" border="" cellspacing="1"></table>'),(n=$("#tbl-exchange")).append('<tr id="tr-exchange-date"></tr>'),$("#tr-exchange-date").append('<td colspan="4" class="tr-date">Tỷ giá ngoại tệ ngày <strong>'+e[0].Date+"</strong></td>"),n.append('<tr id="tr-exchange-title"></tr>');var i=$("#tr-exchange-title");i.append('<th align="center" width="25%">Mã NT</th>'),i.append('<th align="center" width="25%">Mua tiền mặt</th>'),i.append('<th align="center" width="25%">Mua chuyển khoản</th>'),i.append('<th align="center" width="25%">Bán</th>');for(var o=0;o<e.length;o++){n.append('<tr id="tr-exchange-data'+o+'"></tr>');var r=$("#tr-exchange-data"+o);r.append('<td align="center">'+e[o].CurrencyCode+"</td>"),r.append('<td align="center">'+e[o].Buy.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")+"</td>"),r.append('<td align="center">'+e[o].Transfer.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")+"</td>"),r.append('<td align="center">'+e[o].Sell.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")+"</td>")}}}})},loadGold:function(){$.get(InfoLib.url_ServiceApi+"gold.json",function(e){if(0<e.length){var t=$("#panel-gold");if(null!=t&&null!=t&&0<t.length){var n=$("#tbl-gold");null!=n&&null!=n&&0<n.length&&n.remove(),t.append('<table id="tbl-gold" border="" cellspacing="1"></table>'),(n=$("#tbl-gold")).append('<tr id="tr-gold-date"></tr>'),$("#tr-gold-date").append('<td colspan="4" class="tr-date">Giá vàng ngày <strong>'+e[0].Date+"</strong></td>"),n.append('<tr id="tr-gold-title"></tr>');var i=$("#tr-gold-title");i.append('<th align="center" width="60%">Loại vàng</th>'),i.append('<th align="center" width="20%">Giá mua</th>'),i.append('<th align="center" width="20%">Giá bán</th>');for(var o=0;o<e.length;o++){n.append('<tr id="tr-gold-data-Parent'+o+'"></tr>'),$("#tr-gold-data-Parent"+o).append('<td colspan="3" align="center"><strong>'+e[o].CityName+"</strong></td>");for(var r=0;r<e[o].GoldRateInfo.length;r++){n.append('<tr id="tr-gold-data'+o+"_"+r+'"></tr>');var a=$("#tr-gold-data"+o+"_"+r);a.append('<td align="left">'+e[o].GoldRateInfo[r].GoldName+"</td>"),a.append('<td align="center">'+e[o].GoldRateInfo[r].Buy.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</td>"),a.append('<td align="center">'+e[o].GoldRateInfo[r].Sell.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</td>")}}}}})},loadHoroscope:function(){$.get(InfoLib.url_ServiceApi+"horoscope.json",function(e){if(0<e.length){var t=$("#panel-horoscope");if(null!=t&&null!=t&&0<t.length){var n=$("#tbl-horoscope");null!=n&&null!=n&&0<n.length&&n.remove(),t.append('<table id="tbl-horoscope" border="" cellspacing="1"></table>'),(n=$("#tbl-horoscope")).append('<tr id="tr-horoscope-date"></tr>'),$("#tr-horoscope-date").append('<td colspan="4" class="tr-date">Tử vi 12 cung hoàng đạo ngày <strong>'+e[0].Date+"</strong></td>"),n.append('<tr id="tr-horoscope-title"></tr>');var i=$("#tr-horoscope-title");i.append('<th align="center" width="30%">Cung hoàng đạo</th>'),i.append('<th align="center" width="70%">Lá số tử vi</th>');for(var o=0;o<e.length;o++){n.append('<tr id="tr-horoscope-data'+o+'"></tr>');var r=$("#tr-horoscope-data"+o);e[o].Avatar+""!=""?r.append('<td class="HoroscopeName" align="center"><img class="Avatar" src="'+e[o].Avatar+'"/><br/>'+e[o].HoroscopeName+"</td>"):r.append('<td class="HoroscopeName" align="center">'+e[o].HoroscopeName+"</td>"),r.append('<td class="HoroscopeContent" align="left">'+e[o].Content+"</td>")}}}})},loadEnergy:function(){$.get(InfoLib.url_ServiceApi+"energy.json",function(e){if(0<e.length){var t=$("#panel-energy");if(null!=t&&null!=t&&0<t.length){var n=$("#tbl-energy");null!=n&&null!=n&&0<n.length&&n.remove(),t.append('<table id="tbl-energy" border="" cellspacing="1"></table>'),(n=$("#tbl-energy")).append('<tr id="tr-energy-date-1"></tr>'),$("#tr-energy-date-1").append('<td colspan="5" class="tr-date">Giá xăng dầu trong nước ngày <strong>'+e[0].Date+"</strong></td>"),n.append('<tr id="tr-energy-title-1"></tr>');var i=$("#tr-energy-title-1");i.append('<th align="center" colspan="2" width="49%">Loại xăng dầu</th>'),i.append('<th align="center" width="15%">Đơn vị</th>'),i.append('<th align="center" width="18%">Giá vùng 1</th>'),i.append('<th align="center" width="18%">Giá vùng 2</th>');for(var o=0;o<e.length;o++){if("PETRO"==e[o].Type)n.append('<tr id="tr-energy-data-1-'+o+'"></tr>'),(a=$("#tr-energy-data-1-"+o)).append('<td colspan="2" align="left">'+e[o].Name+"</td>"),a.append('<td align="center">'+e[o].Units+"</td>"),a.append('<td align="center">'+e[o].Price+"</td>"),a.append('<td align="center">'+e[o].Change+"</td>")}n.append('<tr id="tr-energy-sp"></tr>'),$("#tr-energy-sp").append('<td colspan="5" style="border-left-style:none; border-right-style:none"></td>'),n.append('<tr id="tr-energy-date-2"></tr>'),$("#tr-energy-date-2").append('<td colspan="5" class="tr-date">Giá khí, dầu thô thế giới ngày <strong>'+e[0].Date+"</strong></td>"),n.append('<tr id="tr-energy-title-2"></tr>');var r=$("#tr-energy-title-2");r.append('<th align="center" width="32%">Loại khí - dầu</th>'),r.append('<th align="center" width="17%">Đơn vị</th>'),r.append('<th align="center" width="15%">Giá</th>'),r.append('<th align="center" width="18%">Thay đổi</th>'),r.append('<th align="center" width="18%">(%) Thay đổi</th>');for(o=0;o<e.length;o++){var a;if("RAW"==e[o].Type)n.append('<tr id="tr-energy-data-2-'+o+'"></tr>'),(a=$("#tr-energy-data-2-"+o)).append('<td align="left">'+e[o].Name+"</td>"),a.append('<td align="center">'+e[o].Units+"</td>"),a.append('<td align="center">'+e[o].Price+"</td>"),a.append('<td align="center">'+e[o].Change+"</td>"),a.append('<td align="center">'+e[o].ChangePercent+"</td>")}}}})},loadLottery:function(){$.get(InfoLib.url_ServiceApi+"lotterylist.json",function(e){var t=$("#panel-lottery");if(null!=t&&null!=t&&0<t.length){t.append("<br />"),t.append('<div id="modal-lottery-content-location" align="center"></div>');var n=$("#modal-lottery-content-location");n.append('<label for="lottery-location"></label>'),n.append('<select id="lottery-location" onchange="InfoLib.loadLotteryInLocation()"></select>');for(var i=$("#lottery-location"),o=0;o<e.length;o++)i.append("<option value='"+e[o].id+"'>"+e[o].name+"</option>");t.append("<br />"),InfoLib.loadLotteryInLocation()}})},loadLotteryInLocation:function(){var e=$("#lottery-location").val();e+""!=""&&null!=e&&$.get(InfoLib.url_ServiceApi+"lotterycity-"+e+".json",function(e){var t=$("#tbl-lottery");null!=t&&null!=t&&0<t.length&&t.remove(),$("#panel-lottery").append('<table id="tbl-lottery" border="" cellspacing="1"></table>'),(t=$("#tbl-lottery")).append('<tr id="tr-lottery-date"></tr>'),$("#tr-lottery-date").append('<td colspan="2" class="tr-date">Kết quả xổ số <strong>'+e.LotteryName+"</strong> ngày <strong>"+e.Date+"</strong></td>"),t.append('<tr id="tr-lottery-title"></tr>');var n=$("#tr-lottery-title");n.append('<th align="center" width="20%">Tên giải</th>'),n.append('<th align="center" width="80%">Số trúng thưởng</th>');for(var i=0;i<e.LotteryDataInfo.length;i++){t.append('<tr id="tr-lottery-data'+i+'"></tr>');var o=$("#tr-lottery-data"+i);o.append('<td align="center">'+e.LotteryDataInfo[i].Award+"</td>"),o.append('<td align="center">'+e.LotteryDataInfo[i].Value+"</td>")}})},loadStock:function(){$.get(InfoLib.url_ServiceApi+"stocklist.json",function(e){var t=$("#panel-stock");if(null!=t&&null!=t&&0<t.length){t.append("<br />"),t.append('<div id="modal-stock-content-location" align="center"></div>');var n=$("#modal-stock-content-location");n.append('<label for="stock-location"></label>'),n.append('<select id="stock-location" onchange="InfoLib.loadStockInIndex()"></select>');for(var i=$("#stock-location"),o=0;o<e.length;o++)i.append("<option value='"+e[o].id+"'>"+e[o].name+"</option>");t.append("<br />"),InfoLib.loadStockInIndex()}})},loadStockInIndex:function(){var e=$("#stock-location").val();e+""!=""&&null!=e&&$.get(InfoLib.url_ServiceApi+"stockdata-"+e+".json",function(e){var t=$("#tbl-stock");null!=t&&null!=t&&0<t.length&&t.remove(),$("#panel-stock").append('<table id="tbl-stock" border="" cellspacing="1"></table>'),(t=$("#tbl-stock")).append('<tr id="tr-stock-1"></tr>'),$("#tr-stock-1").append('<td id="td-stock-1" align="center"></td>'),$("#td-stock-1").append('<table id="tbl-stock-total" border="" cellspacing="1"></table>');var n=$("#tbl-stock-total");n.append('<tr id="tr-stock-date"></tr>'),$("#tr-stock-date").append('<td colspan="3" align="left" class="tr-date">Thông tin chứng khoán sàn <strong>'+e.CodeIndex+"</strong> ngày <strong>"+e.Date+"<strong></td>"),n.append('<tr id="row-stock-total-1" border="" cellspacing="1"></tr>');var i=$("#row-stock-total-1");i.append('<td width="34%" align="left">'+e.CodeIndex+" : <strong>"+e.Index+"</strong></td>"),i.append('<td width="33%" align="left">Thay đổi: <strong>'+e.Change+"</strong></td>"),i.append('<td width="33%" align="left">(%) Thay đổi: <strong>'+e.PercentChange+"</strong></td>"),n.append('<tr id="row-stock-total-2" border="" cellspacing="1"></tr>');var o=$("#row-stock-total-2");o.append('<td align="left">KLGD: <strong>'+e.TransactionValue+"</strong></td>"),o.append('<td align="left">NN mua: <strong>'+e.ForeignerBuy+"</strong></td>"),o.append('<td align="left">NN Bán: <strong>'+e.ForeignerSell+"</strong></td>"),t.append('<tr id="tr-stock-2"></tr>'),$("#tr-stock-2").append('<td id="td-stock-2" align="center"></td>'),$("#td-stock-2").append('<table id="tbl-stock-modal" border="" cellspacing="1"></table>');var r=$("#tbl-stock-modal");r.append('<tr id="tr-stock-title"></tr>');var a=$("#tr-stock-title");a.append('<th align="center" width="20%">Mã CK</th>'),a.append('<th align="center" width="19%">Giá cũ</th>'),a.append('<th align="center" width="19%">Giá mới</th>'),a.append('<th align="center" width="20%">Khối lượng</th>'),a.append('<th align="center" width="22%">Thay đổi</th>');for(var s=0;s<e.StockDataInfo.length;s++){r.append('<tr id="tr-stock-data'+s+'"></tr>');var l=$("#tr-stock-data"+s);l.append('<td align="center">'+e.StockDataInfo[s].Code+"</td>"),l.append('<td align="center">'+e.StockDataInfo[s].OldPrice+"</td>"),l.append('<td align="center">'+e.StockDataInfo[s].NewPrice+"</td>"),l.append('<td align="center">'+e.StockDataInfo[s].TradeAmount.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</td>"),l.append('<td align="center">'+e.StockDataInfo[s].Change+"</td>")}})},loadChannel:function(){$.get(InfoLib.url_ServiceApi+"channellist.json",function(e){var t=$("#panel-channel");if(null!=t&&null!=t&&0<t.length){t.append("<br />"),t.append('<div id="modal-channel-content-location" align="center"></div>');var n=$("#modal-channel-content-location");n.append('<label for="channel-location"></label>'),n.append('<select id="channel-location" onchange="InfoLib.loadChannelInLocation()"></select>');for(var i=$("#channel-location"),o=0;o<e.length;o++)i.append("<option value='"+e[o].id+"'>"+e[o].name+"</option>");t.append("<br />"),InfoLib.loadChannelInLocation()}})},loadChannelInLocation:function(){var e=$("#channel-location").val();e+""!=""&&null!=e&&$.get(InfoLib.url_ServiceApi+"channeldata-"+e+".json",function(e){var t=$("#tbl-channel-modal");null!=t&&null!=t&&0<t.length&&t.remove(),$("#panel-channel").append('<table id="tbl-channel-modal" border="" cellspacing="1"></table>'),(t=$("#tbl-channel-modal")).append('<tr id="tr-channel-date"></tr>'),$("#tr-channel-date").append('<td colspan="2" class="tr-date">Lịch phát sóng truyền hình kênh <strong>'+e.ChannelName+"</strong> ngày <strong>"+e.Date+"</strong></td>"),t.append('<tr id="tr-channel-title"></tr>'),objTitleChannel=$("#tr-channel-title"),objTitleChannel.append('<th align="center" width="20%">Thời gian</th>'),objTitleChannel.append('<th align="center" width="80%">Chương trình</th>');for(var n=0;n<e.ProgramInfo.length;n++)t.append('<tr id="tr-channel-data'+n+'"></tr>'),objDataChannel=$("#tr-channel-data"+n),objDataChannel.append('<td align="center">'+e.ProgramInfo[n].Time+"</td>"),objDataChannel.append('<td align="left">'+e.ProgramInfo[n].Program+"</td>")})},loadCinema:function(){$.get(InfoLib.url_ServiceApi+"cinemalist.json",function(e){var t=$("#panel-cinema");if(null!=t&&null!=t&&0<t.length){t.append("<br />"),t.append('<div id="modal-cinema-content-location" align="center"></div>');var n=$("#modal-cinema-content-location");n.append('<label for="cinema-location"></label>'),n.append('<select id="cinema-location" onchange="InfoLib.loadCinemaInLocation()"></select>');for(var i=$("#cinema-location"),o=0;o<e.length;o++)i.append("<option value='"+e[o].id+"'>"+e[o].name+"</option>");t.append("<br />"),InfoLib.loadCinemaInLocation()}})},loadCinemaInLocation:function(){var e=$("#cinema-location").val();e+""!=""&&null!=e&&$.get(InfoLib.url_ServiceApi+"cinemacity-"+e+".json",function(e){objTableCinema=$("#tbl-cinema-modal"),null!=objTableCinema&&null!=objTableCinema&&0<objTableCinema.length&&objTableCinema.remove(),$("#panel-cinema").append('<table id="tbl-cinema-modal" border="" cellspacing="1"></table>'),objTableCinema=$("#tbl-cinema-modal"),objTableCinema.append('<tr id="tr-cinema-date"></tr>'),$("#tr-cinema-date").append('<td colspan="4" class="tr-date">Lịch chiếu phim tại <strong>'+e.CityName+"</strong> ngày <strong>"+e.Date+"<strong></td>"),objTableCinema.append('<tr id="tr-cinema-title"></tr>');var t=$("#tr-cinema-title");t.append('<th align="center" width="30%">Tên phim</th>'),t.append('<th align="center" width="65%">Giờ chiếu</th>');for(var n=0;n<e.CinemaInfo.length;n++){objTableCinema.append('<tr id="tr-cinema-data-Parent'+n+'"></tr>'),$("#tr-cinema-data-Parent"+n).append('<td colspan="3" align="center"><strong>'+e.CinemaInfo[n].CinemaName+"</strong></td>");for(var i=0;i<e.CinemaInfo[n].FilmInfo.length;i++){objTableCinema.append('<tr id="tr-cinema-data'+n+"_"+i+'"></tr>');var o=$("#tr-cinema-data"+n+"_"+i);o.append('<td align="left">'+e.CinemaInfo[n].FilmInfo[i].Films+"</td>"),o.append('<td align="left">'+e.CinemaInfo[n].FilmInfo[i].Time+"</td>")}}})},loadCar:function(){$.get(InfoLib.url_ServiceApi+"carlist.json",function(e){var t=$("#panel-car");if(null!=t&&null!=t&&0<t.length){t.append("<br />"),t.append('<div id="modal-car-content-location" align="center"></div>');var n=$("#modal-car-content-location");n.append('<label for="car-location"></label>'),n.append('<select id="car-location" onchange="InfoLib.loadCarInLocation()"></select>');for(var i=$("#car-location"),o=0;o<e.length;o++)i.append("<option value='"+e[o].Brand+"'>"+e[o].Brand+"</option>");t.append("<br />"),InfoLib.loadCarInLocation()}})},loadCarInLocation:function(){var e=$("#car-location").val();e+""!=""&&null!=e&&$.get(InfoLib.url_ServiceApi+"cardata-"+e+".json",function(e){var t=$("#tbl-car-modal");null!=t&&null!=t&&0<t.length&&t.remove(),$("#panel-car").append('<table id="tbl-car-modal" border="" cellspacing="1"></table>'),(t=$("#tbl-car-modal")).append('<tr id="tr-car-date"></tr>'),$("#tr-car-date").append('<td colspan="7" class="tr-date">Bảng giá xe ô tô <strong>'+e[0].Brand+"</strong> ngày <strong>"+e[0].Date+"</strong></td>"),t.append('<tr id="tr-car-title"></tr>'),objTitleCar=$("#tr-car-title"),objTitleCar.append('<th align="center" width="40%">Tên xe</th>'),objTitleCar.append('<th align="center" width="10%">Loại xe</th>'),objTitleCar.append('<th align="center" width="10%">Nguồn gốc</th>'),objTitleCar.append('<th align="center" width="10%">Giá niêm yết</th>'),objTitleCar.append('<th align="center" width="10%">Giá thương lượng</th>'),objTitleCar.append('<th align="center" width="10%">Động cơ</th>'),objTitleCar.append('<th align="center" width="10%">Hộp số</th>');for(var n=0;n<e.length;n++)t.append('<tr id="tr-car-data'+n+'"></tr>'),objDataCar=$("#tr-car-data"+n),objDataCar.append('<td align="left">'+e[n].Name+"</td>"),objDataCar.append('<td align="left">'+e[n].Type+"</td>"),objDataCar.append('<td align="left">'+e[n].Origin+"</td>"),objDataCar.append('<td align="center">'+e[n].Price+"</td>"),objDataCar.append('<td align="center">'+e[n].PriceDeviation+"</td>"),objDataCar.append('<td align="left">'+e[n].Engine+"</td>"),objDataCar.append('<td align="left">'+e[n].Gear+"</td>")})},loadMoto:function(){$.get(InfoLib.url_ServiceApi+"motolist.json",function(e){var t=$("#panel-moto");if(null!=t&&null!=t&&0<t.length){t.append("<br />"),t.append('<div id="modal-moto-content-location" align="center"></div>');var n=$("#modal-moto-content-location");n.append('<label for="moto-location"></label>'),n.append('<select id="moto-location" onchange="InfoLib.loadMotoInLocation()"></select>');for(var i=$("#moto-location"),o=0;o<e.length;o++)i.append("<option value='"+e[o].Brand+"'>"+e[o].Brand+"</option>");t.append("<br />"),InfoLib.loadMotoInLocation()}})},loadMotoInLocation:function(){var e=$("#moto-location").val();e+""!=""&&null!=e&&$.get(InfoLib.url_ServiceApi+"motodata-"+e+".json",function(e){var t=$("#tbl-moto-modal");null!=t&&null!=t&&0<t.length&&t.remove(),$("#panel-moto").append('<table id="tbl-moto-modal" border="" cellspacing="1"></table>'),(t=$("#tbl-moto-modal")).append('<tr id="tr-moto-date"></tr>'),$("#tr-moto-date").append('<td colspan="7" class="tr-date">Bảng giá xe máy <strong>'+e[0].Brand+"</strong> ngày <strong>"+e[0].Date+"</strong></td>"),t.append('<tr id="tr-moto-title"></tr>'),objTitleMoto=$("#tr-moto-title"),objTitleMoto.append('<th align="center" width="40%">Tên xe</th>'),objTitleMoto.append('<th align="center" width="10%">Loại xe</th>'),objTitleMoto.append('<th align="center" width="10%">Nguồn gốc</th>'),objTitleMoto.append('<th align="center" width="10%">Giá niêm yết</th>'),objTitleMoto.append('<th align="center" width="10%">Giá thương lượng</th>'),objTitleMoto.append('<th align="center" width="10%">Động cơ</th>'),objTitleMoto.append('<th align="center" width="10%">Hộp số</th>');for(var n=0;n<e.length;n++)t.append('<tr id="tr-moto-data'+n+'"></tr>'),objDataMoto=$("#tr-moto-data"+n),objDataMoto.append('<td align="left">'+e[n].Name+"</td>"),objDataMoto.append('<td align="left">'+e[n].Type+"</td>"),objDataMoto.append('<td align="left">'+e[n].Origin+"</td>"),objDataMoto.append('<td align="center">'+e[n].Price+"</td>"),objDataMoto.append('<td align="center">'+e[n].PriceDeviation+"</td>"),objDataMoto.append('<td align="center">'+e[n].Engine+"</td>"),objDataMoto.append('<td align="left">'+e[n].Gear+"</td>")})},focusTab:function(){var e=window.getUrlParam("t");if(null!=e&&""!==e&&0<="#weather,#exchange,#gold,#lottery,#stock,#channel,#cinema,#horoscope,#energy,#car,#moto".indexOf(e)){var t=$("#caption-"+e);null!=t&&null!=t&&0<t.length&&t.removeClass("accordion__toggle").addClass("accordion__toggle is-active");var n=$("#panel-"+e);null!=n&&null!=n&&0<n.length&&n.removeClass("accordion__content").addClass("accordion__content is-active")}},Load:function(){InfoLib.focusTab(),InfoLib.viewWeather(),InfoLib.loadWeatherInfo(),InfoLib.loadExchange(),InfoLib.loadGold(),InfoLib.loadHoroscope(),InfoLib.loadEnergy(),InfoLib.loadLottery(),InfoLib.loadStock(),InfoLib.loadChannel(),InfoLib.loadCinema(),InfoLib.loadCar(),InfoLib.loadMoto()}};InfoLib.Load();var Messaging=function(){function i(){return"true"===$.cookie(m+"allow_notification")}function t(e){l(e),$.cookie(m+"allow_notification",e,{expires:365,path:"/",domain:"baomoi.com"})}function o(){return"true"===$.cookie(m+"token_sent_"+g)}function r(e){$.cookie(m+"token_sent_"+g,e,{expires:365,path:"/",domain:"baomoi.com"})}function n(e){$.cookie(m+"unsub_sent",e,{expires:365,path:"/",domain:"baomoi.com"})}function a(e){var t,n;t=$.cookie(m+"token_curr"),$.cookie(m+"token_prev",t,{expires:365,path:"/",domain:"baomoi.com"}),n=e,$.cookie(m+"token_curr",n,{expires:365,path:"/",domain:"baomoi.com"})}function s(){var e=parseInt($.cookie(m+"bmpnid"),10);return isNaN(e)?0:e}function l(e){e?v.addClass("is-active"):v.removeClass("is-active")}function c(){!o()&&i()&&(y||(y=!0,h.getToken().then(function(e){e?(a(e),u(e)):r(y=!1)}).catch(function(e){r(y=!1)})))}function u(e){if(!o()&&i()){var t={pnid:s(),token:e,pntype:1},n=EpiLib.getVisitorID();n&&(t.visitorid=n),"desktop"===EpiLib.device.type?t.platform=1:t.platform=2,EpiLib.isDebug&&(t.isdev=EpiLib.isDebug),EpiAPI.Notification.subscribe({data:t,success:function(e){var t;e&&e.pnid&&(t=e.pnid,$.cookie(m+"bmpnid",t.toString(),{expires:999,path:"/",domain:"baomoi.com"}),r(!0)),y=!1},error:function(e){y=!1}})}else y=!1}function d(){"true"!==$.cookie(m+"unsub_sent")&&!i()&&0<s()?b||(b=!0,EpiAPI.Notification.unsubscribe({data:{pnid:s()},success:function(e){n(!0),b=!1},error:function(e){b=!1}})):b=!1}function p(e){e?h?(r(!1),f()):console.log("messaging has not been init!"):(n(!1),t(!1),d())}function f(){h.requestPermission().then(function(){t(!0),c()}).catch(function(e){p(!1)})}var h,m=EpiLib.isDebug?"dev_":"",g=1,v=$(".btn-notification-switch"),y=!1,b=!1;v.click(function(e){v.toggleClass("is-active"),e.preventDefault(),p(!i())}),v.parent().hide(),"Notification"in window&&((h=firebase.messaging()).usePublicVapidKey("BGz2KHzHb5BIXl2doegsfF_tLRwzpfroX9w_4gdIRI8BxClmG0fj7231mJM1SSV26tH-7JbatVZ53m-caO-3LoM"),navigator.serviceWorker.register("/firebase-messaging-sw-1.0.1.js").then(function(e){h.useServiceWorker(e),h.onTokenRefresh(function(){h.getToken().then(function(e){a(e),r(!1),u(e)}).catch(function(e){})}),h.onMessage(function(e){console.log("Received ",e.nid)}),v.parent().show()}),l(i()),i()?f():d(),$(document).on("user:loggedout",function(){r(!1),c()}),$(document).on("user:loggedin",function(e,t){t&&r(!1),c()}));return{}}();